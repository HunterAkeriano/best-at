import{r as _,x as z,G as H,o as t,c as p,b as s,y as E,z as T,n as N,u as n,h as c,i as d,H as W,t as C,e as q,w as G,k as J,j as U,N as j,J as Z}from"./index-a2d09072.js";import{I as F,a as K}from"./ShowPassTwo-a8e0f644.js";import{u as Q,r as O,e as X,c as D,m as Y,I as M}from"./index-4d5f1f99.js";const ss={class:"main login"},es={class:"container"},as=s("div",{class:"login__links"},[s("p",null,"Главная"),s("span",null,"/"),s("p",null,"Авторизация")],-1),os={class:"login__forms"},ts=s("h3",null,"Авторизация",-1),ns={class:"login__forms-block"},rs={class:"login__forms-input"},ls=s("h5",null,"Ваш email",-1),is={key:0},us={class:"login__forms-input",style:{"margin-top":"15px"}},cs=s("h5",null,"Ваш пароль",-1),ds=["type"],_s={key:2},ps={class:"login__forms-btn"},ms={class:"login__forms-error"},fs={__name:"LoginViews",setup(vs){function R(){e.value.password=e.value.password.replace(/[^a-zA-Z0-9@]/g,"")}const e=_({email:"",password:""}),A=z(()=>({email:{required:O,email:X},password:{required:D.withMessage("Введите пароль",O),minLength:D.withMessage("Минимальная длина пароля 6 символов",Y(6))}})),a=Q(A,e),B=H(),r=_(!0),i=_("");async function L(){j(Z,e.value.email,e.value.password).then(l=>{localStorage.setItem("user",JSON.stringify(l.user)),B.push("/")}).catch(l=>{switch(l.code){case"auth/invalid-email":i.value="Не верный емаил";break;case"auth/user-not-found":i.value="Пользователь не найден";break;case"auth/wrong-password":i.value="Не верный пароль";break;default:i.value=`${l.code}`;break}})}async function P(){await a.value.$validate()&&await L()}return(l,o)=>{var m,v,h,w,g,f,k,y,$,S,x,I,V,b;return t(),p("div",ss,[s("div",es,[as,s("div",os,[ts,s("div",ns,[s("div",rs,[ls,E(s("input",{class:N({error:(v=(m=n(a))==null?void 0:m.email)==null?void 0:v.$error}),type:"text","onUpdate:modelValue":o[0]||(o[0]=u=>e.value.email=u)},null,2),[[T,e.value.email]]),(w=(h=n(a))==null?void 0:h.email)!=null&&w.$error?(t(),p("span",is,"Введите email")):c("",!0),(f=(g=n(a))==null?void 0:g.email)!=null&&f.$error?(t(),d(M,{key:1,class:"error-icons"})):c("",!0)]),s("div",us,[cs,E(s("input",{class:N({error:(y=(k=n(a))==null?void 0:k.password)==null?void 0:y.$error}),onInput:R,type:r.value?"password":"text","onUpdate:modelValue":o[1]||(o[1]=u=>e.value.password=u)},null,42,ds),[[W,e.value.password]]),r.value?(t(),d(F,{key:0,onClick:o[2]||(o[2]=u=>r.value=!r.value),class:"showpass"})):(t(),d(K,{key:1,onClick:o[3]||(o[3]=u=>r.value=!r.value),class:"showpass"})),(S=($=n(a))==null?void 0:$.password)!=null&&S.$error?(t(),p("span",_s,C((I=(x=n(a))==null?void 0:x.password)==null?void 0:I.$errors[0].$message),1)):c("",!0),(b=(V=n(a))==null?void 0:V.password)!=null&&b.$error?(t(),d(M,{key:3,class:"error-icons"})):c("",!0)]),s("div",ps,[q(J,{width:130,padding:9,lineHeight:21,style:{"margin-top":"20px"},onClick:P},{default:G(()=>[U("Войти")]),_:1})]),s("p",ms,C(i.value),1)])])])])}}};export{fs as default};
