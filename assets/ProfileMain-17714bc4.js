import{a0 as y,r as f,v as a,a as i,c as d,b as s,x as l,y as _,d as w,A as S,g as v,f as I,w as g,h as N,i as k,P as c,C as m,a1 as D,a2 as P,D as U,E as C,G as x,R as E,M,t as V,n as h,a3 as O,a4 as B}from"./index-7ebd3b00.js";import{I as b,a as A}from"./ShowPassTwo-43880339.js";const J={key:0,class:"account"},T=s("h4",null,"Аккаунт",-1),W={class:"account__inputs"},R={key:0,class:"account__inputs-input"},z=s("p",null,"ФИО",-1),G={class:"account__inputs-input",style:{"margin-top":"19px"}},H=s("p",null,"Пароль",-1),j=["type"],q={class:"account__inputs-input",style:{"margin-top":"16px"}},F=s("p",null,"E-mail",-1),K={class:"account__inputs-input",style:{"margin-top":"16px"}},L=s("p",null,"Телефон",-1),Q={__name:"ProfileMain",setup($){const e=y(),o=f(!0);async function p(){c(m,e.user[e.userId].email,e.user[e.userId].password).then(async u=>{const t=u.user;t.email!==e.user[e.userId].emailNew&&(e.user[e.userId].email=e.user[e.userId].emailNew,D(t,e.user[e.userId].emailNew).then(async()=>{const n=await c(m,e.user[e.userId].email,e.user[e.userId].password);e.auth=n.user,localStorage.setItem("user",JSON.stringify(n.user))}).catch(n=>{console.log(n)})),e.user[e.userId].passwordNew!==e.user[e.userId].password&&(e.user[e.userId].password=e.user[e.userId].passwordNew,P(t,e.user[e.userId].password).then(async()=>{const n=await c(m,e.user[e.userId].email,e.user[e.userId].password);e.auth=n.user,localStorage.setItem("user",JSON.stringify(n.user))}).catch(n=>{console.log(n)})),e.user[e.userId].name=e.user[e.userId].newName;const r={email:e.user[e.userId].email,password:e.user[e.userId].password,name:e.user[e.userId].name,phone:e.user[e.userId].phone,type:e.user[e.userId].type};await U(C(x,"allUser",e.user[e.userId].docName),r)})}return(u,t)=>a(e).userId!==null?(i(),d("div",J,[T,s("div",W,[a(e).user[a(e).userId].type.student?(i(),d("div",R,[z,l(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>a(e).user[a(e).userId].newName=r)},null,512),[[_,a(e).user[a(e).userId].newName]])])):w("",!0),s("div",G,[H,l(s("input",{type:o.value?"text":"password","onUpdate:modelValue":t[1]||(t[1]=r=>a(e).user[a(e).userId].passwordNew=r)},null,8,j),[[S,a(e).user[a(e).userId].passwordNew]]),o.value?(i(),v(b,{key:0,onClick:t[2]||(t[2]=r=>o.value=!o.value)})):(i(),v(A,{key:1,onClick:t[3]||(t[3]=r=>o.value=!o.value)}))]),s("div",q,[F,l(s("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>a(e).user[a(e).userId].emailNew=r)},null,512),[[_,a(e).user[a(e).userId].emailNew]])]),s("div",K,[L,l(s("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=r=>a(e).user[a(e).userId].phone=r)},null,512),[[_,a(e).user[a(e).userId].phone]])]),I(k,{width:239,padding:15,style:{"margin-top":"28px"},onClick:t[6]||(t[6]=r=>p())},{default:g(()=>[N("Сохранить изменения")]),_:1})])])):w("",!0)}};const X={class:"profile"},Y={class:"container"},Z={class:"profile__links"},ee=s("span",null,"/",-1),se=s("p",{style:{cursor:"pointer"}},"Личный кабинет",-1),te=s("div",{class:"profile__title"},[s("h3",null,"Личный кабинет")],-1),ae={class:"profile__wrapper"},re={class:"profile__wrapper-left"},oe={key:0,class:"profile__wrapper-user"},ne={class:"user"},ue=s("div",{class:"user__photo",style:{width:"65px",height:"65px",background:"red"}},null,-1),ie={class:"user__info"},le={class:"user__info-name"},de={class:"user__info-type"},pe=s("p",null,"Выйти",-1),_e={class:"profile__wrapper-info"},he={__name:"ProfileMain",setup($){const e=y(),o=f();async function p(){(await O(B(x,"allUser"))).forEach(t=>{e.user.push({id:e.user.length,docName:t.id,name:t.data().name,newName:t.data().name,email:t.data().email,login:t.data().login,password:t.data().password,phone:t.data().phone,type:t.data().type,emailNew:t.data().email,passwordNew:t.data().password,type:t.data().type})})}return E(()=>{o.value=JSON.parse(localStorage.getItem("user")),p().then(()=>{e.user.forEach(u=>{u.email==o.value.email&&(e.userId=u.id)})})}),(u,t)=>{const r=M("router-link");return i(),d("div",X,[s("div",Y,[s("div",Z,[s("p",null,[I(r,{to:{path:"/"}},{default:g(()=>[N("Главная")]),_:1})]),ee,se]),te,s("div",ae,[s("div",re,[a(e).userId!==null?(i(),d("div",oe,[s("div",ne,[ue,s("div",ie,[s("div",le,[s("p",null,V(a(e).user[a(e).userId].name),1)]),s("div",de,[s("p",{class:h({active:a(e).user[a(e).userId].type.student})},"Ученик",2),s("p",{class:h({active:a(e).user[a(e).userId].type.teachers})},"Учитель",2),s("p",{class:h({active:a(e).user[a(e).userId].type.company})},"Компания",2),pe])])])])):w("",!0)]),s("div",_e,[I(Q)])])])])}}};export{he as default};
