import{_ as M,o as l,c as d,D as B,Z as N,a6 as U,r as m,x as E,v as P,u as i,b as e,t as r,F as _,g as p,i as R,h as v,y as g,aa as V,e as C,z as j,ab as x,w as q,k as A,m as G,q as Y,a1 as J,B as K,s as H,T as O,j as w,p as Q,a as W}from"./index-50675c12.js";import{T as X}from"./ThePagination-5ee7a1db.js";import{s as tt}from"./StateForum-aba135e1.js";const et={},ot={width:"150",height:"24",viewBox:"0 0 150 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},at=B('<g opacity="0.5"><path opacity="0.54" fill-rule="evenodd" clip-rule="evenodd" d="M43 4V7H45.2L41.7 15H39V18H47V15H44.7L48.2 7H51V4H43Z" fill="#292C32"></path></g><path opacity="0.54" fill-rule="evenodd" clip-rule="evenodd" d="M120.501 8.9L111.601 0L110.201 1.4L112.601 3.8L107.501 8.9C106.901 9.5 106.901 10.4 107.501 11L113.001 16.5C113.301 16.8 113.701 16.9 114.101 16.9C114.501 16.9 114.901 16.8 115.201 16.5L120.701 11C121.101 10.5 121.101 9.5 120.501 8.9ZM109.101 10L113.901 5.2L118.701 10H109.101ZM122.902 11.5C122.902 11.5 120.902 13.7 120.902 15C120.902 16.1 121.802 17 122.902 17C124.002 17 124.902 16.1 124.902 15C124.902 13.7 122.902 11.5 122.902 11.5Z" fill="#292C32"></path><path opacity="0.54" fill-rule="evenodd" clip-rule="evenodd" d="M104 20V24H128V20H104Z" fill="#292C32"></path><path opacity="0.54" fill-rule="evenodd" clip-rule="evenodd" d="M133 10L138 15L143 10H133Z" fill="#292C32"></path><g opacity="0.5"><path opacity="0.54" fill-rule="evenodd" clip-rule="evenodd" d="M77.8984 17C81.1984 17 83.8984 14.3 83.8984 11V3H81.3984V11C81.3984 12.9 79.7984 14.5 77.8984 14.5C75.9984 14.5 74.3984 12.9 74.3984 11V3H71.8984V11C71.8984 14.3 74.5984 17 77.8984 17ZM70.8984 19V21H84.8984V19H70.8984Z" fill="#292C32"></path></g><path opacity="0.54" fill-rule="evenodd" clip-rule="evenodd" d="M15.5 10.8C16.5 10.1 17.2 9 17.2 8C17.2 5.7 15.5 4 13.2 4H7V18H14C16.1 18 17.7 16.3 17.7 14.2C17.7 12.7 16.8 11.4 15.5 10.8ZM9.89844 6.5H12.8984C13.6984 6.5 14.3984 7.2 14.3984 8C14.3984 8.8 13.6984 9.5 12.8984 9.5H9.89844V6.5ZM13.3984 15.5H9.89844V12.5H13.3984C14.1984 12.5 14.8984 13.2 14.8984 14C14.8984 14.8 14.2984 15.5 13.3984 15.5Z" fill="#292C32"></path>',6),st=[at];function nt(c,u){return l(),d("svg",ot,st)}const it=M(et,[["render",nt]]);const h=c=>(Q("data-v-07773b8e"),c=c(),W(),c),lt={class:"forum"},dt={key:0,class:"container"},rt=h(()=>e("div",{class:"forum__links"},[e("p",null,"Главная"),e("span",null,"/"),e("p",null,"Список разделов форума"),e("span",null,"/"),e("p",null,"Список тем форума")],-1)),ut={class:"forum__title"},ct=h(()=>e("h4",null,"Форум",-1)),ft={class:"forum__subtitle"},mt={class:"forum__msg"},ht={class:"forum__msg-item"},_t={class:"user"},pt=["src"],vt=h(()=>e("p",null,[w("Сообщений: "),e("span",null,"6")],-1)),gt=h(()=>e("p",{style:{"margin-top":"7px"}},"Регистрация: 15.06.2021",-1)),Ct={class:"text"},xt={class:"text__date"},yt={class:"text__content"},zt={key:1,class:"forum__input"},Ft={class:"forum__input-text"},Vt={class:"head"},Ht={class:"head__fonts"},Mt=["value"],wt={class:"head__fz"},St=["value"],Lt={class:"head__style"},bt={class:"body"},Zt={__name:"ForumChat",setup(c){const u=N(),y=U(),t=tt(),f=m(1);function S(){let s=(f.value-1)*2,o=s+2;return t.forum[t.idForum].theme[t.idChat].messangers.slice(s,o)}const z=E(()=>Math.ceil(t.forum[t.idForum].theme[t.idChat].messangers.length/2));function L(s){f.value=s}async function b(){if(t.forum.length>0)return;(await G(Y(H,"forum"))).forEach(o=>{t.forum.push({idx:o.id,id:o.data().id,router:o.data().router,theme:o.data().theme,timed:o.data().timed,title:o.data().title})})}P(()=>{b().then(()=>{t.forum.forEach(s=>{s.router==y.params.id&&(t.idForum=s.id,t.forum[t.idForum].theme.forEach(o=>{o.router==y.params.chatid&&(t.idChat=o.id)}))})})});const Z=m([{id:0,font:"Roboto"},{id:1,font:"Arial"},{id:2,font:"Helvetica"},{id:3,font:"Times New Roman"},{id:4,font:"Verdana"},{id:5,font:"Georgia"},{id:6,font:"Courier New"},{id:7,font:"Tahoma"},{id:8,font:"Verdana"},{id:9,font:"Impact"},{id:10,font:"Comic Sans MS"}]),D=m([{id:0,fz:8},{id:1,fz:9},{id:2,fz:10},{id:3,fz:11},{id:4,fz:12},{id:5,fz:13},{id:6,fz:14},{id:7,fz:15},{id:8,fz:16},{id:9,fz:17},{id:10,fz:18},{id:11,fz:19},{id:12,fz:20}]),n=m({fonts:"Roboto",fz:8,text:""});function $(){console.log(n.value)}function k(){const s=new Date,o=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0"),F=s.getFullYear();return`${o}.${a}.${F}`}const I=k();async function T(){const s={id:t.forum[t.idForum].theme[t.idChat].messangers.length,text:n.value.text,fz:n.value.fz,fonts:n.value.fonts,user:{name:u.user[u.userId].name,ava:u.user[u.userId].ava[0].url},date:I};t.forum[t.idForum].theme[t.idChat].messangers.push(s),n.value.text="",f.value=Math.ceil(t.forum[t.idForum].theme[t.idChat].messangers.length/2);const o={theme:t.forum[t.idForum].theme};await J(K(H,"forum",t.forum[t.idForum].idx),o)}return(s,o)=>(l(),d("div",lt,[i(t).idForum!==null&&i(t).idChat!==null?(l(),d("div",dt,[rt,e("div",ut,[ct,e("h5",null,r(i(t).forum[i(t).idForum].theme[i(t).idChat].title),1)]),e("div",ft,[e("h5",null,r(i(t).forum[i(t).idForum].theme[i(t).idChat].title),1)]),e("div",mt,[(l(!0),d(_,null,p(S(),(a,F)=>(l(),d("div",ht,[e("div",_t,[e("img",{src:a.user.ava,alt:""},null,8,pt),e("h5",null,r(a.user.name),1),C(O,{style:{"margin-top":"4px","margin-bottom":"0"},rating:4}),vt,gt]),e("div",Ct,[e("div",xt,[e("p",null,r(a.date),1),e("p",null,"#"+r(+a.id+1),1)]),e("div",yt,[e("p",{style:x({fontFamily:a.fonts,fontSize:`${a.fz}px`})},r(a.text),5)])])]))),256))]),z.value>1?(l(),R(X,{key:0,"total-pages":z.value,"current-page":f.value,style:{"margin-top":"32px"},onChangePage:L},null,8,["total-pages","current-page"])):v("",!0),i(u).userId!==null?(l(),d("div",zt,[e("h5",null,r(i(t).forum[i(t).idForum].theme[i(t).idChat].title),1),e("div",Ft,[e("div",Vt,[e("div",Ht,[g(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>n.value.fonts=a),name:"",id:""},[(l(!0),d(_,null,p(Z.value,a=>(l(),d("option",{value:a.font,style:x({fontFamily:a.font})},r(a.font),13,Mt))),256))],512),[[V,n.value.fonts]])]),e("div",wt,[g(e("select",{onChange:$,"onUpdate:modelValue":o[1]||(o[1]=a=>n.value.fz=a)},[(l(!0),d(_,null,p(D.value,a=>(l(),d("option",{value:a.fz},r(a.fz),9,St))),256))],544),[[V,n.value.fz]])]),e("div",Lt,[C(it)])]),e("div",bt,[g(e("textarea",{style:x({fontFamily:n.value.fonts,fontSize:`${n.value.fz}px`}),"onUpdate:modelValue":o[2]||(o[2]=a=>n.value.text=a),placeholder:"Сообщение",name:"",id:"",cols:"30",rows:"10"},null,4),[[j,n.value.text]])]),C(A,{width:145,padding:9,lineHeight:21,isCourses:!0,style:{"margin-top":"20px","margin-bottom":"50px"},onClick:T},{default:q(()=>[w("Отправить")]),_:1})])])):v("",!0)])):v("",!0)]))}},It=M(Zt,[["__scopeId","data-v-07773b8e"]]);export{It as default};
