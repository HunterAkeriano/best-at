import{_ as S,r as m,m as L,o as D,ad as U,u as A,a as o,c as d,n as O,v as B,b as n,e as i,F as I,d as V,t as N,E as F,s as w,h as g,i as T,j as f,p as M,k as z,D as H,a6 as P,l as R,w as C,g as k,a1 as j,y as q,f as E}from"./index-d52695da.js";import{B as G,P as J}from"./PlanCourse-0ea4122b.js";import{s as $,A as K}from"./StateCourse-42196550.js";import"./TheSelect-0d37ec32.js";import"./AddIcon-03dcdd76.js";const Q={class:"select__teachers"},W=["onClick"],X=["src"],Y={__name:"Select",emits:["activeElement","click"],setup(r,{emit:_}){const u=$(),l=m(""),p=L(()=>{const s=l.value.toLowerCase();return u.teacher.filter(e=>e.nameUser.toLowerCase().includes(s))});function t(s,e){l.value=s,v(!1),_("activeElement",e)}const a=m(!1);function v(s){a.value=s}const x=m([]);async function y(){(await g(T(f,"course"))).forEach(e=>{x.value.push({idx:e.data().idx,id:e.data().id,about:e.data().about,date:e.data().date,lvl:e.data().lvl,maxStudent:e.data().maxStudent,name:e.data().name,plan:e.data().plan,pricelessons:e.data().pricelessons,student:e.data().student,teachers:e.data().teachers,time:e.data().time,timeLessons:e.data().timeLessons,timeOut:e.data().timeOut,timeTest:e.data().timeTest,years:e.data().years})}),l.value=u.teacher[u.idTeacher].nameUser}D(()=>{document.addEventListener("click",h),y()}),U(()=>{document.removeEventListener("click",h)});function h(s){s.target.closest(".select")||v(!1)}return(s,e)=>A(u).idTeacher?(o(),d("div",{key:0,class:F(["select",{active:a.value}])},[O(n("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>l.value=c),onFocus:e[1]||(e[1]=c=>v(!0))},null,544),[[B,l.value]]),i(K),n("div",Q,[(o(!0),d(I,null,V(p.value,(c,_e)=>(o(),d("div",{class:"item",onClick:ve=>t(c.nameUser,c.id)},[n("img",{src:c.photo,alt:""},null,8,X),n("p",null,N(c.nameUser),1)],8,W))),256))])],2)):w("",!0)}},Z=S(Y,[["__scopeId","data-v-2887e9f0"]]);const b=r=>(M("data-v-2e5fc1d2"),r=r(),z(),r),ee={class:"teacher"},ae={class:"teacher__select"},te=b(()=>n("p",null,"Назначить учителя",-1)),se=b(()=>n("div",{class:"teacher__students"},[n("p",null,"Тут будет отображаться список учеников, которые оплатили и зарегистрировались на курс.")],-1)),ne={__name:"Teacher",emits:["activeTeacher","click"],setup(r,{emit:_}){function u(l){_("activeTeacher",l)}return(l,p)=>(o(),d("div",ee,[n("div",ae,[te,i(Z,{onActiveElement:u})]),se]))}},le=S(ne,[["__scopeId","data-v-2e5fc1d2"]]);const ue={class:"course-create"},ce={key:0,class:"container"},ie=n("div",{class:"course-create__links"},[n("p",null,"Главная"),n("span",null,"/"),n("p",null,"Редактирование курса")],-1),re=n("div",{class:"course-create__title"},[n("h4",null,"Редактирование курса")],-1),oe={class:"course-create__wrapper",style:{"margin-top":"25px"}},de={class:"course-create__btn",style:{display:"flex","padding-bottom":"50px"}},ye={__name:"CourseEdit",setup(r){const _=H(),u=P(),l=$();async function p(){(await g(T(f,"publishedTeachers"))).forEach(e=>{l.teacher.push({id:l.teacher.length,nameUser:e.data().nameUser,photo:e.data().photo})})}const t=m([]),a=m(null);async function v(){(await g(T(f,"course"))).forEach(e=>{t.value.push({idx:e.data().idx,id:e.data().id,about:e.data().about,date:e.data().date,lvl:e.data().lvl,maxStudent:e.data().maxStudent,name:e.data().name,plan:e.data().plan,pricelessons:e.data().pricelessons,student:e.data().student,teachers:e.data().teachers,time:e.data().time,timeLessons:e.data().timeLessons,timeOut:e.data().timeOut,timeTest:e.data().timeTest,years:e.data().years})})}R(()=>{p(),v().then(()=>{t.value.forEach(s=>{s.id==u.params.id&&(a.value=s.idx,l.idTeacher=t.value[a.value].teachers,l.plan=t.value[a.value].plan)})})});function x(s){t.value[a.value].teachers=s}async function y(){const s={id:t.value[a.value].id,about:t.value[a.value].about,date:t.value[a.value].date,lvl:t.value[a.value].lvl,maxStudent:t.value[a.value].maxStudent,name:t.value[a.value].name,plan:l.plan,pricelessons:t.value[a.value].pricelessons,student:t.value[a.value].student,teachers:t.value[a.value].teachers,time:t.value[a.value].time,timeLessons:t.value[a.value].timeLessons,timeOut:t.value[a.value].timeOut,timeTest:t.value[a.value].timeTest,years:t.value[a.value].years};await j(q(f,"course",t.value[a.value].id),s)}function h(){_.push("/")}return(s,e)=>(o(),d("div",ue,[a.value!==null?(o(),d("div",ce,[ie,re,n("div",oe,[i(G,{data:t.value[a.value]},null,8,["data"]),i(le,{onActiveTeacher:x})]),i(J),n("div",de,[i(k,{width:200,padding:15,lineHeight:21,onClick:y},{default:C(()=>[E("Редактировать урок")]),_:1}),i(k,{style:{"margin-left":"20px"},width:130,padding:15,lineHeight:21,isCourses:!0,onClick:h},{default:C(()=>[E("Отменить")]),_:1})])])):w("",!0)]))}};export{ye as default};
