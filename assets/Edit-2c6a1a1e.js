import{G as C,a6 as D,r as o,ah as N,v as P,o as d,c as V,b as n,i as v,h,u as j,e as m,w as p,k as _,m as r,q as i,a1 as H,B as I,s as l,j as f}from"./index-a2d09072.js";import{B as R,T as q}from"./Teacher-30d5528d.js";import{s as A}from"./StateCourse-128dc4dc.js";import"./TheSelect-6523c9b9.js";const G={class:"course-create"},M={class:"container"},O=n("div",{class:"course-create__links"},[n("p",null,"Главная"),n("span",null,"/"),n("p",null,"Редактирование группового урока")],-1),U=n("div",{class:"course-create__title"},[n("h4",null,"Редактирование группового урока")],-1),$={class:"course-create__wrapper",style:{"margin-top":"25px"}},z={class:"course-create__btn",style:{display:"flex","margin-top":"40px","padding-bottom":"50px"}},Y={__name:"Edit",setup(F){const S=C(),g=D(),x=A(),c=o([]);async function y(){(await r(i(l,"publishedTeachers"))).forEach(e=>{c.value.push({id:x.teacher.length,title:e.data().nameUser})})}const u=N();async function b(){(await r(i(l,"publicStudentData"))).forEach(e=>{u.student.push({id:e.id,name:e.data().name,email:e.data().email,lessons:e.data().lessons})})}const t=o([]),s=o(null);async function L(){(await r(i(l,"lessons"))).forEach(e=>{t.value.push({id:e.data().id,idx:t.value.length,name:e.data().name,teachers:e.data().teachers,dateLessons:e.data().dateLessons,datePeriod:e.data().datePeriod,lessonsStart:e.data().lessonsStart,lessonsTime:e.data().lessonsTime,priceLessons:e.data().priceLessons,minStudent:e.data().minStudent,lvlStudent:e.data().lvlStudent,yearsStudent:e.data().yearsStudent,about:e.data().about,maxStudent:e.data().maxStudent,users:e.data().users})})}P(()=>{u.student=[],u.students=[],y(),b(),L().then(()=>{t.value.forEach(a=>{a.id==g.params.id&&(s.value=a.idx,u.students=a.users)})})});function w(a){t.value[s].teachers=a}async function T(){const a=u.students.map(B=>{const{lessons:J,...E}=B;return E}),e={name:t.value[s.value].name,teachers:t.value[s.value].teachers,dateLessons:t.value[s.value].dateLessons,datePeriod:t.value[s.value].datePeriod,lessonsStart:t.value[s.value].lessonsStart,lessonsTime:t.value[s.value].lessonsTime,priceLessons:t.value[s.value].priceLessons,minStudent:t.value[s.value].minStudent,lvlStudent:t.value[s.value].lvlStudent,yearsStudent:t.value[s.value].yearsStudent,about:t.value[s.value].about,maxStudent:t.value[s.value].maxStudent,users:a};await H(I(l,"lessons",t.value[s.value].id),e)}function k(){S.push("/")}return(a,e)=>(d(),V("div",G,[n("div",M,[O,U,n("div",$,[s.value!==null?(d(),v(R,{key:0,data:t.value[s.value],teached:c.value},null,8,["data","teached"])):h("",!0),j(u).student.length>0?(d(),v(q,{key:1,style:{height:"681px"},onActiveTeacher:w})):h("",!0)]),n("div",z,[m(_,{width:200,padding:15,lineHeight:21,onClick:T},{default:p(()=>[f("Редактировать урок")]),_:1}),m(_,{style:{"margin-left":"20px"},width:130,padding:15,lineHeight:21,isCourses:!0,onClick:k},{default:p(()=>[f("Отменить")]),_:1})])])]))}};export{Y as default};
