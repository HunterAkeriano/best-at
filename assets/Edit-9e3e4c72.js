import{D as C,a6 as D,r as o,ah as N,l as P,a as d,c as V,b as n,q as v,s as h,u as j,e as p,w as _,g as m,h as r,i,a1 as H,y as I,j as l,f}from"./index-d52695da.js";import{B as R,T as q}from"./Teacher-95ddbdcd.js";import{s as A}from"./StateCourse-42196550.js";import"./TheSelect-0d37ec32.js";const M={class:"course-create"},O={class:"container"},U=n("div",{class:"course-create__links"},[n("p",null,"Главная"),n("span",null,"/"),n("p",null,"Редактирование группового урока")],-1),$=n("div",{class:"course-create__title"},[n("h4",null,"Редактирование группового урока")],-1),z={class:"course-create__wrapper",style:{"margin-top":"25px"}},F={class:"course-create__btn",style:{display:"flex","margin-top":"40px","padding-bottom":"50px"}},Y={__name:"Edit",setup(G){const S=C(),g=D(),y=A(),c=o([]);async function x(){(await r(i(l,"publishedTeachers"))).forEach(e=>{c.value.push({id:y.teacher.length,title:e.data().nameUser})})}const u=N();async function b(){(await r(i(l,"publicStudentData"))).forEach(e=>{u.student.push({id:e.id,name:e.data().name,email:e.data().email,lessons:e.data().lessons})})}const t=o([]),s=o(null);async function L(){(await r(i(l,"lessons"))).forEach(e=>{t.value.push({id:e.data().id,idx:t.value.length,name:e.data().name,teachers:e.data().teachers,dateLessons:e.data().dateLessons,datePeriod:e.data().datePeriod,lessonsStart:e.data().lessonsStart,lessonsTime:e.data().lessonsTime,priceLessons:e.data().priceLessons,minStudent:e.data().minStudent,lvlStudent:e.data().lvlStudent,yearsStudent:e.data().yearsStudent,about:e.data().about,maxStudent:e.data().maxStudent,users:e.data().users})})}P(()=>{u.student=[],u.students=[],x(),b(),L().then(()=>{t.value.forEach(a=>{a.id==g.params.id&&(s.value=a.idx,u.students=a.users)})})});function w(a){t.value[s].teachers=a}async function T(){const a=u.students.map(B=>{const{lessons:J,...E}=B;return E}),e={name:t.value[s.value].name,teachers:t.value[s.value].teachers,dateLessons:t.value[s.value].dateLessons,datePeriod:t.value[s.value].datePeriod,lessonsStart:t.value[s.value].lessonsStart,lessonsTime:t.value[s.value].lessonsTime,priceLessons:t.value[s.value].priceLessons,minStudent:t.value[s.value].minStudent,lvlStudent:t.value[s.value].lvlStudent,yearsStudent:t.value[s.value].yearsStudent,about:t.value[s.value].about,maxStudent:t.value[s.value].maxStudent,users:a};await H(I(l,"lessons",t.value[s.value].id),e)}function k(){S.push("/")}return(a,e)=>(d(),V("div",M,[n("div",O,[U,$,n("div",z,[s.value!==null?(d(),v(R,{key:0,data:t.value[s.value],teached:c.value},null,8,["data","teached"])):h("",!0),j(u).student.length>0?(d(),v(q,{key:1,style:{height:"681px"},onActiveTeacher:w})):h("",!0)]),n("div",F,[p(m,{width:200,padding:15,lineHeight:21,onClick:T},{default:_(()=>[f("Редактировать урок")]),_:1}),p(m,{style:{"margin-left":"20px"},width:130,padding:15,lineHeight:21,isCourses:!0,onClick:k},{default:_(()=>[f("Отменить")]),_:1})])])]))}};export{Y as default};
