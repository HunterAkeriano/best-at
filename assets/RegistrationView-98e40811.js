import{_ as $e,o as _,c as P,a as Jt,b as d,g as Kd,r as F,d as Qd,w as fn,i as ro,e as Uo,f as Zd,h as z,j as Xd,k as Jd,u as g,l as nl,p as rl,n as sl,m as K,v as ie,q,s as A,t as b,x as pn,y as ht,z as pe,A as dt,B as ft,F as so,C as io,D as Yd,E as ef,G as tf,T as il,H as nf}from"./index-a978ed5b.js";import{_ as an}from"./Button-2593ba44.js";const rf={},sf={width:"104",height:"104",viewBox:"0 0 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},of=Jt('<circle cx="52" cy="52" r="52" fill="#F3F7FC"></circle><g clip-path="url(#clip0_2456_2)"><path d="M66.5206 59.6578C67.8504 59.6578 69.1466 59.2394 70.2255 58.4618C71.3043 57.6841 72.1112 56.5868 72.5317 55.3251L73.1173 53.5685H72.1024C71.5641 53.5685 71.0478 53.3547 70.6671 52.974C70.2865 52.5933 70.0726 52.0771 70.0726 51.5387V44.4346H61.9536V51.5387C61.9536 52.0771 61.7397 52.5933 61.3591 52.974C60.9784 53.3547 60.4622 53.5685 59.9238 53.5685L60.5094 55.3251C60.9299 56.5868 61.7368 57.6841 62.8156 58.4618C63.8945 59.2394 65.1907 59.6578 66.5206 59.6578Z" fill="#FDC8A2"></path><path d="M44.7012 79.9554H51.8053L55.8231 66.295L48.7649 64.8618L44.7012 79.9554Z" fill="#FDC8A2"></path><path d="M76.1615 53.5684H73.1169L72.5313 55.325C72.1108 56.5866 71.3039 57.684 70.2251 58.4616C69.1462 59.2392 67.85 59.6577 66.5202 59.6576C65.1903 59.6577 63.8941 59.2392 62.8152 58.4616C61.7364 57.684 60.9295 56.5866 60.509 55.325L59.9234 53.5684H55.6933C54.5773 53.5684 53.4924 53.9363 52.6067 54.6151C51.7209 55.2939 51.0836 56.2458 50.7934 57.3234L48.7637 64.8616L55.8219 66.2951L56.8788 62.7023V79.9553H75.1466V66.7618H81.2359V58.6428C81.2359 57.2969 80.7013 56.0063 79.7497 55.0546C78.798 54.103 77.5073 53.5684 76.1615 53.5684Z" fill="#EC8C8C"></path><path d="M70.0722 44.4346V49.5737C68.8102 50.1987 67.4209 50.5239 66.0126 50.5239C64.6044 50.5239 63.2151 50.1987 61.9531 49.5737V44.4346H70.0722Z" fill="#FDBF92"></path><path d="M75.1465 79.9554H77.1762C78.2529 79.9554 79.2855 79.5277 80.0468 78.7664C80.8081 78.0051 81.2358 76.9725 81.2358 75.8959V66.762H75.1465V79.9554Z" fill="#FDC8A2"></path><path d="M75.1471 62.7024V60.6726H56.8792V62.7024C55.5334 64.0482 54.7773 65.8735 54.7773 67.7768C54.7773 69.68 55.5334 71.5054 56.8792 72.8512V79.9553H75.1471V72.8512C76.4929 71.5054 77.2489 69.68 77.2489 67.7768C77.2489 65.8735 76.4929 64.0482 75.1471 62.7024Z" fill="#EC8C8C"></path><path d="M66.5199 64.7321C63.7999 64.7321 62.1527 63.6988 61.25 62.8321L62.6559 61.368C63.5649 62.2409 64.9012 62.7023 66.5199 62.7023C68.8263 62.7023 70.0604 61.798 70.6896 61.0396L72.2519 62.3354C71.3449 63.4288 69.6144 64.7321 66.5199 64.7321Z" fill="#E07F7F"></path><path d="M56.8789 75.8959H64.998L72.5674 78.9237C74.2714 79.6053 76.0898 79.9555 77.925 79.9555C78.8031 79.9555 79.6453 79.6066 80.2663 78.9857C80.8872 78.3647 81.236 77.5226 81.236 76.6444C81.236 75.8661 80.9617 75.1127 80.4614 74.5165C79.9611 73.9203 79.2668 73.5193 78.5003 73.3841L63.9831 70.8215H59.9235L56.8789 71.8364V75.8959Z" fill="#FDC8A2"></path><path d="M55.865 34.2856H56.8798V40.3749H55.865C55.0575 40.3749 54.2831 40.0542 53.7121 39.4832C53.1411 38.9122 52.8203 38.1378 52.8203 37.3303C52.8203 36.5228 53.1411 35.7484 53.7121 35.1774C54.2831 34.6064 55.0575 34.2856 55.865 34.2856Z" fill="#FDB683"></path><path d="M66.0128 48.4941C63.5904 48.4941 61.2671 47.5318 59.5542 45.8188C57.8412 44.1059 56.8789 41.7826 56.8789 39.3602V32.256C56.8789 30.1027 57.7343 28.0376 59.2569 26.515C60.7795 24.9924 62.8446 24.137 64.998 24.137H67.0277C69.181 24.137 71.2461 24.9924 72.7687 26.515C74.2914 28.0376 75.1468 30.1027 75.1468 32.256V39.3602C75.1468 41.7826 74.1844 44.1059 72.4715 45.8188C70.7586 47.5318 68.4353 48.4941 66.0128 48.4941Z" fill="#FDC8A2"></path><path d="M60.4305 38.3452C60.1294 38.3452 59.8351 38.2559 59.5848 38.0886C59.3344 37.9214 59.1393 37.6836 59.0241 37.4054C58.9089 37.1273 58.8787 36.8212 58.9375 36.5259C58.9962 36.2306 59.1412 35.9593 59.3541 35.7464C59.567 35.5335 59.8382 35.3885 60.1335 35.3298C60.4288 35.271 60.7349 35.3012 61.0131 35.4164C61.2913 35.5316 61.529 35.7268 61.6963 35.9771C61.8636 36.2274 61.9528 36.5218 61.9528 36.8229C61.9524 37.2265 61.7919 37.6134 61.5065 37.8988C61.2211 38.1842 60.8341 38.3447 60.4305 38.3452Z" fill="#91563A"></path><path d="M69.5653 38.3452C69.2642 38.3452 68.9699 38.2559 68.7195 38.0886C68.4692 37.9214 68.2741 37.6836 68.1588 37.4054C68.0436 37.1273 68.0135 36.8212 68.0722 36.5259C68.131 36.2306 68.2759 35.9593 68.4888 35.7464C68.7017 35.5335 68.973 35.3885 69.2683 35.3298C69.5636 35.271 69.8697 35.3012 70.1479 35.4164C70.426 35.5316 70.6638 35.7268 70.8311 35.9771C70.9983 36.2274 71.0876 36.5218 71.0876 36.8229C71.0872 37.2265 70.9266 37.6134 70.6413 37.8988C70.3559 38.1842 69.9689 38.3447 69.5653 38.3452Z" fill="#91563A"></path><path d="M54.8496 32.256V35.3006C68.0431 34.2857 72.1026 28.1965 72.1026 28.1965L75.1472 34.2857L77.177 35.3006V32.256C77.177 29.2952 76.0008 26.4557 73.9072 24.3621C71.8136 22.2685 68.9741 21.0923 66.0133 21.0923C63.0525 21.0923 60.213 22.2685 58.1194 24.3621C56.0258 26.4557 54.8496 29.2952 54.8496 32.256Z" fill="#91563A"></path><path d="M75.1465 34.2856H76.1614C76.9689 34.2856 77.7433 34.6064 78.3143 35.1774C78.8852 35.7484 79.206 36.5228 79.206 37.3303C79.206 38.1378 78.8852 38.9122 78.3143 39.4832C77.7433 40.0542 76.9689 40.3749 76.1614 40.3749H75.1465V34.2856Z" fill="#FDB683"></path><path d="M64.9978 44.4345C64.1906 44.4336 63.4167 44.1126 62.8459 43.5418C62.2751 42.971 61.954 42.1971 61.9531 41.3899H63.9829C63.9829 41.6591 64.0898 41.9172 64.2801 42.1075C64.4705 42.2978 64.7286 42.4048 64.9978 42.4048C65.2669 42.4048 65.5251 42.2978 65.7154 42.1075C65.9057 41.9172 66.0126 41.6591 66.0126 41.3899H68.0424C68.0415 42.1971 67.7204 42.971 67.1497 43.5418C66.5789 44.1126 65.805 44.4336 64.9978 44.4345Z" fill="#FCB079"></path><path d="M54.85 47.4792H26.4333C24.7518 47.4792 23.3887 48.8424 23.3887 50.5239V68.7917C23.3887 70.4733 24.7518 71.8364 26.4333 71.8364H54.85C56.5315 71.8364 57.8946 70.4733 57.8946 68.7917V50.5239C57.8946 48.8424 56.5315 47.4792 54.85 47.4792Z" fill="#D5D5D3"></path><path d="M36.582 75.8958H48.7606V79.9553H36.582V75.8958Z" fill="#D5D5D3"></path><path d="M42.6703 79.9554H32.5215L36.581 63.7173H44.7001L42.6703 79.9554Z" fill="#DFDFDD"></path><path d="M26.4316 50.5239H30.4912V52.5537H26.4316V50.5239Z" fill="#C6C6C4"></path><path d="M32.5215 50.5239H36.581V52.5537H32.5215V50.5239Z" fill="#C6C6C4"></path><path d="M38.6094 50.5239H42.6689V52.5537H38.6094V50.5239Z" fill="#C6C6C4"></path><path d="M44.6992 50.5239H48.7587V52.5537H44.6992V50.5239Z" fill="#C6C6C4"></path><path d="M50.7891 50.5239H54.8486V52.5537H50.7891V50.5239Z" fill="#C6C6C4"></path><path d="M22.373 79.9553H83.2659V81.9851H22.373V79.9553Z" fill="#DFDFDD"></path><path d="M52.8203 75.8958H66.0138V79.9553H52.8203V75.8958Z" fill="#DFDFDD"></path></g><defs><clipPath id="clip0_2456_2"><rect width="62.9841" height="62" fill="white" transform="translate(21 21)"></rect></clipPath></defs>',3),af=[of];function lf(t,e){return _(),P("svg",sf,af)}const cf=$e(rf,[["render",lf]]),uf={},hf={width:"104",height:"104",viewBox:"0 0 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},df=Jt('<circle cx="52" cy="52" r="52" fill="#FDF4FB"></circle><path d="M68.0372 54.0945L67.6969 57.1561L67.4675 59.2186H38.5925L38.363 57.1561L38.0227 54.0945C37.7202 51.3698 38.1288 48.6132 39.2086 46.0933C40.1598 43.8726 40.5919 41.4641 40.4719 39.0512L40.2927 35.4831C40.2066 33.7569 40.4722 32.0313 41.0734 30.4109C41.6746 28.7906 42.5989 27.3093 43.7901 26.0572C44.9814 24.805 46.4147 23.808 48.0031 23.1268C49.5914 22.4455 51.3017 22.0942 53.03 22.0942C54.7583 22.0942 56.4685 22.4455 58.0569 23.1268C59.6452 23.808 61.0786 24.805 62.2698 26.0572C63.461 27.3093 64.3853 28.7906 64.9865 30.4109C65.5877 32.0313 65.8533 33.7569 65.7672 35.4831L65.588 39.0512C65.468 41.4641 65.9001 43.8726 66.8513 46.0933C67.9315 48.6131 68.3401 51.3698 68.0372 54.0945Z" fill="#8F4D2E"></path><path d="M68.0382 54.0947L67.6979 57.1562H56.1247V45.8125L58.1872 41.6875V33.4375C58.1859 30.9515 57.3687 28.5345 55.8611 26.5578C54.3536 24.581 52.2389 23.1536 49.8418 22.4946C51.7786 21.9975 53.805 21.9622 55.7579 22.3916C57.7108 22.8211 59.5355 23.7032 61.0851 24.9669C62.6347 26.2306 63.8658 27.8407 64.6792 29.6673C65.4926 31.4939 65.8656 33.4861 65.7682 35.4832L65.589 39.0514C65.469 41.4643 65.9011 43.8728 66.8523 46.0935C67.9325 48.6132 68.3411 51.37 68.0382 54.0947Z" fill="#82462A"></path><path d="M58.6 55.0938C58.4104 55.0939 58.2226 55.0566 58.0474 54.9841C57.8722 54.9115 57.713 54.8052 57.5789 54.6711C57.4448 54.537 57.3385 54.3778 57.2659 54.2026C57.1934 54.0274 57.1561 53.8396 57.1562 53.65V46.8438H48.9062V53.65C48.9064 53.8396 48.8691 54.0274 48.7966 54.2026C48.724 54.3778 48.6177 54.537 48.4836 54.6711C48.3495 54.8052 48.1903 54.9115 48.0151 54.9841C47.8399 55.0566 47.6521 55.0939 47.4625 55.0938H45.8125V61.2812H60.25V55.0938H58.6Z" fill="#FEC9A3"></path><path d="M53.6531 52C54.93 51.986 56.1646 51.5404 57.1562 50.7358V46.8438H48.9062V50.7354C49.8978 51.5402 51.1324 51.9859 52.4094 52H53.6531Z" fill="#FEB784"></path><path d="M62.3125 35.5V40.6562C62.3125 43.1178 61.3347 45.4785 59.5941 47.2191C57.8535 48.9597 55.4928 49.9375 53.0312 49.9375C50.5697 49.9375 48.209 48.9597 46.4684 47.2191C44.7278 45.4785 43.75 43.1178 43.75 40.6562V35.5C45.7777 34.1488 47.4174 32.2914 48.5066 30.1117L48.9062 29.3125L49.4915 29.8011C52.0538 31.9362 55.0075 33.5518 58.1875 34.5577C59.5343 34.9846 60.914 35.2997 62.3125 35.5Z" fill="#FEC9A3"></path><path d="M62.3128 35.4999V40.6562C62.3123 42.8104 61.5629 44.8975 60.1928 46.5599C58.8227 48.2223 56.9172 49.3566 54.8027 49.7686C55.8764 48.7146 56.7289 47.457 57.3101 46.0693C57.8914 44.6817 58.1898 43.1919 58.1878 41.6874V34.5576C59.5346 34.9845 60.9143 35.2997 62.3128 35.4999Z" fill="#FEC093"></path><path d="M48.3906 39.625C48.0847 39.625 47.7856 39.5343 47.5312 39.3643C47.2768 39.1943 47.0786 38.9527 46.9615 38.6701C46.8444 38.3874 46.8138 38.0764 46.8735 37.7763C46.9332 37.4763 47.0805 37.2007 47.2968 36.9843C47.5132 36.768 47.7888 36.6207 48.0888 36.561C48.3889 36.5013 48.6999 36.5319 48.9826 36.649C49.2652 36.7661 49.5068 36.9643 49.6768 37.2187C49.8468 37.4731 49.9375 37.7722 49.9375 38.0781C49.9371 38.4882 49.7739 38.8814 49.4839 39.1714C49.1939 39.4614 48.8007 39.6246 48.3906 39.625Z" fill="#7A432A"></path><path d="M57.6719 39.625C57.3659 39.625 57.0669 39.5343 56.8125 39.3643C56.5581 39.1943 56.3598 38.9527 56.2427 38.6701C56.1257 38.3874 56.095 38.0764 56.1547 37.7763C56.2144 37.4763 56.3617 37.2007 56.5781 36.9843C56.7944 36.768 57.07 36.6207 57.3701 36.561C57.6702 36.5013 57.9812 36.5319 58.2638 36.649C58.5465 36.7661 58.7881 36.9643 58.9581 37.2187C59.128 37.4731 59.2187 37.7722 59.2187 38.0781C59.2183 38.4882 59.0552 38.8814 58.7652 39.1714C58.4752 39.4614 58.082 39.6246 57.6719 39.625Z" fill="#7A432A"></path><path d="M53.0312 44.7812C52.211 44.7803 51.4246 44.4541 50.8447 43.8741C50.2647 43.2941 49.9384 42.5077 49.9375 41.6875H52C52 41.961 52.1086 42.2233 52.302 42.4167C52.4954 42.6101 52.7577 42.7188 53.0312 42.7188C53.3048 42.7188 53.5671 42.6101 53.7605 42.4167C53.9539 42.2233 54.0625 41.961 54.0625 41.6875H56.125C56.1241 42.5077 55.7978 43.2941 55.2178 43.8741C54.6379 44.4541 53.8515 44.7803 53.0312 44.7812Z" fill="#F7A468"></path><path d="M47.875 59.2188H58.1875V66.4375H47.875V59.2188Z" fill="#E0E0DE"></path><path d="M74.0383 81.8637C73.3067 81.9856 72.5556 81.8437 71.9189 81.4633C71.2822 81.083 70.8012 80.4889 70.5617 79.787L63.7503 67.0086C64.1839 68.3051 64.2794 69.691 64.0277 71.0347C63.7759 72.3785 63.1853 73.6358 62.3117 74.6875V82.9375H43.7492V74.6875C42.8629 73.6237 42.2662 72.3491 42.0169 70.9872C41.7676 69.6252 41.8741 68.2219 42.3261 66.9132L35.4038 79.787C35.1381 80.5684 34.5745 81.2131 33.8357 81.5808C33.0969 81.9485 32.2427 82.0095 31.4591 81.7504C30.6756 81.4913 30.0261 80.9332 29.6522 80.1975C29.2782 79.4618 29.21 78.6082 29.4625 77.8225L37.0345 58.9751C37.4946 57.8289 38.2873 56.8466 39.3106 56.1548C40.3338 55.4631 41.5408 55.0935 42.7759 55.0938H46.8429L53.0304 66.4375L59.2179 55.0938H63.2695C64.5081 55.0946 65.718 55.4669 66.7429 56.1625C67.7677 56.858 68.5605 57.845 69.0187 58.9957L76.5043 77.8225C76.641 78.2502 76.6841 78.7024 76.6307 79.1482C76.5773 79.5941 76.4286 80.0232 76.1947 80.4066C75.9608 80.7899 75.6471 81.1184 75.2751 81.3698C74.903 81.6212 74.4812 81.7897 74.0383 81.8637Z" fill="#EC8C8C"></path><path d="M28.5688 78.1693L29.3126 68.5H35.5001V78.4355C35.5001 79.356 35.1344 80.2388 34.4835 80.8897C33.8326 81.5406 32.9498 81.9062 32.0293 81.9062C31.5511 81.9063 31.078 81.8074 30.6398 81.616C30.2016 81.4245 29.8077 81.1446 29.4827 80.7937C29.1578 80.4428 28.9089 80.0286 28.7516 79.5769C28.5944 79.1253 28.5321 78.6461 28.5688 78.1693Z" fill="#F59898"></path><path d="M31.7386 53.4565C31.4472 53.5293 31.1759 53.6667 30.9446 53.8584C30.7134 54.0502 30.5282 54.2914 30.4026 54.5644C30.2771 54.8373 30.2145 55.1349 30.2194 55.4353C30.2243 55.7356 30.2965 56.0311 30.4309 56.2997L31.375 58.1873H27.6794C26.7188 58.1873 25.7714 57.9637 24.9123 57.5341L23.8846 57.0203C23.696 56.926 23.4863 56.8815 23.2756 56.8909C23.0649 56.9004 22.8601 56.9636 22.6807 57.0745C22.5012 57.1854 22.3531 57.3403 22.2504 57.5245C22.1477 57.7088 22.0938 57.9162 22.0938 58.1271V61.0376C22.0938 61.4206 22.2004 61.7961 22.4018 62.1219C22.6032 62.4477 22.8913 62.711 23.2339 62.8823L24.9123 63.7216C25.7714 64.1512 26.7188 64.3748 27.6794 64.3748H35.5V58.1873L34.0878 54.657C33.9076 54.2067 33.5703 53.8369 33.1383 53.6162C32.7064 53.3955 32.2092 53.3387 31.7386 53.4565Z" fill="#FEC9A3"></path><path d="M29.3125 64.375H35.5V68.5H29.3125V64.375Z" fill="#E0E0DE"></path><path d="M74.0399 81.8635C73.3083 81.9854 72.5573 81.8435 71.9205 81.4632C71.2838 81.0828 70.8028 80.4888 70.5633 79.7869L63.7519 67.0084C64.1856 68.305 64.2811 69.6908 64.0293 71.0346C63.7776 72.3784 63.1869 73.6357 62.3133 74.6873V82.9373H44.0898C52.6015 77.3789 59.7829 70.3251 65.8105 55.6401C67.2761 56.2986 68.4275 57.5022 69.0203 58.9956L76.5059 77.8223C76.6426 78.2501 76.6858 78.7022 76.6323 79.1481C76.5789 79.5939 76.4302 80.0231 76.1963 80.4064C75.9624 80.7897 75.6488 81.1182 75.2767 81.3697C74.9046 81.6211 74.4828 81.7895 74.0399 81.8635Z" fill="#E07F7F"></path><path d="M67.4688 78.8125L57.1562 76.75V62.3125L67.4688 64.375V78.8125Z" fill="#A36548"></path><path d="M71.5938 78.8125L81.9062 76.75V62.3125L71.5938 64.375V78.8125Z" fill="#8F4D2E"></path><path d="M67.4688 64.375H71.5938V78.8125H67.4688V64.375Z" fill="#95573A"></path><path d="M69.5312 64.375C69.5312 63.5105 69.2246 62.674 68.6658 62.0144C68.107 61.3548 67.3324 60.9147 66.4797 60.7726L57.1562 59.2188V62.3125L67.4688 64.375H69.5312C69.5313 63.5105 69.8379 62.674 70.3967 62.0144C70.9555 61.3548 71.7301 60.9147 72.5828 60.7726L81.9062 59.2188V62.3125L71.5938 64.375H69.5312Z" fill="#D4BD81"></path><path d="M80.0133 78.7144L75.8883 79.402C75.7405 79.4266 75.5892 79.4187 75.4448 79.3789C75.3004 79.3392 75.1665 79.2684 75.0522 79.1716C74.9379 79.0748 74.8461 78.9543 74.7831 78.8184C74.7201 78.6825 74.6875 78.5345 74.6875 78.3848V74.5517C74.6875 74.234 74.8002 73.9266 75.0055 73.6841C75.2109 73.4416 75.4956 73.2799 75.809 73.2276L79.3116 72.6438C79.504 72.6117 79.701 72.6219 79.889 72.6737C80.077 72.7254 80.2514 72.8175 80.4002 72.9436C80.549 73.0696 80.6686 73.2265 80.7506 73.4035C80.8326 73.5804 80.875 73.7731 80.875 73.968V77.6972C80.875 77.9413 80.7884 78.1775 80.6306 78.3637C80.4728 78.55 80.2541 78.6743 80.0133 78.7144Z" fill="#FEC9A3"></path>',21),ff=[df];function pf(t,e){return _(),P("svg",hf,ff)}const gf=$e(uf,[["render",pf]]),mf={},_f={width:"104",height:"104",viewBox:"0 0 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yf=Jt('<circle cx="52" cy="52" r="52" fill="#F9F9F9"></circle><path d="M26 32.0938V78H38.1875L52 32.0938H26Z" fill="#E07F7F"></path><path d="M78 32.0938H52L65.8125 78H78V32.0938Z" fill="#EC8C8C"></path><path d="M33.6172 38.1875H30.5703V41.2344H33.6172V38.1875Z" fill="white"></path><path d="M33.6172 44.2812H30.5703V47.3281H33.6172V44.2812Z" fill="white"></path><path d="M33.6172 50.375H30.5703V53.4219H33.6172V50.375Z" fill="white"></path><path d="M33.6172 56.4688H30.5703V59.5156H33.6172V56.4688Z" fill="white"></path><path d="M73.4297 38.1875H70.3828V41.2344H73.4297V38.1875Z" fill="#BAE9FF"></path><path d="M73.4297 44.2812H70.3828V47.3281H73.4297V44.2812Z" fill="#BAE9FF"></path><path d="M73.4297 50.375H70.3828V53.4219H73.4297V50.375Z" fill="#BAE9FF"></path><path d="M73.4297 56.4688H70.3828V59.5156H73.4297V56.4688Z" fill="#BAE9FF"></path><path d="M33.6172 62.5625H30.5703V65.6094H33.6172V62.5625Z" fill="white"></path><path d="M73.4297 62.5625H70.3828V65.6094H73.4297V62.5625Z" fill="#BAE9FF"></path><path d="M65.8125 26H52L45.9062 52L59.7188 78H65.8125V26Z" fill="#E07F7F"></path><path d="M38.1875 26V78H44.2812L52 71.9062V26H38.1875Z" fill="#EC8C8C"></path><path d="M59.7188 32.0938H52L48.9531 36.6133L52 41.1328H59.7188V32.0938Z" fill="#BAE9FF"></path><path d="M52 32.0938H44.2812V41.1328H52V32.0938Z" fill="white"></path><path d="M59.7188 44.2812H52L48.9531 48.8008L52 53.3203H59.7188V44.2812Z" fill="#BAE9FF"></path><path d="M52 44.2812H44.2812V53.3203H52V44.2812Z" fill="white"></path><path d="M59.7188 63.9844V56.3672H52L48.9531 67.0312L59.7188 63.9844Z" fill="#BAE9FF"></path><path d="M52 56.3672H44.2812V63.9844L52 67.0312V56.3672Z" fill="white"></path><path d="M52 63.9844L47.9375 70.9922L52 78H59.7188V63.9844H52Z" fill="#3D4566"></path><path d="M52 63.9844H44.2812V78H52V63.9844Z" fill="#4D5E80"></path>',23),vf=[yf];function wf(t,e){return _(),P("svg",_f,vf)}const Ef=$e(mf,[["render",wf]]),Tf={},If={width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Cf=d("circle",{cx:"12.5",cy:"12.5",r:"12",stroke:"#C6CED3"},null,-1),Af=[Cf];function Rf(t,e){return _(),P("svg",If,Af)}const Pf=$e(Tf,[["render",Rf]]),Sf={},bf={width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},kf=d("circle",{cx:"12.5",cy:"12.5",r:"11.5",fill:"white",stroke:"#F04973","stroke-width":"2"},null,-1),Df=d("circle",{cx:"12.5",cy:"12.5",r:"5.5",fill:"#F04973"},null,-1),Vf=[kf,Df];function Of(t,e){return _(),P("svg",bf,Vf)}const Nf=$e(Sf,[["render",Of]]),xf={},$f={width:"20",height:"13",viewBox:"0 0 20 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Lf=d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.9999 0C15.4371 0 19.6942 5.74021 19.8729 5.98462C20.0423 6.21626 20.0423 6.53099 19.8729 6.76283C19.6942 7.00701 15.4371 12.7473 9.9999 12.7473C4.56274 12.7473 0.305391 7.00705 0.126914 6.76263C-0.0423048 6.53076 -0.0423048 6.21626 0.126914 5.98439C0.305391 5.74021 4.56274 0 9.9999 0ZM1.49922 6.37318C2.52606 7.61869 5.99486 11.4286 9.9999 11.4286C14.0135 11.4286 17.4751 7.62064 18.5006 6.37407C17.4733 5.1279 14.0048 1.31867 9.9999 1.31867C5.98626 1.31867 2.52473 5.12657 1.49922 6.37318ZM6.04395 6.37354C6.04395 4.19221 7.81867 2.41748 10 2.41748C12.1813 2.41748 13.9561 4.19221 13.9561 6.37354C13.9561 8.55488 12.1813 10.3296 10 10.3296C7.81867 10.3296 6.04395 8.55488 6.04395 6.37354ZM7.36266 6.37354C7.36266 7.8278 8.5457 9.01089 10 9.01089C11.4543 9.01089 12.6373 7.8278 12.6373 6.37354C12.6373 4.91928 11.4543 3.73619 10 3.73619C8.54574 3.73619 7.36266 4.91928 7.36266 6.37354Z",fill:"#BEC3CC"},null,-1),Mf=[Lf];function Uf(t,e){return _(),P("svg",$f,Mf)}const gn=$e(xf,[["render",Uf]]),Ff={},Bf={width:"20",height:"15",viewBox:"0 0 20 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Hf=d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.47881 12.9725C2.21437 13.2152 2.19681 13.6264 2.4396 13.8909C2.68238 14.1553 3.09356 14.1729 3.358 13.9301L5.13918 12.2948C6.56497 13.1315 8.21916 13.7472 9.9999 13.7472C15.4371 13.7472 19.6942 8.00696 19.8729 7.76278C20.0423 7.53094 20.0423 7.21621 19.8729 6.98457C19.7611 6.83162 18.0521 4.52644 15.4562 2.82262L16.8044 1.58486C17.0688 1.34208 17.0864 0.9309 16.8436 0.666463C16.6008 0.402025 16.1896 0.38447 15.9252 0.627252L14.2845 2.13361C12.9961 1.4639 11.5457 0.999952 9.9999 0.999952C4.56274 0.999952 0.305391 6.74016 0.126914 6.98434C-0.0423048 7.21621 -0.0423048 7.53071 0.126914 7.76258C0.230843 7.90491 1.71785 9.91077 4.01552 11.5616L2.47881 12.9725ZM6.16563 11.3524C7.33101 11.9856 8.63428 12.4285 9.9999 12.4285C14.0135 12.4285 17.4751 8.62059 18.5006 7.37403C17.8862 6.62871 16.3985 4.96657 14.4452 3.75089L13.1307 4.95765C13.648 5.62638 13.9561 6.46464 13.9561 7.37349C13.9561 9.55483 12.1813 11.3296 10 11.3296C8.97014 11.3296 8.03091 10.934 7.32629 10.2868L6.16563 11.3524ZM6.52309 9.25938L5.01644 10.6426C3.32914 9.47598 2.05565 8.04805 1.49922 7.37313C2.52473 6.12652 5.98626 2.31863 9.9999 2.31863C11.1371 2.31863 12.2311 2.62578 13.2382 3.09418L12.175 4.07037C11.5505 3.65781 10.8028 3.41743 10 3.41743C7.81867 3.41743 6.04395 5.19216 6.04395 7.37349C6.04395 8.05587 6.21762 8.69847 6.52309 9.25938ZM8.30252 9.39048C8.76155 9.77742 9.35402 10.0108 10 10.0108C11.4543 10.0108 12.6373 8.82776 12.6373 7.37349C12.6373 6.80813 12.4585 6.28376 12.1545 5.85394L8.30252 9.39048ZM11.1579 5.00415L7.54034 8.32544C7.42561 8.03002 7.36266 7.70897 7.36266 7.37349C7.36266 5.91923 8.54574 4.73615 10 4.73615C10.4151 4.73615 10.8082 4.83255 11.1579 5.00415Z",fill:"#BEC3CC"},null,-1),jf=[Hf];function qf(t,e){return _(),P("svg",Bf,jf)}const mn=$e(Ff,[["render",qf]]),zf={},Wf={width:"22",height:"24",viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Gf=d("circle",{cx:"11",cy:"12",r:"11",fill:"#EF4848","fill-opacity":"0.15"},null,-1),Kf=d("path",{d:"M9.61203 6.5H12.402L11.937 13.355H10.077L9.61203 6.5ZM11.007 17.12C10.597 17.12 10.252 16.99 9.97203 16.73C9.70203 16.46 9.56703 16.135 9.56703 15.755C9.56703 15.375 9.70203 15.06 9.97203 14.81C10.242 14.55 10.587 14.42 11.007 14.42C11.427 14.42 11.772 14.55 12.042 14.81C12.312 15.06 12.447 15.375 12.447 15.755C12.447 16.135 12.307 16.46 12.027 16.73C11.757 16.99 11.417 17.12 11.007 17.12Z",fill:"#EF4848"},null,-1),Qf=[Gf,Kf];function Zf(t,e){return _(),P("svg",Wf,Qf)}const Y=$e(zf,[["render",Zf]]),Xf={},Jf={width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Yf=d("rect",{x:"0.5",y:"0.5",width:"16",height:"16",rx:"2.5",fill:"white",stroke:"#C6CED3"},null,-1),ep=[Yf];function tp(t,e){return _(),P("svg",Jf,ep)}const kc=$e(Xf,[["render",tp]]),np={},rp={width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sp=d("rect",{width:"17",height:"17",rx:"3",fill:"#F04973"},null,-1),ip=d("path",{d:"M7.25754 12.3573C7.15625 12.4591 7.01813 12.516 6.87458 12.516C6.73104 12.516 6.59292 12.4591 6.49163 12.3573L3.43338 9.29846C3.11596 8.98104 3.11596 8.46646 3.43338 8.14959L3.81633 7.76663C4.13375 7.44921 4.64779 7.44921 4.96521 7.76663L6.87458 9.676L12.034 4.51663C12.3514 4.19921 12.866 4.19921 13.1828 4.51663L13.5658 4.89959C13.8832 5.217 13.8832 5.73159 13.5658 6.04846L7.25754 12.3573Z",fill:"white"},null,-1),op=[sp,ip];function ap(t,e){return _(),P("svg",rp,op)}const Dc=$e(np,[["render",ap]]),lp={},cp={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},up=Jt('<g clip-path="url(#clip0_132_283)"><path d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z" fill="#3B5998"></path><path d="M20.023 16.6262H17.168V27.0856H12.8424V16.6262H10.7852V12.9504H12.8424V10.5717C12.8424 8.87066 13.6504 6.20703 17.2065 6.20703L20.4106 6.22044V9.78848H18.0858C17.7045 9.78848 17.1683 9.979 17.1683 10.7904V12.9538H20.4009L20.023 16.6262Z" fill="white"></path></g><defs><clipPath id="clip0_132_283"><rect width="32" height="32" fill="white"></rect></clipPath></defs>',2),hp=[up];function dp(t,e){return _(),P("svg",cp,hp)}const fp=$e(lp,[["render",dp]]),pp={},gp={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mp=Jt('<g clip-path="url(#clip0_132_287)"><path d="M7.09188 19.3377L5.978 23.496L1.90681 23.5821C0.690125 21.3254 0 18.7435 0 15.9997C0 13.3465 0.64525 10.8445 1.789 8.64148H1.78988L5.41438 9.30598L7.00213 12.9087C6.66981 13.8775 6.48869 14.9175 6.48869 15.9997C6.48881 17.1742 6.70156 18.2995 7.09188 19.3377Z" fill="#FBBB00"></path><path d="M31.7203 13.011C31.904 13.9789 31.9998 14.9785 31.9998 16C31.9998 17.1455 31.8794 18.2629 31.6499 19.3407C30.8711 23.0084 28.8359 26.211 26.0166 28.4774L26.0157 28.4765L21.4504 28.2436L20.8043 24.2102C22.6751 23.113 24.1371 21.3961 24.9072 19.3407H16.3516V13.011H25.032H31.7203Z" fill="#518EF8"></path><path d="M26.0152 28.4764L26.0161 28.4773C23.2742 30.6812 19.7911 31.9999 15.9994 31.9999C9.90625 31.9999 4.60869 28.5942 1.90625 23.5823L7.09131 19.338C8.4425 22.9441 11.9212 25.5111 15.9994 25.5111C17.7524 25.5111 19.3946 25.0373 20.8038 24.21L26.0152 28.4764Z" fill="#28B446"></path><path d="M26.2128 3.6835L21.0295 7.927C19.5711 7.01538 17.8471 6.48875 16.0001 6.48875C11.8295 6.48875 8.28575 9.17356 7.00225 12.909L1.78994 8.64175H1.78906C4.45194 3.50769 9.81631 0 16.0001 0C19.8822 0 23.4418 1.38287 26.2128 3.6835Z" fill="#F14336"></path></g><defs><clipPath id="clip0_132_287"><rect width="32" height="32" fill="white"></rect></clipPath></defs>',2),_p=[mp];function yp(t,e){return _(),P("svg",gp,_p)}const vp=$e(pp,[["render",yp]]),wp={},Ep={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Tp=Jt('<g clip-path="url(#clip0_132_292)"><path d="M16 31.999C24.8366 31.999 32 24.8356 32 15.999C32 7.16247 24.8366 -0.000976562 16 -0.000976562C7.16344 -0.000976562 0 7.16247 0 15.999C0 24.8356 7.16344 31.999 16 31.999Z" fill="#007AB9"></path><path d="M25.5603 17.287V23.8835H21.7359V17.7291C21.7359 16.1838 21.1837 15.1285 19.799 15.1285C18.7423 15.1285 18.1145 15.839 17.8373 16.5269C17.7366 16.7728 17.7106 17.1142 17.7106 17.459V23.8832H13.8859C13.8859 23.8832 13.9373 13.4597 13.8859 12.3808H17.7109V14.0108C17.7032 14.0236 17.6924 14.0362 17.6856 14.0484H17.7109V14.0108C18.2192 13.2287 19.1256 12.1107 21.1578 12.1107C23.6739 12.1107 25.5603 13.7546 25.5603 17.287ZM9.88492 6.83618C8.57663 6.83618 7.7207 7.69496 7.7207 8.82328C7.7207 9.92763 8.55182 10.8112 9.83472 10.8112H9.85953C11.1935 10.8112 12.0229 9.92763 12.0229 8.82328C11.9975 7.69496 11.1935 6.83618 9.88492 6.83618ZM7.94802 23.8835H11.7713V12.3808H7.94802V23.8835Z" fill="#F1F2F2"></path></g><defs><clipPath id="clip0_132_292"><rect width="32" height="32" fill="white"></rect></clipPath></defs>',2),Ip=[Tp];function Cp(t,e){return _(),P("svg",Ep,Ip)}const Ap=$e(wp,[["render",Cp]]);function ol(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ol(Object(n),!0).forEach(function(r){Rp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function al(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(t).reduce((n,r)=>(e.includes(r)||(n[r]=g(t[r])),n),{})}function Vs(t){return typeof t=="function"}function Pp(t){return Xd(t)||Jd(t)}function Vc(t,e,n){let r=t;const s=e.split(".");for(let i=0;i<s.length;i++){if(!r[s[i]])return n;r=r[s[i]]}return r}function xi(t,e,n){return z(()=>t.some(r=>Vc(e,r,{[n]:!1})[n]))}function ll(t,e,n){return z(()=>t.reduce((r,s)=>{const i=Vc(e,s,{[n]:!1})[n]||[];return r.concat(i)},[]))}function Oc(t,e,n,r){return t.call(r,g(e),g(n),r)}function Nc(t){return t.$valid!==void 0?!t.$valid:!t}function Sp(t,e,n,r,s,i,o){let{$lazy:a,$rewardEarly:l}=s,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],u=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0;const m=F(!!r.value),p=F(0);n.value=!1;const v=fn([e,r].concat(c,f),()=>{if(a&&!r.value||l&&!h.value&&!n.value)return;let y;try{y=Oc(t,e,u,o)}catch(C){y=Promise.reject(C)}p.value++,n.value=!!p.value,m.value=!1,Promise.resolve(y).then(C=>{p.value--,n.value=!!p.value,i.value=C,m.value=Nc(C)}).catch(C=>{p.value--,n.value=!!p.value,i.value=C,m.value=!0})},{immediate:!0,deep:typeof e=="object"});return{$invalid:m,$unwatch:v}}function bp(t,e,n,r,s,i,o,a){let{$lazy:l,$rewardEarly:c}=r;const u=()=>({}),h=z(()=>{if(l&&!n.value||c&&!a.value)return!1;let f=!0;try{const m=Oc(t,e,o,i);s.value=m,f=Nc(m)}catch(m){s.value=m}return f});return{$unwatch:u,$invalid:h}}function kp(t,e,n,r,s,i,o,a,l,c,u){const h=F(!1),f=t.$params||{},m=F(null);let p,v;t.$async?{$invalid:p,$unwatch:v}=Sp(t.$validator,e,h,n,r,m,s,t.$watchTargets,l,c,u):{$invalid:p,$unwatch:v}=bp(t.$validator,e,n,r,m,s,l,c);const y=t.$message;return{$message:Vs(y)?z(()=>y(al({$pending:h,$invalid:p,$params:al(f),$model:e,$response:m,$validator:i,$propertyPath:a,$property:o}))):y||"",$params:f,$pending:h,$invalid:p,$response:m,$unwatch:v}}function Dp(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=g(t),n=Object.keys(e),r={},s={},i={};let o=null;return n.forEach(a=>{const l=e[a];switch(!0){case Vs(l.$validator):r[a]=l;break;case Vs(l):r[a]={$validator:l};break;case a==="$validationGroups":o=l;break;case a.startsWith("$"):i[a]=l;break;default:s[a]=l}}),{rules:r,nestedValidators:s,config:i,validationGroups:o}}const Vp="__root";function Op(t,e,n,r,s,i,o,a,l){const c=Object.keys(t),u=r.get(s,t),h=F(!1),f=F(!1),m=F(0);if(u){if(!u.$partial)return u;u.$unwatch(),h.value=u.$dirty.value}const p={$dirty:h,$path:s,$touch:()=>{h.value||(h.value=!0)},$reset:()=>{h.value&&(h.value=!1)},$commit:()=>{}};return c.length?(c.forEach(v=>{p[v]=kp(t[v],e,p.$dirty,i,o,v,n,s,l,f,m)}),p.$externalResults=z(()=>a.value?[].concat(a.value).map((v,y)=>({$propertyPath:s,$property:n,$validator:"$externalResults",$uid:`${s}-externalResult-${y}`,$message:v,$params:{},$response:null,$pending:!1})):[]),p.$invalid=z(()=>{const v=c.some(y=>g(p[y].$invalid));return f.value=v,!!p.$externalResults.value.length||v}),p.$pending=z(()=>c.some(v=>g(p[v].$pending))),p.$error=z(()=>p.$dirty.value?p.$pending.value||p.$invalid.value:!1),p.$silentErrors=z(()=>c.filter(v=>g(p[v].$invalid)).map(v=>{const y=p[v];return Uo({$propertyPath:s,$property:n,$validator:v,$uid:`${s}-${v}`,$message:y.$message,$params:y.$params,$response:y.$response,$pending:y.$pending})}).concat(p.$externalResults.value)),p.$errors=z(()=>p.$dirty.value?p.$silentErrors.value:[]),p.$unwatch=()=>c.forEach(v=>{p[v].$unwatch()}),p.$commit=()=>{f.value=!0,m.value=Date.now()},r.set(s,t,p),p):(u&&r.set(s,t,p),p)}function Np(t,e,n,r,s,i,o){const a=Object.keys(t);return a.length?a.reduce((l,c)=>(l[c]=oo({validations:t[c],state:e,key:c,parentKey:n,resultsCache:r,globalConfig:s,instance:i,externalResults:o}),l),{}):{}}function xp(t,e,n){const r=z(()=>[e,n].filter(p=>p).reduce((p,v)=>p.concat(Object.values(g(v))),[])),s=z({get(){return t.$dirty.value||(r.value.length?r.value.every(p=>p.$dirty):!1)},set(p){t.$dirty.value=p}}),i=z(()=>{const p=g(t.$silentErrors)||[],v=r.value.filter(y=>(g(y).$silentErrors||[]).length).reduce((y,C)=>y.concat(...C.$silentErrors),[]);return p.concat(v)}),o=z(()=>{const p=g(t.$errors)||[],v=r.value.filter(y=>(g(y).$errors||[]).length).reduce((y,C)=>y.concat(...C.$errors),[]);return p.concat(v)}),a=z(()=>r.value.some(p=>p.$invalid)||g(t.$invalid)||!1),l=z(()=>r.value.some(p=>g(p.$pending))||g(t.$pending)||!1),c=z(()=>r.value.some(p=>p.$dirty)||r.value.some(p=>p.$anyDirty)||s.value),u=z(()=>s.value?l.value||a.value:!1),h=()=>{t.$touch(),r.value.forEach(p=>{p.$touch()})},f=()=>{t.$commit(),r.value.forEach(p=>{p.$commit()})},m=()=>{t.$reset(),r.value.forEach(p=>{p.$reset()})};return r.value.length&&r.value.every(p=>p.$dirty)&&h(),{$dirty:s,$errors:o,$invalid:a,$anyDirty:c,$error:u,$pending:l,$touch:h,$reset:m,$silentErrors:i,$commit:f}}function oo(t){let{validations:e,state:n,key:r,parentKey:s,childResults:i,resultsCache:o,globalConfig:a={},instance:l,externalResults:c}=t;const u=s?`${s}.${r}`:r,{rules:h,nestedValidators:f,config:m,validationGroups:p}=Dp(e),v=Et(Et({},a),m),y=r?z(()=>{const j=g(n);return j?g(j[r]):void 0}):n,C=Et({},g(c)||{}),N=z(()=>{const j=g(c);return r?j?g(j[r]):void 0:j}),x=Op(h,y,r,o,u,v,l,N,n),R=Np(f,y,u,o,v,l,N),Z={};p&&Object.entries(p).forEach(j=>{let[Ce,Q]=j;Z[Ce]={$invalid:xi(Q,R,"$invalid"),$error:xi(Q,R,"$error"),$pending:xi(Q,R,"$pending"),$errors:ll(Q,R,"$errors"),$silentErrors:ll(Q,R,"$silentErrors")}});const{$dirty:U,$errors:ce,$invalid:H,$anyDirty:I,$error:X,$pending:re,$touch:J,$reset:Ve,$silentErrors:Ge,$commit:je}=xp(x,R,i),Ke=r?z({get:()=>g(y),set:j=>{U.value=!0;const Ce=g(n),Q=g(c);Q&&(Q[r]=C[r]),ro(Ce[r])?Ce[r].value=j:Ce[r]=j}}):null;r&&v.$autoDirty&&fn(y,()=>{U.value||J();const j=g(c);j&&(j[r]=C[r])},{flush:"sync"});async function Qe(){return J(),v.$rewardEarly&&(je(),await sl()),await sl(),new Promise(j=>{if(!re.value)return j(!H.value);const Ce=fn(re,()=>{j(!H.value),Ce()})})}function Ze(j){return(i.value||{})[j]}function Xe(){ro(c)?c.value=C:Object.keys(C).length===0?Object.keys(c).forEach(j=>{delete c[j]}):Object.assign(c,C)}return Uo(Et(Et(Et({},x),{},{$model:Ke,$dirty:U,$error:X,$errors:ce,$invalid:H,$anyDirty:I,$pending:re,$touch:J,$reset:Ve,$path:u||Vp,$silentErrors:Ge,$validate:Qe,$commit:je},i&&{$getResultsForChild:Ze,$clearExternalResults:Xe,$validationGroups:Z}),R))}class $p{constructor(){this.storage=new Map}set(e,n,r){this.storage.set(e,{rules:n,result:r})}checkRulesValidity(e,n,r){const s=Object.keys(r),i=Object.keys(n);return i.length!==s.length||!i.every(a=>s.includes(a))?!1:i.every(a=>n[a].$params?Object.keys(n[a].$params).every(l=>g(r[a].$params[l])===g(n[a].$params[l])):!0)}get(e,n){const r=this.storage.get(e);if(!r)return;const{rules:s,result:i}=r,o=this.checkRulesValidity(e,n,s),a=i.$unwatch?i.$unwatch:()=>({});return o?i:{$dirty:i.$dirty,$partial:!0,$unwatch:a}}}const As={COLLECT_ALL:!0,COLLECT_NONE:!1},cl=Symbol("vuelidate#injectChildResults"),ul=Symbol("vuelidate#removeChildResults");function Lp(t){let{$scope:e,instance:n}=t;const r={},s=F([]),i=z(()=>s.value.reduce((u,h)=>(u[h]=g(r[h]),u),{}));function o(u,h){let{$registerAs:f,$scope:m,$stopPropagation:p}=h;p||e===As.COLLECT_NONE||m===As.COLLECT_NONE||e!==As.COLLECT_ALL&&e!==m||(r[f]=u,s.value.push(f))}n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],o);function a(u){s.value=s.value.filter(h=>h!==u),delete r[u]}n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],a);const l=nl(cl,[]);rl(cl,n.__vuelidateInjectInstances);const c=nl(ul,[]);return rl(ul,n.__vuelidateRemoveInstances),{childResults:i,sendValidationResultsToParent:l,removeValidationResultsFromParent:c}}function xc(t){return new Proxy(t,{get(e,n){return typeof e[n]=="object"?xc(e[n]):z(()=>e[n])}})}let hl=0;function wr(t,e){var n;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(r=t,t=void 0,e=void 0);let{$registerAs:s,$scope:i=As.COLLECT_ALL,$stopPropagation:o,$externalResults:a,currentVueInstance:l}=r;const c=l||((n=Kd())===null||n===void 0?void 0:n.proxy),u=c?c.$options:{};s||(hl+=1,s=`_vuelidate_${hl}`);const h=F({}),f=new $p,{childResults:m,sendValidationResultsToParent:p,removeValidationResultsFromParent:v}=c?Lp({$scope:i,instance:c}):{childResults:F({})};if(!t&&u.validations){const y=u.validations;e=F({}),Qd(()=>{e.value=c,fn(()=>Vs(y)?y.call(e.value,new xc(e.value)):y,C=>{h.value=oo({validations:C,state:e,childResults:m,resultsCache:f,globalConfig:r,instance:c,externalResults:a||c.vuelidateExternalResults})},{immediate:!0})}),r=u.validationsConfig||r}else{const y=ro(t)||Pp(t)?t:Uo(t||{});fn(y,C=>{h.value=oo({validations:C,state:e,childResults:m,resultsCache:f,globalConfig:r,instance:c??{},externalResults:a})},{immediate:!0})}return c&&(p.forEach(y=>y(h,{$registerAs:s,$scope:i,$stopPropagation:o})),Zd(()=>v.forEach(y=>y(s)))),z(()=>Et(Et({},g(h.value)),m.value))}function dl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dl(Object(n),!0).forEach(function(r){Mp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Os(t){return typeof t=="function"}function ao(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function ii(t){return Os(t.$validator)?Sr({},t):{$validator:t}}function $c(t){return typeof t=="object"?t.$valid:t}function Lc(t){return t.$validator||t}function Up(t,e){if(!ao(t))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof t}`);if(!ao(e)&&!Os(e))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const n=ii(e);return n.$params=Sr(Sr({},n.$params||{}),t),n}function Fp(t,e){if(!Os(t)&&typeof g(t)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof t}`);if(!ao(e)&&!Os(e))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const n=ii(e);return n.$message=t,n}function Bp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=ii(t);return Sr(Sr({},n),{},{$async:!0,$watchTargets:e})}function Hp(t){return{$validator(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return g(e).reduce((i,o,a)=>{const l=Object.entries(o).reduce((c,u)=>{let[h,f]=u;const m=t[h]||{},p=Object.entries(m).reduce((v,y)=>{let[C,N]=y;const R=Lc(N).call(this,f,o,a,...r),Z=$c(R);if(v.$data[C]=R,v.$data.$invalid=!Z||!!v.$data.$invalid,v.$data.$error=v.$data.$invalid,!Z){let U=N.$message||"";const ce=N.$params||{};typeof U=="function"&&(U=U({$pending:!1,$invalid:!Z,$params:ce,$model:f,$response:R})),v.$errors.push({$property:h,$message:U,$params:ce,$response:R,$model:f,$pending:!1,$validator:C})}return{$valid:v.$valid&&Z,$data:v.$data,$errors:v.$errors}},{$valid:!0,$data:{},$errors:[]});return c.$data[h]=p.$data,c.$errors[h]=p.$errors,{$valid:c.$valid&&p.$valid,$data:c.$data,$errors:c.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:i.$valid&&l.$valid,$data:i.$data.concat(l.$data),$errors:i.$errors.concat(l.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:e=>{let{$response:n}=e;return n?n.$errors.map(r=>Object.values(r).map(s=>s.map(i=>i.$message)).reduce((s,i)=>s.concat(i),[])):[]}}}const oi=t=>{if(t=g(t),Array.isArray(t))return!!t.length;if(t==null)return!1;if(t===!1)return!0;if(t instanceof Date)return!isNaN(t.getTime());if(typeof t=="object"){for(let e in t)return!0;return!1}return!!String(t).length},Mc=t=>(t=g(t),Array.isArray(t)?t.length:typeof t=="object"?Object.keys(t).length:String(t).length);function Ot(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=>(r=g(r),!oi(r)||e.every(s=>(s.lastIndex=0,s.test(r))))}var He=Object.freeze({__proto__:null,forEach:Hp,len:Mc,normalizeValidatorObject:ii,regex:Ot,req:oi,unwrap:g,unwrapNormalizedValidator:Lc,unwrapValidatorResponse:$c,withAsync:Bp,withMessage:Fp,withParams:Up});Ot(/^[a-zA-Z]*$/);Ot(/^[a-zA-Z0-9]*$/);Ot(/^\d*(\.\d+)?$/);const jp=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var qp=Ot(jp),Fo={$validator:qp,$message:"Value is not a valid email address",$params:{type:"email"}};function zp(t){return e=>!oi(e)||Mc(e)>=g(t)}function Ns(t){return{$validator:zp(t),$message:e=>{let{$params:n}=e;return`This field should be at least ${n.min} characters long`},$params:{min:t,type:"minLength"}}}function Wp(t){return typeof t=="string"&&(t=t.trim()),oi(t)}var he={$validator:Wp,$message:"Value is required",$params:{type:"required"}};function Gp(t){return e=>g(e)===g(t)}function Bo(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"other";return{$validator:Gp(t),$message:n=>`The value must be equal to the ${e} value`,$params:{equalTo:t,otherName:e,type:"sameAs"}}}const Kp=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;Ot(Kp);Ot(/(^[0-9]*$)|(^-[0-9]+$)/);Ot(/^[-]?\d*(\.\d+)?$/);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Qp=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Fc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Uc(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qp(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Zp;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zp extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xp=function(t){const e=Uc(t);return Fc.encodeByteArray(e,!0)},xs=function(t){return Xp(t).replace(/\./g,"")},Bc=function(t){try{return Fc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp=()=>Jp().__FIREBASE_DEFAULTS__,eg=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tg=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bc(t[1]);return e&&JSON.parse(e)},ai=()=>{try{return Yp()||eg()||tg()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hc=t=>{var e,n;return(n=(e=ai())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jc=t=>{const e=Hc(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qc=()=>{var t;return(t=ai())===null||t===void 0?void 0:t.config},zc=t=>{var e;return(e=ai())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[xs(JSON.stringify(n)),xs(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function sg(){var t;const e=(t=ai())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ig(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function og(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ag(){const t=De();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lg(){try{return typeof indexedDB=="object"}catch{return!1}}function cg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="FirebaseError";class at extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ug,Object.setPrototypeOf(this,at.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gr.prototype.create)}}class Gr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hg(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new at(s,a,r)}}function hg(t,e){return t.replace(dg,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const dg=/\{\$([^}]+)}/g;function fg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $s(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(fl(i)&&fl(o)){if(!$s(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fl(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pg(t,e){const n=new gg(t,e);return n.subscribe.bind(n)}class gg{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mg(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=$i),s.error===void 0&&(s.error=$i),s.complete===void 0&&(s.complete=$i);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mg(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $i(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t){return t&&t._delegate?t._delegate:t}class bt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ng;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vg(e))try{this.getOrInitializeService({instanceIdentifier:$t})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$t){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$t){return this.instances.has(e)}getOptions(e=$t){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yg(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$t){return this.component?this.component.multipleInstances?e:$t:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yg(t){return t===$t?void 0:t}function vg(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _g(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(B||(B={}));const Eg={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},Tg=B.INFO,Ig={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Cg=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ig[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ho{constructor(e){this.name=e,this._logLevel=Tg,this._logHandler=Cg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Eg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}}const Ag=(t,e)=>e.some(n=>t instanceof n);let pl,gl;function Rg(){return pl||(pl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pg(){return gl||(gl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gc=new WeakMap,lo=new WeakMap,Kc=new WeakMap,Li=new WeakMap,jo=new WeakMap;function Sg(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pt(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gc.set(n,t)}).catch(()=>{}),jo.set(e,t),e}function bg(t){if(lo.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});lo.set(t,e)}let co={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lo.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kc.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kg(t){co=t(co)}function Dg(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mi(this),e,...n);return Kc.set(r,e.sort?e.sort():[e]),Pt(r)}:Pg().includes(t)?function(...e){return t.apply(Mi(this),e),Pt(Gc.get(this))}:function(...e){return Pt(t.apply(Mi(this),e))}}function Vg(t){return typeof t=="function"?Dg(t):(t instanceof IDBTransaction&&bg(t),Ag(t,Rg())?new Proxy(t,co):t)}function Pt(t){if(t instanceof IDBRequest)return Sg(t);if(Li.has(t))return Li.get(t);const e=Vg(t);return e!==t&&(Li.set(t,e),jo.set(e,t)),e}const Mi=t=>jo.get(t);function Og(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Pt(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Pt(o.result),l.oldVersion,l.newVersion,Pt(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Ng=["get","getKey","getAll","getAllKeys","count"],xg=["put","add","delete","clear"],Ui=new Map;function ml(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ui.get(e))return Ui.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=xg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ng.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Ui.set(e,i),i}kg(t=>({...t,get:(e,n,r)=>ml(e,n)||t.get(e,n,r),has:(e,n)=>!!ml(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lg(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Lg(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uo="@firebase/app",_l="0.9.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt=new Ho("@firebase/app"),Mg="@firebase/app-compat",Ug="@firebase/analytics-compat",Fg="@firebase/analytics",Bg="@firebase/app-check-compat",Hg="@firebase/app-check",jg="@firebase/auth",qg="@firebase/auth-compat",zg="@firebase/database",Wg="@firebase/database-compat",Gg="@firebase/functions",Kg="@firebase/functions-compat",Qg="@firebase/installations",Zg="@firebase/installations-compat",Xg="@firebase/messaging",Jg="@firebase/messaging-compat",Yg="@firebase/performance",em="@firebase/performance-compat",tm="@firebase/remote-config",nm="@firebase/remote-config-compat",rm="@firebase/storage",sm="@firebase/storage-compat",im="@firebase/firestore",om="@firebase/firestore-compat",am="firebase",lm="10.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]",cm={[uo]:"fire-core",[Mg]:"fire-core-compat",[Fg]:"fire-analytics",[Ug]:"fire-analytics-compat",[Hg]:"fire-app-check",[Bg]:"fire-app-check-compat",[jg]:"fire-auth",[qg]:"fire-auth-compat",[zg]:"fire-rtdb",[Wg]:"fire-rtdb-compat",[Gg]:"fire-fn",[Kg]:"fire-fn-compat",[Qg]:"fire-iid",[Zg]:"fire-iid-compat",[Xg]:"fire-fcm",[Jg]:"fire-fcm-compat",[Yg]:"fire-perf",[em]:"fire-perf-compat",[tm]:"fire-rc",[nm]:"fire-rc-compat",[rm]:"fire-gcs",[sm]:"fire-gcs-compat",[im]:"fire-fst",[om]:"fire-fst-compat","fire-js":"fire-js",[am]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Map,fo=new Map;function um(t,e){try{t.container.addComponent(e)}catch(n){qt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zt(t){const e=t.name;if(fo.has(e))return qt.debug(`There were multiple attempts to register component ${e}.`),!1;fo.set(e,t);for(const n of Ls.values())um(n,t);return!0}function li(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},St=new Gr("app","Firebase",hm);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw St.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=lm;function qo(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ho,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw St.create("bad-app-name",{appName:String(s)});if(n||(n=qc()),!n)throw St.create("no-options");const i=Ls.get(s);if(i){if($s(n,i.options)&&$s(r,i.config))return i;throw St.create("duplicate-app",{appName:s})}const o=new wg(s);for(const l of fo.values())o.addComponent(l);const a=new dm(n,r,o);return Ls.set(s,a),a}function zo(t=ho){const e=Ls.get(t);if(!e&&t===ho&&qc())return qo();if(!e)throw St.create("no-app",{appName:t});return e}function nt(t,e,n){var r;let s=(r=cm[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qt.warn(a.join(" "));return}zt(new bt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="firebase-heartbeat-database",pm=1,br="firebase-heartbeat-store";let Fi=null;function Qc(){return Fi||(Fi=Og(fm,pm,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(br)}}}).catch(t=>{throw St.create("idb-open",{originalErrorMessage:t.message})})),Fi}async function gm(t){try{return await(await Qc()).transaction(br).objectStore(br).get(Zc(t))}catch(e){if(e instanceof at)qt.warn(e.message);else{const n=St.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qt.warn(n.message)}}}async function yl(t,e){try{const r=(await Qc()).transaction(br,"readwrite");await r.objectStore(br).put(e,Zc(t)),await r.done}catch(n){if(n instanceof at)qt.warn(n.message);else{const r=St.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qt.warn(r.message)}}}function Zc(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=1024,_m=30*24*60*60*1e3;class ym{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vl();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=_m}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vl(),{heartbeatsToSend:n,unsentEntries:r}=vm(this._heartbeatsCache.heartbeats),s=xs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function vl(){return new Date().toISOString().substring(0,10)}function vm(t,e=mm){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),wl(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),wl(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wm{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lg()?cg().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gm(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function wl(t){return xs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t){zt(new bt("platform-logger",e=>new $g(e),"PRIVATE")),zt(new bt("heartbeat",e=>new ym(e),"PRIVATE")),nt(uo,_l,t),nt(uo,_l,"esm2017"),nt("fire-js","")}Em("");var Tm="firebase",Im="10.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nt(Tm,Im,"app");function Wo(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Xc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cm=Xc,Jc=new Gr("auth","Firebase",Xc());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Ho("@firebase/auth");function Am(t,...e){Ms.logLevel<=B.WARN&&Ms.warn(`Auth (${Yt}): ${t}`,...e)}function Rs(t,...e){Ms.logLevel<=B.ERROR&&Ms.error(`Auth (${Yt}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,...e){throw Go(t,...e)}function rt(t,...e){return Go(t,...e)}function Rm(t,e,n){const r=Object.assign(Object.assign({},Cm()),{[e]:n});return new Gr("auth","Firebase",r).create(e,{appName:t.name})}function Go(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jc.create(t,...e)}function V(t,e,...n){if(!t)throw Go(e,...n)}function lt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rs(e),new Error(e)}function _t(t,e){t||lt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Pm(){return El()==="http:"||El()==="https:"}function El(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pm()||ig()||"connection"in navigator)?navigator.onLine:!0}function bm(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){this.shortDelay=e,this.longDelay=n,_t(n>e,"Short delay should be less than long delay!"),this.isMobile=rg()||og()}get(){return Sm()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t,e){_t(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=new Qr(3e4,6e4);function Qo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zr(t,e,n,r,s={}){return eu(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Kr(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Yc.fetch()(nu(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function eu(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},km),e);try{const s=new Vm(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fs(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fs(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fs(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw fs(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rm(t,u,c);mt(t,u)}}catch(s){if(s instanceof at)throw s;mt(t,"network-request-failed",{message:String(s)})}}async function tu(t,e,n,r,s={}){const i=await Zr(t,e,n,r,s);return"mfaPendingCredential"in i&&mt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function nu(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ko(t.config,s):`${t.config.apiScheme}://${s}`}class Vm{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rt(this.auth,"network-request-failed")),Dm.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fs(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(t,e){return Zr(t,"POST","/v1/accounts:delete",e)}async function Nm(t,e){return Zr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xm(t,e=!1){const n=Le(t),r=await n.getIdToken(e),s=Zo(r);V(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Er(Bi(s.auth_time)),issuedAtTime:Er(Bi(s.iat)),expirationTime:Er(Bi(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Bi(t){return Number(t)*1e3}function Zo(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rs("JWT malformed, contained fewer than 3 sections"),null;try{const s=Bc(n);return s?JSON.parse(s):(Rs("Failed to decode base64 JWT payload"),null)}catch(s){return Rs("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $m(t){const e=Zo(t);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof at&&Lm(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Lm({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Er(this.lastLoginAt),this.creationTime=Er(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t){var e;const n=t.auth,r=await t.getIdToken(),s=await kr(t,Nm(n,{idToken:r}));V(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Bm(i.providerUserInfo):[],a=Fm(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ru(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Um(t){const e=Le(t);await Us(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fm(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Bm(t){return t.map(e=>{var{providerId:n}=e,r=Wo(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hm(t,e){const n=await eu(t,{},async()=>{const r=Kr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=nu(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Yc.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$m(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return V(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Hm(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Dr;return r&&(V(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(V(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(V(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dr,this.toJSON())}_performRefresh(){return lt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){V(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ft{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Wo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ru(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await kr(this,this.stsTokenManager.getToken(this.auth,e));return V(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xm(this,e)}reload(){return Um(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ft(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Us(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await kr(this,Om(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,N=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:R,isAnonymous:Z,providerData:U,stsTokenManager:ce}=n;V(x&&ce,e,"internal-error");const H=Dr.fromJSON(this.name,ce);V(typeof x=="string",e,"internal-error"),wt(h,e.name),wt(f,e.name),V(typeof R=="boolean",e,"internal-error"),V(typeof Z=="boolean",e,"internal-error"),wt(m,e.name),wt(p,e.name),wt(v,e.name),wt(y,e.name),wt(C,e.name),wt(N,e.name);const I=new Ft({uid:x,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:Z,photoURL:p,phoneNumber:m,tenantId:v,stsTokenManager:H,createdAt:C,lastLoginAt:N});return U&&Array.isArray(U)&&(I.providerData=U.map(X=>Object.assign({},X))),y&&(I._redirectEventId=y),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Dr;s.updateFromServerResponse(n);const i=new Ft({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Us(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new Map;function ct(t){_t(t instanceof Function,"Expected a class definition");let e=Tl.get(t);return e?(_t(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tl.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}su.type="NONE";const Il=su;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t,e,n){return`firebase:${t}:${e}:${n}`}class ln{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ps(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ps("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ft._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ln(ct(Il),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ct(Il);const o=Ps(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Ft._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ln(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ln(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(au(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iu(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cu(e))return"Blackberry";if(uu(e))return"Webos";if(Xo(e))return"Safari";if((e.includes("chrome/")||ou(e))&&!e.includes("edge/"))return"Chrome";if(lu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iu(t=De()){return/firefox\//i.test(t)}function Xo(t=De()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ou(t=De()){return/crios\//i.test(t)}function au(t=De()){return/iemobile/i.test(t)}function lu(t=De()){return/android/i.test(t)}function cu(t=De()){return/blackberry/i.test(t)}function uu(t=De()){return/webos/i.test(t)}function ci(t=De()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jm(t=De()){var e;return ci(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qm(){return ag()&&document.documentMode===10}function hu(t=De()){return ci(t)||lu(t)||uu(t)||cu(t)||/windows phone/i.test(t)||au(t)}function zm(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e=[]){let n;switch(t){case"Browser":n=Cl(De());break;case"Worker":n=`${Cl(De())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yt}/${r}`}async function fu(t,e){return Zr(t,"GET","/v2/recaptchaConfig",Qo(t,e))}function Al(t){return t!==void 0&&t.enterprise!==void 0}class pu{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function gu(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Wm().appendChild(r)})}function Gm(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Km="https://www.google.com/recaptcha/enterprise.js?render=",Qm="recaptcha-enterprise",Zm="NO_RECAPTCHA";class mu{constructor(e){this.type=Qm,this.auth=Xr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{fu(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new pu(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Al(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(Zm)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Al(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}gu(Km+a).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Rl(t,e,n,r=!1){const s=new mu(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pl(this),this.idTokenSubscription=new Pl(this),this.beforeStateQueue=new Xm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ct(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ln.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Us(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bm()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Le(e):null;return n&&V(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ct(e))})}async initializeRecaptchaConfig(){const e=await fu(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new pu(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new mu(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ct(e)||this._popupRedirectResolver;V(n,this,"argument-error"),this.redirectPersistenceManager=await ln.create(this,[ct(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return V(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=du(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Am(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xr(t){return Le(t)}class Pl{constructor(e){this.auth=e,this.observer=null,this.addObserver=pg(n=>this.observer=n)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){const n=li(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($s(i,e??{}))return s;mt(s,"already-initialized")}return n.initialize({options:e})}function e_(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ct);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function t_(t,e,n){const r=Xr(t);V(r._canInitEmulator,r,"emulator-config-failed"),V(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=_u(e),{host:o,port:a}=n_(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||r_()}function _u(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function n_(t){const e=_u(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Sl(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Sl(o)}}}function Sl(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function r_(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lt("not implemented")}_getIdTokenResponse(e){return lt("not implemented")}_linkToIdToken(e,n){return lt("not implemented")}_getReauthenticationResolver(e){return lt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cn(t,e){return tu(t,"POST","/v1/accounts:signInWithIdp",Qo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="http://localhost";class Wt extends yu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Wo(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Wt(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return cn(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cn(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cn(e,n)}buildRequest(){const e={requestUri:s_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends vu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends Jr{constructor(){super("facebook.com")}static credential(e){return Wt._fromParams({providerId:Tt.PROVIDER_ID,signInMethod:Tt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tt.credentialFromTaggedObject(e)}static credentialFromError(e){return Tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tt.credential(e.oauthAccessToken)}catch{return null}}}Tt.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tt.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wt._fromParams({providerId:It.PROVIDER_ID,signInMethod:It.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return It.credentialFromTaggedObject(e)}static credentialFromError(e){return It.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return It.credential(n,r)}catch{return null}}}It.GOOGLE_SIGN_IN_METHOD="google.com";It.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends Jr{constructor(){super("github.com")}static credential(e){return Wt._fromParams({providerId:Ct.PROVIDER_ID,signInMethod:Ct.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ct.credentialFromTaggedObject(e)}static credentialFromError(e){return Ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ct.credential(e.oauthAccessToken)}catch{return null}}}Ct.GITHUB_SIGN_IN_METHOD="github.com";Ct.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At extends Jr{constructor(){super("twitter.com")}static credential(e,n){return Wt._fromParams({providerId:At.PROVIDER_ID,signInMethod:At.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return At.credentialFromTaggedObject(e)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return At.credential(n,r)}catch{return null}}}At.TWITTER_SIGN_IN_METHOD="twitter.com";At.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t,e){return tu(t,"POST","/v1/accounts:signUp",Qo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ft._fromIdTokenResponse(e,r,s),o=bl(r);return new Gt({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=bl(r);return new Gt({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function bl(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends at{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fs.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fs(e,n,r,s)}}function wu(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fs._fromErrorAndOperation(t,i,e,r):i})}async function i_(t,e,n=!1){const r=await kr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gt._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await kr(t,wu(r,s,e,t),n);V(i.idToken,r,"internal-error");const o=Zo(i.idToken);V(o,r,"internal-error");const{sub:a}=o;return V(t.uid===a,r,"user-mismatch"),Gt._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(t,e,n=!1){const r="signIn",s=await wu(t,r,e),i=await Gt._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Eu(t,e,n){var r;const s=Xr(t),i={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const c=await Rl(s,i,"signUpPassword");o=Hi(s,c)}else o=Hi(s,i).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await Rl(s,i,"signUpPassword");return Hi(s,u)}else return Promise.reject(c)});const a=await o.catch(c=>Promise.reject(c)),l=await Gt._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function l_(t,e,n,r){return Le(t).onIdTokenChanged(e,n,r)}function c_(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}const Bs="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){const t=De();return Xo(t)||ci(t)}const h_=1e3,d_=10;class Iu extends Tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=u_()&&zm(),this.fallbackToPolling=hu(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);qm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,d_):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},h_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iu.type="LOCAL";const f_=Iu;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends Tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Cu.type="SESSION";const Au=Cu;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ui(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await p_(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ui.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Jo("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(){return window}function m_(t){st().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(){return typeof st().WorkerGlobalScope<"u"&&typeof st().importScripts=="function"}async function __(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y_(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function v_(){return Ru()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="firebaseLocalStorageDb",w_=1,Hs="firebaseLocalStorage",Su="fbase_key";class Yr{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hi(t,e){return t.transaction([Hs],e?"readwrite":"readonly").objectStore(Hs)}function E_(){const t=indexedDB.deleteDatabase(Pu);return new Yr(t).toPromise()}function go(){const t=indexedDB.open(Pu,w_);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hs,{keyPath:Su})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hs)?e(r):(r.close(),await E_(),e(await go()))})})}async function kl(t,e,n){const r=hi(t,!0).put({[Su]:e,value:n});return new Yr(r).toPromise()}async function T_(t,e){const n=hi(t,!1).get(e),r=await new Yr(n).toPromise();return r===void 0?null:r.value}function Dl(t,e){const n=hi(t,!0).delete(e);return new Yr(n).toPromise()}const I_=800,C_=3;class bu{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await go(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>C_)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ru()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ui._getInstance(v_()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await __(),!this.activeServiceWorker)return;this.sender=new g_(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||y_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await go();return await kl(e,Bs,"1"),await Dl(e,Bs),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kl(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>T_(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dl(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=hi(s,!1).getAll();return new Yr(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),I_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bu.type="LOCAL";const A_=bu;new Qr(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e){return e?ct(e):(V(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends yu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cn(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function P_(t){return a_(t.auth,new Yo(t),t.bypassAuthState)}function S_(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),o_(n,new Yo(t),t.bypassAuthState)}async function b_(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),i_(n,new Yo(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P_;case"linkViaPopup":case"linkViaRedirect":return b_;case"reauthViaPopup":case"reauthViaRedirect":return S_;default:mt(this.auth,"internal-error")}}resolve(e){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new Qr(2e3,1e4);class sn extends ku{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,sn.currentPopupAction&&sn.currentPopupAction.cancel(),sn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return V(e,this.auth,"internal-error"),e}async onExecution(){_t(this.filter.length===1,"Popup operations only handle one event");const e=Jo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,k_.get())};e()}}sn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="pendingRedirect",Ss=new Map;class V_ extends ku{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ss.get(this.auth._key());if(!e){try{const r=await O_(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ss.set(this.auth._key(),e)}return this.bypassAuthState||Ss.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O_(t,e){const n=$_(e),r=x_(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function N_(t,e){Ss.set(t._key(),e)}function x_(t){return ct(t._redirectPersistence)}function $_(t){return Ps(D_,t.config.apiKey,t.name)}async function L_(t,e,n=!1){const r=Xr(t),s=R_(r,e),o=await new V_(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=10*60*1e3;class U_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F_(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Du(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M_&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vl(e))}saveEventToCache(e){this.cachedEventUids.add(Vl(e)),this.lastProcessedEventTime=Date.now()}}function Vl(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Du({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function F_(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Du(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B_(t,e={}){return Zr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j_=/^https?/;async function q_(t){if(t.config.emulator)return;const{authorizedDomains:e}=await B_(t);for(const n of e)try{if(z_(n))return}catch{}mt(t,"unauthorized-domain")}function z_(t){const e=po(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!j_.test(n))return!1;if(H_.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Qr(3e4,6e4);function Ol(){const t=st().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function G_(t){return new Promise((e,n)=>{var r,s,i;function o(){Ol(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ol(),n(rt(t,"network-request-failed"))},timeout:W_.get()})}if(!((s=(r=st().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=st().gapi)===null||i===void 0)&&i.load)o();else{const a=Gm("iframefcb");return st()[a]=()=>{gapi.load?o():n(rt(t,"network-request-failed"))},gu(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw bs=null,e})}let bs=null;function K_(t){return bs=bs||G_(t),bs}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=new Qr(5e3,15e3),Z_="__/auth/iframe",X_="emulator/auth/iframe",J_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e1(t){const e=t.config;V(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ko(e,X_):`https://${t.config.authDomain}/${Z_}`,r={apiKey:e.apiKey,appName:t.name,v:Yt},s=Y_.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Kr(r).slice(1)}`}async function t1(t){const e=await K_(t),n=st().gapi;return V(n,t,"internal-error"),e.open({where:document.body,url:e1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J_,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=rt(t,"network-request-failed"),a=st().setTimeout(()=>{i(o)},Q_.get());function l(){st().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r1=500,s1=600,i1="_blank",o1="http://localhost";class Nl{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a1(t,e,n,r=r1,s=s1){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},n1),{width:r.toString(),height:s.toString(),top:i,left:o}),c=De().toLowerCase();n&&(a=ou(c)?i1:n),iu(c)&&(e=e||o1,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[m,p])=>`${f}${m}=${p},`,"");if(jm(c)&&a!=="_self")return l1(e||"",a),new Nl(null);const h=window.open(e||"",a,u);V(h,t,"popup-blocked");try{h.focus()}catch{}return new Nl(h)}function l1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="__/auth/handler",u1="emulator/auth/handler",h1=encodeURIComponent("fac");async function xl(t,e,n,r,s,i){V(t.config.authDomain,t,"auth-domain-config-required"),V(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yt,eventId:s};if(e instanceof vu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(i||{}))o[u]=h}if(e instanceof Jr){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${h1}=${encodeURIComponent(l)}`:"";return`${d1(t)}?${Kr(a).slice(1)}${c}`}function d1({config:t}){return t.emulator?Ko(t,u1):`https://${t.authDomain}/${c1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="webStorageSupport";class f1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Au,this._completeRedirectFn=L_,this._overrideRedirectResult=N_}async _openPopup(e,n,r,s){var i;_t((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await xl(e,n,r,po(),s);return a1(e,o,Jo())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await xl(e,n,r,po(),s);return m_(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(_t(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await t1(e),r=new U_(e);return n.register("authEvent",s=>(V(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ji,{type:ji},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ji];o!==void 0&&n(!!o),mt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q_(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hu()||Xo()||ci()}}const p1=f1;var $l="@firebase/auth",Ll="1.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _1(t){zt(new bt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;V(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:du(t)},c=new Jm(r,s,i,l);return e_(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zt(new bt("auth-internal",e=>{const n=Xr(e.getProvider("auth").getImmediate());return(r=>new g1(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nt($l,Ll,m1(t)),nt($l,Ll,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=5*60,v1=zc("authIdTokenMaxAge")||y1;let Ml=null;const w1=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>v1)return;const s=n==null?void 0:n.token;Ml!==s&&(Ml=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function E1(t=zo()){const e=li(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ym(t,{popupRedirectResolver:p1,persistence:[A_,f_,Au]}),r=zc("authTokenSyncURL");if(r){const i=w1(r);c_(n,i,()=>i(n.currentUser)),l_(n,o=>i(o))}const s=Hc("auth");return s&&t_(n,`http://${s}`),n}_1("Browser");var T1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T,ea=ea||{},k=T1||self;function di(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function es(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function I1(t){return Object.prototype.hasOwnProperty.call(t,qi)&&t[qi]||(t[qi]=++C1)}var qi="closure_uid_"+(1e9*Math.random()>>>0),C1=0;function A1(t,e,n){return t.call.apply(t.bind,arguments)}function R1(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function be(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?be=A1:be=R1,be.apply(null,arguments)}function ps(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ve(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Nt(){this.s=this.s,this.o=this.o}var P1=0;Nt.prototype.s=!1;Nt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),P1!=0)&&I1(this)};Nt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ta(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ul(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(di(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function ke(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var S1=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{k.addEventListener("test",()=>{},e),k.removeEventListener("test",()=>{},e)}catch{}return t}();function Vr(t){return/^[\s\xa0]*$/.test(t)}function fi(){var t=k.navigator;return t&&(t=t.userAgent)?t:""}function Je(t){return fi().indexOf(t)!=-1}function na(t){return na[" "](t),t}na[" "]=function(){};function b1(t,e){var n=E0;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var k1=Je("Opera"),_n=Je("Trident")||Je("MSIE"),Ou=Je("Edge"),mo=Ou||_n,Nu=Je("Gecko")&&!(fi().toLowerCase().indexOf("webkit")!=-1&&!Je("Edge"))&&!(Je("Trident")||Je("MSIE"))&&!Je("Edge"),D1=fi().toLowerCase().indexOf("webkit")!=-1&&!Je("Edge");function xu(){var t=k.document;return t?t.documentMode:void 0}var _o;e:{var zi="",Wi=function(){var t=fi();if(Nu)return/rv:([^\);]+)(\)|;)/.exec(t);if(Ou)return/Edge\/([\d\.]+)/.exec(t);if(_n)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(D1)return/WebKit\/(\S+)/.exec(t);if(k1)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Wi&&(zi=Wi?Wi[1]:""),_n){var Gi=xu();if(Gi!=null&&Gi>parseFloat(zi)){_o=String(Gi);break e}}_o=zi}var yo;if(k.document&&_n){var Fl=xu();yo=Fl||parseInt(_o,10)||void 0}else yo=void 0;var V1=yo;function Or(t,e){if(ke.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Nu){e:{try{na(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:O1[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Or.$.h.call(this)}}ve(Or,ke);var O1={2:"touch",3:"pen",4:"mouse"};Or.prototype.h=function(){Or.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ts="closure_listenable_"+(1e6*Math.random()|0),N1=0;function x1(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++N1,this.fa=this.ia=!1}function pi(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ra(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function $1(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function $u(t){const e={};for(const n in t)e[n]=t[n];return e}const Bl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lu(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Bl.length;i++)n=Bl[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gi(t){this.src=t,this.g={},this.h=0}gi.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=wo(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new x1(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function vo(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Vu(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(pi(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function wo(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var sa="closure_lm_"+(1e6*Math.random()|0),Ki={};function Mu(t,e,n,r,s){if(r&&r.once)return Fu(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Mu(t,e[i],n,r,s);return null}return n=aa(n),t&&t[ts]?t.O(e,n,es(r)?!!r.capture:!!r,s):Uu(t,e,n,!1,r,s)}function Uu(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=es(s)?!!s.capture:!!s,a=oa(t);if(a||(t[sa]=a=new gi(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=L1(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)S1||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Hu(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function L1(){function t(n){return e.call(t.src,t.listener,n)}const e=M1;return t}function Fu(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Fu(t,e[i],n,r,s);return null}return n=aa(n),t&&t[ts]?t.P(e,n,es(r)?!!r.capture:!!r,s):Uu(t,e,n,!0,r,s)}function Bu(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Bu(t,e[i],n,r,s);else r=es(r)?!!r.capture:!!r,n=aa(n),t&&t[ts]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=wo(i,n,r,s),-1<n&&(pi(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=oa(t))&&(e=t.g[e.toString()],t=-1,e&&(t=wo(e,n,r,s)),(n=-1<t?e[t]:null)&&ia(n))}function ia(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ts])vo(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=oa(e))?(vo(n,t),n.h==0&&(n.src=null,e[sa]=null)):pi(t)}}}function Hu(t){return t in Ki?Ki[t]:Ki[t]="on"+t}function M1(t,e){if(t.fa)t=!0;else{e=new Or(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ia(t),t=n.call(r,e)}return t}function oa(t){return t=t[sa],t instanceof gi?t:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function aa(t){return typeof t=="function"?t:(t[Qi]||(t[Qi]=function(e){return t.handleEvent(e)}),t[Qi])}function _e(){Nt.call(this),this.i=new gi(this),this.S=this,this.J=null}ve(_e,Nt);_e.prototype[ts]=!0;_e.prototype.removeEventListener=function(t,e,n,r){Bu(this,t,e,n,r)};function Ie(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ke(e,t);else if(e instanceof ke)e.target=e.target||t;else{var s=e;e=new ke(r,t),Lu(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=gs(o,r,!0,e)&&s}if(o=e.g=t,s=gs(o,r,!0,e)&&s,s=gs(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=gs(o,r,!1,e)&&s}_e.prototype.N=function(){if(_e.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pi(n[r]);delete t.g[e],t.h--}}this.J=null};_e.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};_e.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function gs(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&vo(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var la=k.JSON.stringify;class U1{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function F1(){var t=ca;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class B1{constructor(){this.h=this.g=null}add(e,n){const r=ju.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ju=new U1(()=>new H1,t=>t.reset());class H1{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function j1(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function q1(t){k.setTimeout(()=>{throw t},0)}let Nr,xr=!1,ca=new B1,qu=()=>{const t=k.Promise.resolve(void 0);Nr=()=>{t.then(z1)}};var z1=()=>{for(var t;t=F1();){try{t.h.call(t.g)}catch(n){q1(n)}var e=ju;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xr=!1};function mi(t,e){_e.call(this),this.h=t||1,this.g=e||k,this.j=be(this.qb,this),this.l=Date.now()}ve(mi,_e);T=mi.prototype;T.ga=!1;T.T=null;T.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ie(this,"tick"),this.ga&&(ua(this),this.start()))}};T.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ua(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}T.N=function(){mi.$.N.call(this),ua(this),delete this.g};function ha(t,e,n){if(typeof t=="function")n&&(t=be(t,n));else if(t&&typeof t.handleEvent=="function")t=be(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function zu(t){t.g=ha(()=>{t.g=null,t.i&&(t.i=!1,zu(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class W1 extends Nt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zu(this)}N(){super.N(),this.g&&(k.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(t){Nt.call(this),this.h=t,this.g={}}ve($r,Nt);var Hl=[];function Wu(t,e,n,r){Array.isArray(n)||(n&&(Hl[0]=n.toString()),n=Hl);for(var s=0;s<n.length;s++){var i=Mu(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Gu(t){ra(t.g,function(e,n){this.g.hasOwnProperty(n)&&ia(e)},t),t.g={}}$r.prototype.N=function(){$r.$.N.call(this),Gu(this)};$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function _i(){this.g=!0}_i.prototype.Ea=function(){this.g=!1};function G1(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function K1(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function on(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Z1(t,n)+(r?" "+r:"")})}function Q1(t,e){t.info(function(){return"TIMEOUT: "+e})}_i.prototype.info=function(){};function Z1(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return la(n)}catch{return e}}var en={},jl=null;function yi(){return jl=jl||new _e}en.Ta="serverreachability";function Ku(t){ke.call(this,en.Ta,t)}ve(Ku,ke);function Lr(t){const e=yi();Ie(e,new Ku(e))}en.STAT_EVENT="statevent";function Qu(t,e){ke.call(this,en.STAT_EVENT,t),this.stat=e}ve(Qu,ke);function Ne(t){const e=yi();Ie(e,new Qu(e,t))}en.Ua="timingevent";function Zu(t,e){ke.call(this,en.Ua,t),this.size=e}ve(Zu,ke);function ns(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}var vi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Xu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function da(){}da.prototype.h=null;function ql(t){return t.h||(t.h=t.i())}function Ju(){}var rs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fa(){ke.call(this,"d")}ve(fa,ke);function pa(){ke.call(this,"c")}ve(pa,ke);var Eo;function wi(){}ve(wi,da);wi.prototype.g=function(){return new XMLHttpRequest};wi.prototype.i=function(){return{}};Eo=new wi;function ss(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new $r(this),this.P=X1,t=mo?125:void 0,this.V=new mi(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Yu}function Yu(){this.i=null,this.g="",this.h=!1}var X1=45e3,To={},js={};T=ss.prototype;T.setTimeout=function(t){this.P=t};function Io(t,e,n){t.L=1,t.v=Ti(yt(e)),t.s=n,t.S=!0,eh(t,null)}function eh(t,e){t.G=Date.now(),is(t),t.A=yt(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),lh(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Yu,t.g=bh(t.l,n?e:null,!t.s),0<t.O&&(t.M=new W1(be(t.Pa,t,t.g),t.O)),Wu(t.U,t.g,"readystatechange",t.nb),e=t.I?$u(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Lr(),G1(t.j,t.u,t.A,t.m,t.W,t.s)}T.nb=function(t){t=t.target;const e=this.M;e&&Ye(t)==3?e.l():this.Pa(t)};T.Pa=function(t){try{if(t==this.g)e:{const u=Ye(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||mo||this.g&&(this.h.h||this.g.ja()||Kl(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Lr(3):Lr(2)),Ei(this);var n=this.g.da();this.ca=n;t:if(th(this)){var r=Kl(this.g);t="";var s=r.length,i=Ye(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lt(this),Tr(this);var o="";break t}this.h.i=new k.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,K1(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vr(a)){var c=a;break t}}c=null}if(n=c)on(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Co(this,n);else{this.i=!1,this.o=3,Ne(12),Lt(this),Tr(this);break e}}this.S?(nh(this,u,o),mo&&this.i&&u==3&&(Wu(this.U,this.V,"tick",this.mb),this.V.start())):(on(this.j,this.m,o,null),Co(this,o)),u==4&&Lt(this),this.i&&!this.J&&(u==4?Ah(this.l,this):(this.i=!1,is(this)))}else y0(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ne(12)):(this.o=0,Ne(13)),Lt(this),Tr(this)}}}catch{}finally{}};function th(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function nh(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=J1(t,n),s==js){e==4&&(t.o=4,Ne(14),r=!1),on(t.j,t.m,null,"[Incomplete Response]");break}else if(s==To){t.o=4,Ne(15),on(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else on(t.j,t.m,s,null),Co(t,s);th(t)&&s!=js&&s!=To&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ne(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wa(e),e.M=!0,Ne(11))):(on(t.j,t.m,n,"[Invalid Chunked Response]"),Lt(t),Tr(t))}T.mb=function(){if(this.g){var t=Ye(this.g),e=this.g.ja();this.C<e.length&&(Ei(this),nh(this,t,e),this.i&&t!=4&&is(this))}};function J1(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?js:(n=Number(e.substring(n,r)),isNaN(n)?To:(r+=1,r+n>e.length?js:(e=e.slice(r,r+n),t.C=r+n,e)))}T.cancel=function(){this.J=!0,Lt(this)};function is(t){t.Y=Date.now()+t.P,rh(t,t.P)}function rh(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ns(be(t.lb,t),e)}function Ei(t){t.B&&(k.clearTimeout(t.B),t.B=null)}T.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Q1(this.j,this.A),this.L!=2&&(Lr(),Ne(17)),Lt(this),this.o=2,Tr(this)):rh(this,this.Y-t)};function Tr(t){t.l.H==0||t.J||Ah(t.l,t)}function Lt(t){Ei(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ua(t.V),Gu(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Co(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ao(n.i,t))){if(!t.K&&Ao(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ws(n),Ai(n);else break e;va(n),Ne(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ns(be(n.ib,n),6e3));if(1>=hh(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Mt(n,11)}else if((t.K||n.g==t)&&Ws(n),!Vr(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const p=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var i=r.i;i.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(ga(i,i.h),i.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,te(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Sh(r,r.J?r.pa:null,r.Y),o.K){dh(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Ei(a),is(a)),r.g=o}else Ih(r);0<n.j.length&&Ri(n)}else c[0]!="stop"&&c[0]!="close"||Mt(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Mt(n,7):ya(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Lr(4)}catch{}}function Y1(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(di(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function e0(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(di(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function sh(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(di(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=e0(t),r=Y1(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var ih=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t0(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Bt(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Bt){this.h=t.h,qs(this,t.j),this.s=t.s,this.g=t.g,zs(this,t.m),this.l=t.l;var e=t.i,n=new Mr;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),zl(this,n),this.o=t.o}else t&&(e=String(t).match(ih))?(this.h=!1,qs(this,e[1]||"",!0),this.s=yr(e[2]||""),this.g=yr(e[3]||"",!0),zs(this,e[4]),this.l=yr(e[5]||"",!0),zl(this,e[6]||"",!0),this.o=yr(e[7]||"")):(this.h=!1,this.i=new Mr(null,this.h))}Bt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(vr(e,Wl,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(vr(e,Wl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(vr(n,n.charAt(0)=="/"?s0:r0,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",vr(n,o0)),t.join("")};function yt(t){return new Bt(t)}function qs(t,e,n){t.j=n?yr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function zs(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function zl(t,e,n){e instanceof Mr?(t.i=e,a0(t.i,t.h)):(n||(e=vr(e,i0)),t.i=new Mr(e,t.h))}function te(t,e,n){t.i.set(e,n)}function Ti(t){return te(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function yr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vr(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,n0),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function n0(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Wl=/[#\/\?@]/g,r0=/[#\?:]/g,s0=/[#\?]/g,i0=/[#\?@]/g,o0=/#/g;function Mr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xt(t){t.g||(t.g=new Map,t.h=0,t.i&&t0(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}T=Mr.prototype;T.add=function(t,e){xt(this),this.i=null,t=Cn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function oh(t,e){xt(t),e=Cn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ah(t,e){return xt(t),e=Cn(t,e),t.g.has(e)}T.forEach=function(t,e){xt(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};T.ta=function(){xt(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};T.Z=function(t){xt(this);let e=[];if(typeof t=="string")ah(this,t)&&(e=e.concat(this.g.get(Cn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};T.set=function(t,e){return xt(this),this.i=null,t=Cn(this,t),ah(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};T.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function lh(t,e,n){oh(t,e),0<n.length&&(t.i=null,t.g.set(Cn(t,e),ta(n)),t.h+=n.length)}T.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Cn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function a0(t,e){e&&!t.j&&(xt(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(oh(this,r),lh(this,s,n))},t)),t.j=e}var l0=class{constructor(t,e){this.g=t,this.map=e}};function ch(t){this.l=t||c0,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(k.g&&k.g.Ka&&k.g.Ka()&&k.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var c0=10;function uh(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function hh(t){return t.h?1:t.g?t.g.size:0}function Ao(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ga(t,e){t.g?t.g.add(e):t.h=e}function dh(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}ch.prototype.cancel=function(){if(this.i=fh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function fh(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ta(t.i)}var u0=class{stringify(t){return k.JSON.stringify(t,void 0)}parse(t){return k.JSON.parse(t,void 0)}};function h0(){this.g=new u0}function d0(t,e,n){const r=n||"";try{sh(t,function(s,i){let o=s;es(s)&&(o=la(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function f0(t,e){const n=new _i;if(k.Image){const r=new Image;r.onload=ps(ms,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ps(ms,n,r,"TestLoadImage: error",!1,e),r.onabort=ps(ms,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ps(ms,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ms(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function os(t){this.l=t.fc||null,this.j=t.ob||!1}ve(os,da);os.prototype.g=function(){return new Ii(this.l,this.j)};os.prototype.i=function(t){return function(){return t}}({});function Ii(t,e){_e.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ve(Ii,_e);var ma=0;T=Ii.prototype;T.open=function(t,e){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ur(this)};T.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||k).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};T.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=ma};T.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof k.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ph(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ph(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}T.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?as(this):Ur(this),this.readyState==3&&ph(this)}};T.Za=function(t){this.g&&(this.response=this.responseText=t,as(this))};T.Ya=function(t){this.g&&(this.response=t,as(this))};T.ka=function(){this.g&&as(this)};function as(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ur(t)}T.setRequestHeader=function(t,e){this.v.append(t,e)};T.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};T.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ur(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var p0=k.JSON.parse;function oe(t){_e.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gh,this.L=this.M=!1}ve(oe,_e);var gh="",g0=/^https?$/i,m0=["POST","PUT"];T=oe.prototype;T.Oa=function(t){this.M=t};T.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Eo.g(),this.C=this.u?ql(this.u):ql(Eo),this.g.onreadystatechange=be(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Gl(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=k.FormData&&t instanceof k.FormData,!(0<=Vu(m0,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yh(this),0<this.B&&((this.L=_0(this.g))?(this.g.timeout=this.B,this.g.ontimeout=be(this.ua,this)):this.A=ha(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Gl(this,i)}};function _0(t){return _n&&typeof t.timeout=="number"&&t.ontimeout!==void 0}T.ua=function(){typeof ea<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ie(this,"timeout"),this.abort(8))};function Gl(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,mh(t),Ci(t)}function mh(t){t.F||(t.F=!0,Ie(t,"complete"),Ie(t,"error"))}T.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ie(this,"complete"),Ie(this,"abort"),Ci(this))};T.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ci(this,!0)),oe.$.N.call(this)};T.La=function(){this.s||(this.G||this.v||this.l?_h(this):this.kb())};T.kb=function(){_h(this)};function _h(t){if(t.h&&typeof ea<"u"&&(!t.C[1]||Ye(t)!=4||t.da()!=2)){if(t.v&&Ye(t)==4)ha(t.La,0,t);else if(Ie(t,"readystatechange"),Ye(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(ih)[1]||null;!s&&k.self&&k.self.location&&(s=k.self.location.protocol.slice(0,-1)),r=!g0.test(s?s.toLowerCase():"")}n=r}if(n)Ie(t,"complete"),Ie(t,"success");else{t.m=6;try{var i=2<Ye(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",mh(t)}}finally{Ci(t)}}}}function Ci(t,e){if(t.g){yh(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ie(t,"ready");try{n.onreadystatechange=r}catch{}}}function yh(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(k.clearTimeout(t.A),t.A=null)}T.isActive=function(){return!!this.g};function Ye(t){return t.g?t.g.readyState:0}T.da=function(){try{return 2<Ye(this)?this.g.status:-1}catch{return-1}};T.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};T.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),p0(e)}};function Kl(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case gh:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function y0(t){const e={};t=(t.g&&2<=Ye(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Vr(t[r]))continue;var n=j1(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}$1(e,function(r){return r.join(", ")})}T.Ia=function(){return this.m};T.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function vh(t){let e="";return ra(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _a(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=vh(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):te(t,e,n))}function pr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wh(t){this.Ga=0,this.j=[],this.l=new _i,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=pr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=pr("baseRetryDelayMs",5e3,t),this.hb=pr("retryDelaySeedMs",1e4,t),this.eb=pr("forwardChannelMaxRetries",2,t),this.xa=pr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new ch(t&&t.concurrentRequestLimit),this.Ja=new h0,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}T=wh.prototype;T.ra=8;T.H=1;function ya(t){if(Eh(t),t.H==3){var e=t.W++,n=yt(t.I);if(te(n,"SID",t.K),te(n,"RID",e),te(n,"TYPE","terminate"),ls(t,n),e=new ss(t,t.l,e),e.L=2,e.v=Ti(yt(n)),n=!1,k.navigator&&k.navigator.sendBeacon)try{n=k.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&k.Image&&(new Image().src=e.v,n=!0),n||(e.g=bh(e.l,null),e.g.ha(e.v)),e.G=Date.now(),is(e)}Ph(t)}function Ai(t){t.g&&(wa(t),t.g.cancel(),t.g=null)}function Eh(t){Ai(t),t.u&&(k.clearTimeout(t.u),t.u=null),Ws(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&k.clearTimeout(t.m),t.m=null)}function Ri(t){if(!uh(t.i)&&!t.m){t.m=!0;var e=t.Na;Nr||qu(),xr||(Nr(),xr=!0),ca.add(e,t),t.C=0}}function v0(t,e){return hh(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ns(be(t.Na,t,e),Rh(t,t.C)),t.C++,!0)}T.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new ss(this,this.l,t);let i=this.s;if(this.U&&(i?(i=$u(i),Lu(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Th(this,s,e),n=yt(this.I),te(n,"RID",t),te(n,"CVER",22),this.F&&te(n,"X-HTTP-Session-Id",this.F),ls(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(vh(i)))+"&"+e:this.o&&_a(n,this.o,i)),ga(this.i,s),this.bb&&te(n,"TYPE","init"),this.P?(te(n,"$req",e),te(n,"SID","null"),s.aa=!0,Io(s,n,null)):Io(s,n,e),this.H=2}}else this.H==3&&(t?Ql(this,t):this.j.length==0||uh(this.i)||Ql(this))};function Ql(t,e){var n;e?n=e.m:n=t.W++;const r=yt(t.I);te(r,"SID",t.K),te(r,"RID",n),te(r,"AID",t.V),ls(t,r),t.o&&t.s&&_a(r,t.o,t.s),n=new ss(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Th(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ga(t.i,n),Io(n,r,e)}function ls(t,e){t.na&&ra(t.na,function(n,r){te(e,r,n)}),t.h&&sh({},function(n,r){te(e,r,n)})}function Th(t,e,n){n=Math.min(t.j.length,n);var r=t.h?be(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{d0(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Ih(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Nr||qu(),xr||(Nr(),xr=!0),ca.add(e,t),t.A=0}}function va(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ns(be(t.Ma,t),Rh(t,t.A)),t.A++,!0)}T.Ma=function(){if(this.u=null,Ch(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ns(be(this.jb,this),t)}};T.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ne(10),Ai(this),Ch(this))};function wa(t){t.B!=null&&(k.clearTimeout(t.B),t.B=null)}function Ch(t){t.g=new ss(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=yt(t.wa);te(e,"RID","rpc"),te(e,"SID",t.K),te(e,"AID",t.V),te(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&te(e,"TO",t.qa),te(e,"TYPE","xmlhttp"),ls(t,e),t.o&&t.s&&_a(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Ti(yt(e)),n.s=null,n.S=!0,eh(n,t)}T.ib=function(){this.v!=null&&(this.v=null,Ai(this),va(this),Ne(19))};function Ws(t){t.v!=null&&(k.clearTimeout(t.v),t.v=null)}function Ah(t,e){var n=null;if(t.g==e){Ws(t),wa(t),t.g=null;var r=2}else if(Ao(t.i,e))n=e.F,dh(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=yi(),Ie(r,new Zu(r,n)),Ri(t)}else Ih(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&v0(t,e)||r==2&&va(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Mt(t,5);break;case 4:Mt(t,10);break;case 3:Mt(t,6);break;default:Mt(t,2)}}}function Rh(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Mt(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=be(t.pb,t);n||(n=new Bt("//www.google.com/images/cleardot.gif"),k.location&&k.location.protocol=="http"||qs(n,"https"),Ti(n)),f0(n.toString(),r)}else Ne(2);t.H=0,t.h&&t.h.za(e),Ph(t),Eh(t)}T.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ne(2)):(this.l.info("Failed to ping google.com"),Ne(1))};function Ph(t){if(t.H=0,t.ma=[],t.h){const e=fh(t.i);(e.length!=0||t.j.length!=0)&&(Ul(t.ma,e),Ul(t.ma,t.j),t.i.i.length=0,ta(t.j),t.j.length=0),t.h.ya()}}function Sh(t,e,n){var r=n instanceof Bt?yt(n):new Bt(n);if(r.g!="")e&&(r.g=e+"."+r.g),zs(r,r.m);else{var s=k.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Bt(null);r&&qs(i,r),e&&(i.g=e),s&&zs(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&te(r,n,e),te(r,"VER",t.ra),ls(t,r),r}function bh(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new oe(new os({ob:!0})):new oe(t.va),e.Oa(t.J),e}T.isActive=function(){return!!this.h&&this.h.isActive(this)};function kh(){}T=kh.prototype;T.Ba=function(){};T.Aa=function(){};T.za=function(){};T.ya=function(){};T.isActive=function(){return!0};T.Va=function(){};function Gs(){if(_n&&!(10<=Number(V1)))throw Error("Environmental error: no available transport.")}Gs.prototype.g=function(t,e){return new Fe(t,e)};function Fe(t,e){_e.call(this),this.g=new wh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Vr(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vr(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new An(this)}ve(Fe,_e);Fe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ne(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Sh(t,null,t.Y),Ri(t)};Fe.prototype.close=function(){ya(this.g)};Fe.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=la(t),t=n);e.j.push(new l0(e.fb++,t)),e.H==3&&Ri(e)};Fe.prototype.N=function(){this.g.h=null,delete this.j,ya(this.g),delete this.g,Fe.$.N.call(this)};function Dh(t){fa.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ve(Dh,fa);function Vh(){pa.call(this),this.status=1}ve(Vh,pa);function An(t){this.g=t}ve(An,kh);An.prototype.Ba=function(){Ie(this.g,"a")};An.prototype.Aa=function(t){Ie(this.g,new Dh(t))};An.prototype.za=function(t){Ie(this.g,new Vh)};An.prototype.ya=function(){Ie(this.g,"b")};function w0(){this.blockSize=-1}function it(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ve(it,w0);it.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Zi(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}it.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Zi(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Zi(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Zi(this,r),s=0;break}}this.h=s,this.i+=e};it.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function W(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var E0={};function Ea(t){return-128<=t&&128>t?b1(t,function(e){return new W([e|0],0>e?-1:0)}):new W([t|0],0>t?-1:0)}function et(t){if(isNaN(t)||!isFinite(t))return un;if(0>t)return Te(et(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ro;return new W(e,0)}function Oh(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Te(Oh(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=et(Math.pow(e,8)),r=un,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=et(Math.pow(e,i)),r=r.R(i).add(et(o))):(r=r.R(n),r=r.add(et(o)))}return r}var Ro=4294967296,un=Ea(0),Po=Ea(1),Zl=Ea(16777216);T=W.prototype;T.ea=function(){if(Be(this))return-Te(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ro+r)*e,e*=Ro}return t};T.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ut(this))return"0";if(Be(this))return"-"+Te(this).toString(t);for(var e=et(Math.pow(t,6)),n=this,r="";;){var s=Qs(n,e).g;n=Ks(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,ut(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};T.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ut(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Be(t){return t.h==-1}T.X=function(t){return t=Ks(this,t),Be(t)?-1:ut(t)?0:1};function Te(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new W(n,~t.h).add(Po)}T.abs=function(){return Be(this)?Te(this):this};T.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new W(n,n[n.length-1]&-2147483648?-1:0)};function Ks(t,e){return t.add(Te(e))}T.R=function(t){if(ut(this)||ut(t))return un;if(Be(this))return Be(t)?Te(this).R(Te(t)):Te(Te(this).R(t));if(Be(t))return Te(this.R(Te(t)));if(0>this.X(Zl)&&0>t.X(Zl))return et(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,_s(n,2*r+2*s),n[2*r+2*s+1]+=i*l,_s(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,_s(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,_s(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new W(n,0)};function _s(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function gr(t,e){this.g=t,this.h=e}function Qs(t,e){if(ut(e))throw Error("division by zero");if(ut(t))return new gr(un,un);if(Be(t))return e=Qs(Te(t),e),new gr(Te(e.g),Te(e.h));if(Be(e))return e=Qs(t,Te(e)),new gr(Te(e.g),e.h);if(30<t.g.length){if(Be(t)||Be(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Po,r=e;0>=r.X(t);)n=Xl(n),r=Xl(r);var s=nn(n,1),i=nn(r,1);for(r=nn(r,2),n=nn(n,2);!ut(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=nn(r,1),n=nn(n,1)}return e=Ks(t,s.R(e)),new gr(s,e)}for(s=un;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=et(n),o=i.R(e);Be(o)||0<o.X(t);)n-=r,i=et(n),o=i.R(e);ut(i)&&(i=Po),s=s.add(i),t=Ks(t,o)}return new gr(s,t)}T.gb=function(t){return Qs(this,t).h};T.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new W(n,this.h&t.h)};T.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new W(n,this.h|t.h)};T.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new W(n,this.h^t.h)};function Xl(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new W(n,t.h)}function nn(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new W(s,t.h)}Gs.prototype.createWebChannel=Gs.prototype.g;Fe.prototype.send=Fe.prototype.u;Fe.prototype.open=Fe.prototype.m;Fe.prototype.close=Fe.prototype.close;vi.NO_ERROR=0;vi.TIMEOUT=8;vi.HTTP_ERROR=6;Xu.COMPLETE="complete";Ju.EventType=rs;rs.OPEN="a";rs.CLOSE="b";rs.ERROR="c";rs.MESSAGE="d";_e.prototype.listen=_e.prototype.O;oe.prototype.listenOnce=oe.prototype.P;oe.prototype.getLastError=oe.prototype.Sa;oe.prototype.getLastErrorCode=oe.prototype.Ia;oe.prototype.getStatus=oe.prototype.da;oe.prototype.getResponseJson=oe.prototype.Wa;oe.prototype.getResponseText=oe.prototype.ja;oe.prototype.send=oe.prototype.ha;oe.prototype.setWithCredentials=oe.prototype.Oa;it.prototype.digest=it.prototype.l;it.prototype.reset=it.prototype.reset;it.prototype.update=it.prototype.j;W.prototype.add=W.prototype.add;W.prototype.multiply=W.prototype.R;W.prototype.modulo=W.prototype.gb;W.prototype.compare=W.prototype.X;W.prototype.toNumber=W.prototype.ea;W.prototype.toString=W.prototype.toString;W.prototype.getBits=W.prototype.D;W.fromNumber=et;W.fromString=Oh;var T0=function(){return new Gs},I0=function(){return yi()},Xi=vi,C0=Xu,A0=en,Jl={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},R0=os,ys=Ju,P0=oe,S0=W;const Yl="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn="10.1.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt=new Ho("@firebase/firestore");function ec(){return Kt.logLevel}function S(t,...e){if(Kt.logLevel<=B.DEBUG){const n=e.map(Ta);Kt.debug(`Firestore (${Rn}): ${t}`,...n)}}function Qt(t,...e){if(Kt.logLevel<=B.ERROR){const n=e.map(Ta);Kt.error(`Firestore (${Rn}): ${t}`,...n)}}function Zs(t,...e){if(Kt.logLevel<=B.WARN){const n=e.map(Ta);Kt.warn(`Firestore (${Rn}): ${t}`,...n)}}function Ta(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t="Unexpected state"){const e=`FIRESTORE (${Rn}) INTERNAL ASSERTION FAILED: `+t;throw Qt(e),new Error(e)}function ye(t,e){t||L()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends at{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Re.UNAUTHENTICATED))}shutdown(){}}class k0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class D0{constructor(e){this.t=e,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ht,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ht)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Nh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Re(e)}}class V0{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Re.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class O0{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new V0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Re.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,S("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new N0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=$0(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function yn(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new me(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new me(0,0))}static max(){return new se(new me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r){n===void 0?n=0:n>e.length&&L(),r===void 0?r=e.length-n:r>e.length-n&&L(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class de extends Fr{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const L0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Se extends Fr{construct(e,n,r){return new Se(e,n,r)}static isValidIdentifier(e){return L0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Se(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new D(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new D(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new D(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new D(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Se(n)}static emptyPath(){return new Se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.path=e}static fromPath(e){return new O(de.fromString(e))}static fromName(e){return new O(de.fromString(e).popFirst(5))}static empty(){return new O(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new O(new de(e.slice()))}}function M0(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new kt(s,O.empty(),e)}function U0(t){return new kt(t.readTime,t.key,-1)}class kt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kt(se.min(),O.empty(),-1)}static max(){return new kt(se.max(),O.empty(),-1)}}function F0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=O.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==B0)throw t;S("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&L(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,r)=>{n(e)})}static reject(e){return new E((n,r)=>{r(e)})}static waitFor(e){return new E((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=E.resolve(!1);for(const r of e)n=n.next(s=>s?E.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new E((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new E((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Pi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Lh.ae=-1;function Ia(t){return t==null}function Xs(t){return t===0&&1/t==-1/0}function j0(t){return typeof t=="number"&&Number.isInteger(t)&&!Xs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||we.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,we.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,we.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vs(this.root,e,this.comparator,!1)}getReverseIterator(){return new vs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vs(this.root,e,this.comparator,!0)}}class vs{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class we{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??we.RED,this.left=s??we.EMPTY,this.right=i??we.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new we(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return we.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return we.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,we.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,we.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw L();const e=this.left.check();if(e!==this.right.check())throw L();return e+(this.isRed()?0:1)}}we.EMPTY=null,we.RED=!0,we.BLACK=!1;we.EMPTY=new class{constructor(){this.size=0}get key(){throw L()}get value(){throw L()}get color(){throw L()}get left(){throw L()}get right(){throw L()}copy(e,n,r,s,i){return this}insert(e,n,r){return new we(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nc(this.data.getIterator())}getIteratorFrom(e){return new nc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xe(this.comparator);return n.data=e,n}}class nc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.fields=e,e.sort(Se.comparator)}static empty(){return new We([])}unionWith(e){let n=new xe(Se.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new We(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yn(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new q0("Invalid base64 string: "+i):i}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const z0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zt(t){if(ye(!!t),typeof t=="string"){let e=0;const n=z0.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Br(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uh(t){const e=t.mapValue.fields.__previous_value__;return Ca(e)?Uh(e):e}function Js(t){const e=Zt(t.mapValue.fields.__local_write_time__.timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ys{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ys("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ys&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function vn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ca(t)?4:G0(t)?9007199254740991:10:L()}function ot(t,e){if(t===e)return!0;const n=vn(t);if(n!==vn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Js(t).isEqual(Js(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Zt(s.timestampValue),a=Zt(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Br(s.bytesValue).isEqual(Br(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ee(s.geoPointValue.latitude)===Ee(i.geoPointValue.latitude)&&Ee(s.geoPointValue.longitude)===Ee(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ee(s.integerValue)===Ee(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ee(s.doubleValue),a=Ee(i.doubleValue);return o===a?Xs(o)===Xs(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return yn(t.arrayValue.values||[],e.arrayValue.values||[],ot);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(tc(o)!==tc(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ot(o[l],a[l])))return!1;return!0}(t,e);default:return L()}}function Hr(t,e){return(t.values||[]).find(n=>ot(n,e))!==void 0}function wn(t,e){if(t===e)return 0;const n=vn(t),r=vn(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ee(i.integerValue||i.doubleValue),l=Ee(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rc(t.timestampValue,e.timestampValue);case 4:return rc(Js(t),Js(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Br(i),l=Br(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ee(a[c],l[c]);if(u!==0)return u}return ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ee(Ee(i.latitude),Ee(o.latitude));return a!==0?a:ee(Ee(i.longitude),Ee(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=wn(a[c],l[c]);if(u)return u}return ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ws.mapValue&&o===ws.mapValue)return 0;if(i===ws.mapValue)return 1;if(o===ws.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=ee(l[h],u[h]);if(f!==0)return f;const m=wn(a[l[h]],c[u[h]]);if(m!==0)return m}return ee(l.length,u.length)}(t.mapValue,e.mapValue);default:throw L()}}function rc(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Zt(t),r=Zt(e),s=ee(n.seconds,r.seconds);return s!==0?s:ee(n.nanos,r.nanos)}function En(t){return So(t)}function So(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zt(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return O.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=So(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${So(n.fields[o])}`;return s+"}"}(t.mapValue):L()}function bo(t){return!!t&&"integerValue"in t}function Aa(t){return!!t&&"arrayValue"in t}function ks(t){return!!t&&"mapValue"in t}function Ir(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ir(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ir(t.arrayValue.values[n]);return e}return Object.assign({},t)}function G0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.value=e}static empty(){return new ze({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ks(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ir(n)}setAll(e){let n=Se.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ir(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ks(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ot(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ks(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){cs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ze(Ir(this.value))}}function Fh(t){const e=[];return cs(t.fields,(n,r)=>{const s=new Se([n]);if(ks(r)){const i=Fh(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new We(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qe(e,0,se.min(),se.min(),se.min(),ze.empty(),0)}static newFoundDocument(e,n,r,s){return new qe(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new qe(e,2,n,se.min(),se.min(),ze.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,se.min(),se.min(),ze.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ze.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ze.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.position=e,this.inclusive=n}}function sc(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=O.comparator(O.fromName(o.referenceValue),n.key):r=wn(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ic(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ot(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n="asc"){this.field=e,this.dir=n}}function K0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{}class ge extends Bh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Z0(e,n,r):n==="array-contains"?new Y0(e,r):n==="in"?new e2(e,r):n==="not-in"?new t2(e,r):n==="array-contains-any"?new n2(e,r):new ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new X0(e,r):new J0(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wn(n,this.value)):n!==null&&vn(this.value)===vn(n)&&this.matchesComparison(wn(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return L()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Dt extends Bh{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Dt(e,n)}matches(e){return Hh(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Hh(t){return t.op==="and"}function jh(t){return Q0(t)&&Hh(t)}function Q0(t){for(const e of t.filters)if(e instanceof Dt)return!1;return!0}function ko(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+En(t.value);if(jh(t))return t.filters.map(e=>ko(e)).join(",");{const e=t.filters.map(n=>ko(n)).join(",");return`${t.op}(${e})`}}function qh(t,e){return t instanceof ge?function(r,s){return s instanceof ge&&r.op===s.op&&r.field.isEqual(s.field)&&ot(r.value,s.value)}(t,e):t instanceof Dt?function(r,s){return s instanceof Dt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&qh(o,s.filters[a]),!0):!1}(t,e):void L()}function zh(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${En(n.value)}`}(t):t instanceof Dt?function(n){return n.op.toString()+" {"+n.getFilters().map(zh).join(" ,")+"}"}(t):"Filter"}class Z0 extends ge{constructor(e,n,r){super(e,n,r),this.key=O.fromName(r.referenceValue)}matches(e){const n=O.comparator(e.key,this.key);return this.matchesComparison(n)}}class X0 extends ge{constructor(e,n){super(e,"in",n),this.keys=Wh("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class J0 extends ge{constructor(e,n){super(e,"not-in",n),this.keys=Wh("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Wh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>O.fromName(r.referenceValue))}class Y0 extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Aa(n)&&Hr(n.arrayValue,this.value)}}class e2 extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hr(this.value.arrayValue,n)}}class t2 extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hr(this.value.arrayValue,n)}}class n2 extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Aa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function oc(t,e=null,n=[],r=[],s=null,i=null,o=null){return new r2(t,e,n,r,s,i,o)}function Ra(t){const e=ne(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ko(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ia(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>En(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>En(r)).join(",")),e.he=n}return e.he}function Pa(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qh(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ic(t.startAt,e.startAt)&&ic(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function s2(t,e,n,r,s,i,o,a){return new Si(t,e,n,r,s,i,o,a)}function i2(t){return new Si(t)}function ac(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function a2(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function l2(t){return t.collectionGroup!==null}function hn(t){const e=ne(t);if(e.Pe===null){e.Pe=[];const n=a2(e),r=o2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Cr(n)),e.Pe.push(new Cr(Se.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Cr(Se.keyField(),i))}}}return e.Pe}function Tn(t){const e=ne(t);if(!e.Ie)if(e.limitType==="F")e.Ie=oc(e.path,e.collectionGroup,hn(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of hn(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Cr(i.field,o))}const r=e.endAt?new ei(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ei(e.startAt.position,e.startAt.inclusive):null;e.Ie=oc(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.Ie}function Do(t,e,n){return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gh(t,e){return Pa(Tn(t),Tn(e))&&t.limitType===e.limitType}function Kh(t){return`${Ra(Tn(t))}|lt:${t.limitType}`}function lc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>zh(s)).join(", ")}]`),Ia(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>En(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>En(s)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function Sa(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):O.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of hn(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=sc(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hn(r),s)||r.endAt&&!function(o,a,l){const c=sc(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hn(r),s))}(t,e)}function c2(t){return(e,n)=>{let r=!1;for(const s of hn(t)){const i=u2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function u2(t,e,n){const r=t.field.isKeyField()?O.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?wn(l,c):L()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return L()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Mh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new Me(O.comparator);function ti(){return h2}const Qh=new Me(O.comparator);function Es(...t){let e=Qh;for(const n of t)e=e.insert(n.key,n);return e}function Zh(t){let e=Qh;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ut(){return Ar()}function Xh(){return Ar()}function Ar(){return new Pn(t=>t.toString(),(t,e)=>t.isEqual(e))}const d2=new Me(O.comparator),f2=new xe(O.comparator);function Pe(...t){let e=f2;for(const n of t)e=e.add(n);return e}const p2=new xe(ee);function g2(){return p2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xs(e)?"-0":e}}function Yh(t){return{integerValue:""+t}}function m2(t,e){return j0(e)?Yh(e):Jh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this._=void 0}}function _2(t,e,n){return t instanceof ni?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ca(i)&&(i=Uh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof jr?td(t,e):t instanceof qr?nd(t,e):function(s,i){const o=ed(s,i),a=cc(o)+cc(s.Te);return bo(o)&&bo(s.Te)?Yh(a):Jh(s.serializer,a)}(t,e)}function y2(t,e,n){return t instanceof jr?td(t,e):t instanceof qr?nd(t,e):n}function ed(t,e){return t instanceof ri?function(r){return bo(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ni extends bi{}class jr extends bi{constructor(e){super(),this.elements=e}}function td(t,e){const n=rd(e);for(const r of t.elements)n.some(s=>ot(s,r))||n.push(r);return{arrayValue:{values:n}}}class qr extends bi{constructor(e){super(),this.elements=e}}function nd(t,e){let n=rd(e);for(const r of t.elements)n=n.filter(s=>!ot(s,r));return{arrayValue:{values:n}}}class ri extends bi{constructor(e,n){super(),this.serializer=e,this.Te=n}}function cc(t){return Ee(t.integerValue||t.doubleValue)}function rd(t){return Aa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function v2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jr&&s instanceof jr||r instanceof qr&&s instanceof qr?yn(r.elements,s.elements,ot):r instanceof ri&&s instanceof ri?ot(r.Te,s.Te):r instanceof ni&&s instanceof ni}(t.transform,e.transform)}class w2{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ds(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ki{}function sd(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new od(t.key,pt.none()):new us(t.key,t.data,pt.none());{const n=t.data,r=ze.empty();let s=new xe(Se.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new tn(t.key,r,new We(s.toArray()),pt.none())}}function E2(t,e,n){t instanceof us?function(s,i,o){const a=s.value.clone(),l=hc(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof tn?function(s,i,o){if(!Ds(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=hc(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(id(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Rr(t,e,n,r){return t instanceof us?function(i,o,a,l){if(!Ds(i.precondition,o))return a;const c=i.value.clone(),u=dc(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof tn?function(i,o,a,l){if(!Ds(i.precondition,o))return a;const c=dc(i.fieldTransforms,l,o),u=o.data;return u.setAll(id(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Ds(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function T2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ed(r.transform,s||null);i!=null&&(n===null&&(n=ze.empty()),n.set(r.field,i))}return n||null}function uc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&yn(r,s,(i,o)=>v2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class us extends ki{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tn extends ki{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function id(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hc(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,y2(o,a,n[s]))}return r}function dc(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,_2(i,o,e))}return r}class od extends ki{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I2 extends ki{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&E2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rr(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rr(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xh();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=sd(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&yn(this.mutations,e.mutations,(n,r)=>uc(n,r))&&yn(this.baseMutations,e.baseMutations,(n,r)=>uc(n,r))}}class ba{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return d2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ba(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue,M;function R2(t){switch(t){default:return L();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function P2(t){if(t===void 0)return Qt("GRPC error has no .code"),w.UNKNOWN;switch(t){case ue.OK:return w.OK;case ue.CANCELLED:return w.CANCELLED;case ue.UNKNOWN:return w.UNKNOWN;case ue.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case ue.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case ue.INTERNAL:return w.INTERNAL;case ue.UNAVAILABLE:return w.UNAVAILABLE;case ue.UNAUTHENTICATED:return w.UNAUTHENTICATED;case ue.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case ue.NOT_FOUND:return w.NOT_FOUND;case ue.ALREADY_EXISTS:return w.ALREADY_EXISTS;case ue.PERMISSION_DENIED:return w.PERMISSION_DENIED;case ue.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case ue.ABORTED:return w.ABORTED;case ue.OUT_OF_RANGE:return w.OUT_OF_RANGE;case ue.UNIMPLEMENTED:return w.UNIMPLEMENTED;case ue.DATA_LOSS:return w.DATA_LOSS;default:return L()}}(M=ue||(ue={}))[M.OK=0]="OK",M[M.CANCELLED=1]="CANCELLED",M[M.UNKNOWN=2]="UNKNOWN",M[M.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",M[M.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",M[M.NOT_FOUND=5]="NOT_FOUND",M[M.ALREADY_EXISTS=6]="ALREADY_EXISTS",M[M.PERMISSION_DENIED=7]="PERMISSION_DENIED",M[M.UNAUTHENTICATED=16]="UNAUTHENTICATED",M[M.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",M[M.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",M[M.ABORTED=10]="ABORTED",M[M.OUT_OF_RANGE=11]="OUT_OF_RANGE",M[M.UNIMPLEMENTED=12]="UNIMPLEMENTED",M[M.INTERNAL=13]="INTERNAL",M[M.UNAVAILABLE=14]="UNAVAILABLE",M[M.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new S0([4294967295,4294967295],0);class S2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function k2(t,e){return Vo(t,e.toTimestamp())}function dn(t){return ye(!!t),se.fromTimestamp(function(n){const r=Zt(n);return new me(r.seconds,r.nanos)}(t))}function ad(t,e){return function(r){return new de(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function D2(t){const e=de.fromString(t);return ye(U2(e)),e}function Oo(t,e){return ad(t.databaseId,e.path)}function V2(t){const e=D2(t);return e.length===4?de.emptyPath():N2(e)}function O2(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function N2(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fc(t,e,n){return{name:Oo(t,e),fields:n.value.mapValue.fields}}function x2(t,e){let n;if(e instanceof us)n={update:fc(t,e.key,e.value)};else if(e instanceof od)n={delete:Oo(t,e.key)};else if(e instanceof tn)n={update:fc(t,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof I2))return L();n={verify:Oo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ni)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ri)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw L()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:k2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:L()}(t,e.precondition)),n}function $2(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?dn(s.updateTime):dn(i);return o.isEqual(se.min())&&(o=dn(i)),new w2(o,s.transformResults||[])}(n,e))):[]}function L2(t){let e=V2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=ld(h);return f instanceof Dt&&jh(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(p){return new Cr(rn(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Ia(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new ei(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new ei(m,f)}(n.endAt)),s2(e,s,o,i,a,"F",l,c)}function ld(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rn(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=rn(n.unaryFilter.field);return ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=rn(n.unaryFilter.field);return ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rn(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return L()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(rn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return L()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dt.create(n.compositeFilter.filters.map(r=>ld(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return L()}}(n.compositeFilter.op))}(t):L()}function rn(t){return Se.fromServerFormat(t.fieldPath)}function M2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function U2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.ct=e}}function B2(t){const e=L2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Do(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.sn=new j2}addToCollectionParentIndex(e,n){return this.sn.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(kt.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(kt.min())}updateCollectionGroup(e,n,r){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class j2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xe(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xe(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new In(0)}static On(){return new In(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.changes=new Pn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?E.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Rr(r.mutation,s,We.empty(),me.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const s=Ut();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Es();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ut();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ti();const o=Ar(),a=function(){return Ar()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof tn)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Rr(u.mutation,c,u.mutation.getFieldMask(),me.now())):o.set(c.key,We.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new z2(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ar();let s=new Me((o,a)=>o-a),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||We.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||Pe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Xh();u.forEach(f=>{if(!i.has(f)){const m=sd(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return O.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):E.resolve(Ut());let a=-1,l=i;return o.next(c=>E.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?E.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Pe())).next(u=>({batchId:a,changes:Zh(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new O(n)).next(r=>{let s=Es();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Es();return this.indexManager.getCollectionParents(e,s).next(o=>E.forEach(o,a=>{const l=function(u,h){return new Si(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,h)=>{i=i.insert(u,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,qe.newInvalidDocument(c)))});let o=Es();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Rr(c.mutation,l,We.empty(),me.now()),Sa(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,n){return E.resolve(this.ar.get(n))}saveBundleMetadata(e,n){return this.ar.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dn(s.createTime)}}(n)),E.resolve()}getNamedQuery(e,n){return E.resolve(this.ur.get(n))}saveNamedQuery(e,n){return this.ur.set(n.name,function(s){return{name:s.name,query:B2(s.bundledQuery),readTime:dn(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.overlays=new Me(O.comparator),this.cr=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ut();return E.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),E.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.cr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.cr.delete(r)),E.resolve()}getOverlaysForCollection(e,n,r){const s=Ut(),i=n.length+1,o=new O(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return E.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Me((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Ut(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ut(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return E.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.cr.get(s.largestBatchId).delete(r.key);this.cr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new A2(n,r));let i=this.cr.get(n);i===void 0&&(i=Pe(),this.cr.set(n,i)),this.cr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.lr=new xe(fe.hr),this.Pr=new xe(fe.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,n){const r=new fe(e,n);this.lr=this.lr.add(r),this.Pr=this.Pr.add(r)}Tr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Er(new fe(e,n))}dr(e,n){e.forEach(r=>this.removeReference(r,n))}Ar(e){const n=new O(new de([])),r=new fe(n,e),s=new fe(n,e+1),i=[];return this.Pr.forEachInRange([r,s],o=>{this.Er(o),i.push(o.key)}),i}Rr(){this.lr.forEach(e=>this.Er(e))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const n=new O(new de([])),r=new fe(n,e),s=new fe(n,e+1);let i=Pe();return this.Pr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new fe(e,0),r=this.lr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fe{constructor(e,n){this.key=e,this.mr=n}static hr(e,n){return O.comparator(e.key,n.key)||ee(e.mr,n.mr)}static Ir(e,n){return ee(e.mr,n.mr)||O.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new xe(fe.hr)}checkEmpty(e){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new C2(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.pr=this.pr.add(new fe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.yr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.wr(r),i=s<0?0:s;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.gr-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fe(n,0),s=new fe(n,Number.POSITIVE_INFINITY),i=[];return this.pr.forEachInRange([r,s],o=>{const a=this.yr(o.mr);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xe(ee);return n.forEach(s=>{const i=new fe(s,0),o=new fe(s,Number.POSITIVE_INFINITY);this.pr.forEachInRange([i,o],a=>{r=r.add(a.mr)})}),E.resolve(this.Sr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;O.isDocumentKey(i)||(i=i.child(""));const o=new fe(new O(i),0);let a=new xe(ee);return this.pr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.mr)),!0)},o),E.resolve(this.Sr(a))}Sr(e){const n=[];return e.forEach(r=>{const s=this.yr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.br(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.pr;return E.forEach(n.mutations,s=>{const i=new fe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.pr=r})}Cn(e){}containsKey(e,n){const r=new fe(n,0),s=this.pr.firstAfterOrEqual(r);return E.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,E.resolve()}br(e,n){return this.wr(e)}wr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}yr(e){const n=this.wr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.Dr=e,this.docs=function(){return new Me(O.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Dr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=ti();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qe.newInvalidDocument(s))}),E.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ti();const o=n.path,a=new O(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||F0(U0(u),r)<=0||(s.has(u.key)||Sa(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return E.resolve(i)}getAllFromCollectionGroup(e,n,r,s){L()}vr(e,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new X2(this)}getSize(e){return E.resolve(this.size)}}class X2 extends q2{constructor(e){super(),this.sr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.sr.addEntry(e,s)):this.sr.removeEntry(r)}),E.waitFor(n)}getFromCache(e,n){return this.sr.getEntry(e,n)}getAllFromCache(e,n){return this.sr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.persistence=e,this.Cr=new Pn(n=>Ra(n),Pa),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new ka,this.targetCount=0,this.Or=In.xn()}forEachTarget(e,n){return this.Cr.forEach((r,s)=>n(s)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Fr&&(this.Fr=n),E.resolve()}Ln(e){this.Cr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Or=new In(n),this.highestTargetId=n),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,n){return this.Ln(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.Ln(n),E.resolve()}removeTargetData(e,n){return this.Cr.delete(n.target),this.Mr.Ar(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Cr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Cr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),E.waitFor(i).next(()=>s)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const r=this.Cr.get(n)||null;return E.resolve(r)}addMatchingKeys(e,n,r){return this.Mr.Tr(n,r),E.resolve()}removeMatchingKeys(e,n,r){this.Mr.dr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Mr.Ar(n),E.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Mr.Vr(n);return E.resolve(r)}containsKey(e,n){return E.resolve(this.Mr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.Nr={},this.overlays={},this.Br=new Lh(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new J2(this),this.indexManager=new H2,this.remoteDocumentCache=function(s){return new Z2(s)}(r=>this.referenceDelegate.qr(r)),this.serializer=new F2(n),this.Qr=new G2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new K2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Nr[e.toKey()];return r||(r=new Q2(n,this.referenceDelegate),this.Nr[e.toKey()]=r),r}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,n,r){S("MemoryPersistence","Starting transaction:",e);const s=new ey(this.Br.next());return this.referenceDelegate.Kr(),r(s).next(i=>this.referenceDelegate.$r(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ur(e,n){return E.or(Object.values(this.Nr).map(r=>()=>r.containsKey(e,n)))}}class ey extends H0{constructor(e){super(),this.currentSequenceNumber=e}}class Da{constructor(e){this.persistence=e,this.Wr=new ka,this.Gr=null}static zr(e){return new Da(e)}get jr(){if(this.Gr)return this.Gr;throw L()}addReference(e,n,r){return this.Wr.addReference(r,n),this.jr.delete(r.toString()),E.resolve()}removeReference(e,n,r){return this.Wr.removeReference(r,n),this.jr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.jr.add(n.toString()),E.resolve()}removeTarget(e,n){this.Wr.Ar(n.targetId).forEach(s=>this.jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Kr(){this.Gr=new Set}$r(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.jr,r=>{const s=O.fromPath(r);return this.Hr(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Gr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hr(e,n).next(r=>{r?this.jr.delete(n.toString()):this.jr.add(n.toString())})}qr(e){return 0}Hr(e,n){return E.or([()=>E.resolve(this.Wr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ur(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Li=r,this.ki=s}static qi(e,n){let r=Pe(),s=Pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Va(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Qi=!1}initialize(e,n){this.Ki=e,this.indexManager=n,this.Qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.$i(e,n).next(i=>i||this.Ui(e,n,s,r)).next(i=>i||this.Wi(e,n))}$i(e,n){if(ac(n))return E.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Do(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Pe(...i);return this.Ki.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Gi(n,a);return this.zi(n,c,o,l.readTime)?this.$i(e,Do(n,null,"F")):this.ji(e,c,n,l)}))})))}Ui(e,n,r,s){return ac(n)||s.isEqual(se.min())?this.Wi(e,n):this.Ki.getDocuments(e,r).next(i=>{const o=this.Gi(n,i);return this.zi(n,o,r,s)?this.Wi(e,n):(ec()<=B.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),lc(n)),this.ji(e,o,n,M0(s,-1)))})}Gi(e,n){let r=new xe(c2(e));return n.forEach((s,i)=>{Sa(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Wi(e,n){return ec()<=B.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",lc(n)),this.Ki.getDocumentsMatchingQuery(e,n,kt.min())}ji(e,n,r,s){return this.Ki.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new Me(ee),this.Yi=new Pn(i=>Ra(i),Pa),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(r)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W2(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function ry(t,e,n,r){return new ny(t,e,n,r)}async function cd(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.es(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Pe();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function sy(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let m=E.resolve();return f.forEach(p=>{m=m.next(()=>u.getEntry(l,p)).next(v=>{const y=c.docVersions.get(p);ye(y!==null),v.version.compareTo(y)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function iy(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.kr.getLastRemoteSnapshotVersion(n))}function oy(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class pc{constructor(){this.activeTargetIds=g2()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ay{constructor(){this.Hs=new pc,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,n,r){this.Js[e]=n}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new pc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{Ys(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts=null;function Ji(){return Ts===null?Ts=function(){return 268435456+Math.round(2147483648*Math.random())}():Ts++,"0x"+Ts.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae="WebChannelConnection";class hy extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.To=r+"://"+n.host,this.Eo=`projects/${s}/databases/${i}`,this.Ao=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Ro(){return!1}Vo(n,r,s,i,o){const a=Ji(),l=this.mo(n,r);S("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(c,i,o),this.po(n,l,c,s).then(u=>(S("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Zs("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}yo(n,r,s,i,o,a){return this.Vo(n,r,s,i,o)}fo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rn}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}mo(n,r){const s=cy[n];return`${this.To}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}po(e,n,r,s){const i=Ji();return new Promise((o,a)=>{const l=new P0;l.setWithCredentials(!0),l.listenOnce(C0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xi.NO_ERROR:const u=l.getResponseJson();S(Ae,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Xi.TIMEOUT:S(Ae,`RPC '${e}' ${i} timed out`),a(new D(w.DEADLINE_EXCEEDED,"Request time out"));break;case Xi.HTTP_ERROR:const h=l.getStatus();if(S(Ae,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const p=function(y){const C=y.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(C)>=0?C:w.UNKNOWN}(m.status);a(new D(p,m.message))}else a(new D(w.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new D(w.UNAVAILABLE,"Connection failed."));break;default:L()}}finally{S(Ae,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);S(Ae,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}wo(e,n,r){const s=Ji(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=T0(),a=I0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new R0({})),this.fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");S(Ae,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,m=!1;const p=new uy({so:y=>{m?S(Ae,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(S(Ae,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),S(Ae,`RPC '${e}' stream ${s} sending:`,y),h.send(y))},oo:()=>h.close()}),v=(y,C,N)=>{y.listen(C,x=>{try{N(x)}catch(R){setTimeout(()=>{throw R},0)}})};return v(h,ys.EventType.OPEN,()=>{m||S(Ae,`RPC '${e}' stream ${s} transport opened.`)}),v(h,ys.EventType.CLOSE,()=>{m||(m=!0,S(Ae,`RPC '${e}' stream ${s} transport closed`),p.Po())}),v(h,ys.EventType.ERROR,y=>{m||(m=!0,Zs(Ae,`RPC '${e}' stream ${s} transport errored:`,y),p.Po(new D(w.UNAVAILABLE,"The operation could not be completed")))}),v(h,ys.EventType.MESSAGE,y=>{var C;if(!m){const N=y.data[0];ye(!!N);const x=N,R=x.error||((C=x[0])===null||C===void 0?void 0:C.error);if(R){S(Ae,`RPC '${e}' stream ${s} received error:`,R);const Z=R.status;let U=function(I){const X=ue[I];if(X!==void 0)return P2(X)}(Z),ce=R.message;U===void 0&&(U=w.INTERNAL,ce="Unknown error status: "+Z+" with message "+R.message),m=!0,p.Po(new D(U,ce)),h.close()}else S(Ae,`RPC '${e}' stream ${s} received:`,N),p.Io(N)}}),v(a,A0.STAT_EVENT,y=>{y.stat===Jl.PROXY?S(Ae,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===Jl.NOPROXY&&S(Ae,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.ho()},0),p}}function Yi(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){return new S2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.So=r,this.bo=s,this.Do=i,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}reset(){this.vo=0}Mo(){this.vo=this.Do}xo(e){this.cancel();const n=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),s=Math.max(0,n-r);s>0&&S("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.vo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Co=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Fo=Date.now(),e())),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}No(){this.Co!==null&&(this.Co.skipDelay(),this.Co=null)}cancel(){this.Co!==null&&(this.Co.cancel(),this.Co=null)}Oo(){return(Math.random()-.5)*this.vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,r,s,i,o,a,l){this.ii=e,this.Bo=r,this.Lo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new ud(e,n)}$o(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Wo()}async stop(){this.$o()&&await this.close(0)}Go(){this.state=0,this.Ko.reset()}zo(){this.Uo()&&this.qo===null&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,()=>this.jo()))}Ho(e){this.Jo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}async close(e,n){this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,e!==4?this.Ko.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Qt(n.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Zo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.uo(n)}Zo(){}auth(){this.state=1;const e=this.Xo(this.ko),n=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.ko===n&&this.e_(r,s)},r=>{e(()=>{const s=new D(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.t_(s)})})}e_(e,n){const r=this.Xo(this.ko);this.stream=this.n_(e,n),this.stream._o(()=>{r(()=>(this.state=2,this.Qo=this.ii.enqueueAfterDelay(this.Lo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener._o()))}),this.stream.uo(s=>{r(()=>this.t_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Wo(){this.state=5,this.Ko.xo(async()=>{this.state=0,this.start()})}t_(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.ko===e?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fy extends dy{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.o_=!1}get __(){return this.o_}start(){this.o_=!1,this.lastStreamToken=void 0,super.start()}Zo(){this.o_&&this.a_([])}n_(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();const n=$2(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.u_(r,n)}return ye(!e.writeResults||e.writeResults.length===0),this.o_=!0,this.listener.c_()}l_(){const e={};e.database=O2(this.serializer),this.Ho(e)}a_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>x2(this.serializer,r))};this.Ho(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.h_=!1}P_(){if(this.h_)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}Vo(e,n,r){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Vo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(w.UNKNOWN,s.toString())})}yo(e,n,r,s){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.yo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(w.UNKNOWN,i.toString())})}terminate(){this.h_=!0}}class gy{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}A_(){this.T_===0&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.E_=null,this.V_("Backend didn't respond within 10 seconds."),this.R_("Offline"),Promise.resolve())))}m_(e){this.state==="Online"?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.R_("Offline")))}set(e){this.f_(),this.T_=0,e==="Online"&&(this.d_=!1),this.R_(e)}R_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}V_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.d_?(Qt(n),this.d_=!1):S("OnlineStateTracker",n)}f_(){this.E_!==null&&(this.E_.cancel(),this.E_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=i,this.S_.Ys(o=>{r.enqueueAndForget(async()=>{ds(this)&&(S("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ne(l);c.y_.add(4),await hs(c),c.b_.set("Unknown"),c.y_.delete(4),await Vi(c)}(this))})}),this.b_=new gy(r,s)}}async function Vi(t){if(ds(t))for(const e of t.w_)await e(!0)}async function hs(t){for(const e of t.w_)await e(!1)}function ds(t){return ne(t).y_.size===0}async function hd(t,e,n){if(!Pi(e))throw e;t.y_.add(1),await hs(t),t.b_.set("Offline"),n||(n=()=>iy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{S("RemoteStore","Retrying IndexedDB access"),await n(),t.y_.delete(1),await Vi(t)})}function dd(t,e){return e().catch(n=>hd(t,n,e))}async function Oi(t){const e=ne(t),n=Vt(e);let r=e.g_.length>0?e.g_[e.g_.length-1].batchId:-1;for(;_y(e);)try{const s=await oy(e.localStore,r);if(s===null){e.g_.length===0&&n.zo();break}r=s.batchId,yy(e,s)}catch(s){await hd(e,s)}fd(e)&&pd(e)}function _y(t){return ds(t)&&t.g_.length<10}function yy(t,e){t.g_.push(e);const n=Vt(t);n.Uo()&&n.__&&n.a_(e.mutations)}function fd(t){return ds(t)&&!Vt(t).$o()&&t.g_.length>0}function pd(t){Vt(t).start()}async function vy(t){Vt(t).l_()}async function wy(t){const e=Vt(t);for(const n of t.g_)e.a_(n.mutations)}async function Ey(t,e,n){const r=t.g_.shift(),s=ba.from(r,e,n);await dd(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Oi(t)}async function Ty(t,e){e&&Vt(t).__&&await async function(r,s){if(function(o){return R2(o)&&o!==w.ABORTED}(s.code)){const i=r.g_.shift();Vt(r).Go(),await dd(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Oi(r)}}(t,e),fd(t)&&pd(t)}async function mc(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");const r=ds(n);n.y_.add(3),await hs(n),r&&n.b_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.y_.delete(3),await Vi(n)}async function Iy(t,e){const n=ne(t);e?(n.y_.delete(2),await Vi(n)):e||(n.y_.add(2),await hs(n),n.b_.set("Unknown"))}function Vt(t){return t.C_||(t.C_=function(n,r,s){const i=ne(n);return i.P_(),new fy(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{_o:vy.bind(null,t),uo:Ty.bind(null,t),c_:wy.bind(null,t),u_:Ey.bind(null,t)}),t.w_.push(async e=>{e?(t.C_.Go(),await Oi(t)):(await t.C_.stop(),t.g_.length>0&&(S("RemoteStore",`Stopping write stream with ${t.g_.length} pending writes`),t.g_=[]))})),t.C_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Oa(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gd(t,e){if(Qt("AsyncQueue",`${e}: ${t}`),Pi(t))return new D(w.UNAVAILABLE,`${e}: ${t}`);throw t}class Cy{constructor(){this.queries=new Pn(e=>Kh(e),Gh),this.onlineState="Unknown",this.O_=new Set}}function Ay(t){t.O_.forEach(e=>{e.next()})}class Ry{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ta={},this.Ea=new Pn(a=>Kh(a),Gh),this.da=new Map,this.Aa=new Set,this.Ra=new Me(O.comparator),this.Va=new Map,this.ma=new ka,this.fa={},this.ga=new Map,this.pa=In.On(),this.onlineState="Unknown",this.ya=void 0}get isPrimaryClient(){return this.ya===!0}}async function Py(t,e,n){const r=Dy(t);try{const s=await function(o,a){const l=ne(o),c=me.now(),u=a.reduce((m,p)=>m.add(p.key),Pe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let p=ti(),v=Pe();return l.Xi.getEntries(m,u).next(y=>{p=y,p.forEach((C,N)=>{N.isValidDocument()||(v=v.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,p)).next(y=>{h=y;const C=[];for(const N of a){const x=T2(N,h.get(N.key).overlayedDocument);x!=null&&C.push(new tn(N.key,x,Fh(x.value.mapValue),pt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,C,a)}).next(y=>{f=y;const C=y.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,y.batchId,C)})}).then(()=>({batchId:f.batchId,changes:Zh(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.fa[o.currentUser.toKey()];c||(c=new Me(ee)),c=c.insert(a,l),o.fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ni(r,s.changes),await Oi(r.remoteStore)}catch(s){const i=gd(s,"Failed to persist write");n.reject(i)}}function _c(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Ea.forEach((i,o)=>{const a=o.view.N_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.listeners)f.N_(a)&&(c=!0)}),c&&Ay(l)}(r.eventManager,e),s.length&&r.Ta.r_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Sy(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await sy(n.localStore,e);_d(n,r,null),md(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ni(n,s)}catch(s){await $h(s)}}async function by(t,e,n){const r=ne(t);try{const s=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ye(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);_d(r,e,n),md(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ni(r,s)}catch(s){await $h(s)}}function md(t,e){(t.ga.get(e)||[]).forEach(n=>{n.resolve()}),t.ga.delete(e)}function _d(t,e,n){const r=ne(t);let s=r.fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.fa[r.currentUser.toKey()]=s}}async function Ni(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Ea.isEmpty()||(r.Ea.forEach((a,l)=>{o.push(r.wa(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=Va.qi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Ta.r_(s),await async function(l,c){const u=ne(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>E.forEach(c,f=>E.forEach(f.Li,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>E.forEach(f.ki,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Pi(h))throw h;S("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.Ji.get(f),p=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(p);u.Ji=u.Ji.insert(f,v)}}}(r.localStore,i))}async function ky(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());const r=await cd(n.localStore,e);n.currentUser=e,function(i,o){i.ga.forEach(a=>{a.forEach(l=>{l.reject(new D(w.CANCELLED,o))})}),i.ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ni(n,r.ts)}}function Dy(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=by.bind(null,e),e}class yc{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Di(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return ry(this.persistence,new ty,e.initialUser,this.serializer)}createPersistence(e){return new Y2(Da.zr,this.serializer)}createSharedClientState(e){return new ay}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_c(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ky.bind(null,this.syncEngine),await Iy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Cy}()}createDatastore(e){const n=Di(e.databaseInfo.databaseId),r=function(i){return new hy(i)}(e.databaseInfo);return function(i,o,a,l){return new py(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new my(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_c(this.syncEngine,n,0),function(){return gc.v()?new gc:new ly}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new Ry(s,i,o,a,l,c);return u&&(h.ya=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ne(n);S("RemoteStore","RemoteStore shutting down."),r.y_.add(5),await hs(r),r.S_.shutdown(),r.b_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Re.UNAUTHENTICATED,this.clientId=xh.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{S("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(S("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eo(t,e){t.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cd(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vc(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xy(t);S("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>mc(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>mc(e.remoteStore,i)),t._onlineComponents=e}function Ny(t){return t.name==="FirebaseError"?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function xy(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{await eo(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Ny(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await eo(t,new yc)}}else S("FirestoreClient","Using default OfflineComponentProvider"),await eo(t,new yc);return t._offlineComponents}async function $y(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),await vc(t,t._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),await vc(t,new Vy))),t._onlineComponents}function Ly(t){return $y(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e,n){if(!n)throw new D(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Uy(t,e,n,r){if(e===!0&&r===!0)throw new D(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ec(t){if(!O.isDocumentKey(t))throw new D(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Na(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":L()}function No(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Na(t);throw new D(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new D(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new D(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yd((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new D(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new D(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new D(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xa{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new D(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b0;switch(r.type){case"firstParty":return new O0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new D(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wc.get(n);r&&(S("ComponentProvider","Removing Datastore"),wc.delete(n),r.terminate())}(this),Promise.resolve()}}function Fy(t,e,n,r={}){var s;const i=(t=No(t,xa))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Re.MOCK_USER;else{a=Wc(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new D(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Re(c)}t._authCredentials=new k0(new Nh(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $a(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}}class zr extends $a{constructor(e,n,r){super(e,n,i2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new O(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function xo(t,e,...n){if(t=Le(t),arguments.length===1&&(e=xh.V()),My("doc","path",e),t instanceof xa){const r=de.fromString(e,...n);return Ec(r),new gt(t,null,new O(r))}{if(!(t instanceof gt||t instanceof zr))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return Ec(r),new gt(t.firestore,t instanceof zr?t.converter:null,new O(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new ud(this,"async_queue_retry"),this.Xa=()=>{const n=Yi();n&&S("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ko.No()};const e=Yi();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xa)}get isShuttingDown(){return this.za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.eu(),this.tu(e)}enterRestrictedMode(e){if(!this.za){this.za=!0,this.Ya=e||!1;const n=Yi();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xa)}}enqueue(e){if(this.eu(),this.za)return new Promise(()=>{});const n=new Ht;return this.tu(()=>this.za&&this.Ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ga.push(e),this.nu()))}async nu(){if(this.Ga.length!==0){try{await this.Ga[0](),this.Ga.shift(),this.Ko.reset()}catch(e){if(!Pi(e))throw e;S("AsyncQueue","Operation failed with retryable error: "+e)}this.Ga.length>0&&this.Ko.xo(()=>this.nu())}}tu(e){const n=this.Wa.then(()=>(this.Ja=!0,e().catch(r=>{this.Ha=r,this.Ja=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Qt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ja=!1,r))));return this.Wa=n,n}enqueueAfterDelay(e,n,r){this.eu(),this.Za.indexOf(e)>-1&&(n=0);const s=Oa.createAndSchedule(this,e,n,r,i=>this.ru(i));return this.ja.push(s),s}eu(){this.Ha&&L()}verifyOperationInProgress(){}async iu(){let e;do e=this.Wa,await e;while(e!==this.Wa)}su(e){for(const n of this.ja)if(n.timerId===e)return!0;return!1}ou(e){return this.iu().then(()=>{this.ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.iu()})}_u(e){this.Za.push(e)}ru(e){const n=this.ja.indexOf(e);this.ja.splice(n,1)}}class vd extends xa{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new By}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||wd(this),this._firestoreClient.terminate()}}function Hy(t,e){const n=typeof t=="object"?t:zo(),r=typeof t=="string"?t:e||"(default)",s=li(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=jc("firestore");i&&Fy(s,...i)}return s}function jy(t){return t._firestoreClient||wd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function wd(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new W0(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,yd(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Oy(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(vt.fromBase64String(e))}catch(n){throw new D(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wr(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new D(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=/^__.*__$/;class zy{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tn(e,this.data,this.fieldMask,n,this.fieldTransforms):new us(e,this.data,n,this.fieldTransforms)}}function Cd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw L()}}class La{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.au(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get uu(){return this.settings.uu}cu(e){return new La(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.cu({path:r,hu:!1});return s.Pu(e),s}Iu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.cu({path:r,hu:!1});return s.au(),s}Tu(e){return this.cu({path:void 0,hu:!0})}Eu(e){return si(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}au(){if(this.path)for(let e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}Pu(e){if(e.length===0)throw this.Eu("Document fields must not be empty");if(Cd(this.uu)&&qy.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}class Wy{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Di(e)}Ru(e,n,r,s=!1){return new La({uu:e,methodName:n,Au:r,path:Se.emptyPath(),hu:!1,du:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gy(t){const e=t._freezeSettings(),n=Di(t._databaseId);return new Wy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ky(t,e,n,r,s,i={}){const o=t.Ru(i.merge||i.mergeFields?2:0,e,n,s);Sd("Data must be an object, but it was:",o,r);const a=Rd(r,o);let l,c;if(i.merge)l=new We(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=Qy(e,h,n);if(!o.contains(f))throw new D(w.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Jy(u,f)||u.push(f)}l=new We(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new zy(new ze(a),l,c)}function Ad(t,e){if(Pd(t=Le(t)))return Sd("Unsupported field value:",e,t),Rd(t,e);if(t instanceof Td)return function(r,s){if(!Cd(s.uu))throw s.Eu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Eu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.hu&&e.uu!==4)throw e.Eu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ad(a,s.Tu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return m2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=me.fromDate(r);return{timestampValue:Vo(s.serializer,i)}}if(r instanceof me){const i=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vo(s.serializer,i)}}if(r instanceof Id)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wr)return{bytesValue:b2(s.serializer,r._byteString)};if(r instanceof gt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Eu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ad(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Eu(`Unsupported field value: ${Na(r)}`)}(t,e)}function Rd(t,e){const n={};return Mh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(r,s)=>{const i=Ad(s,e.lu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Pd(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof Id||t instanceof Wr||t instanceof gt||t instanceof Td)}function Sd(t,e,n){if(!Pd(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Na(n);throw r==="an object"?e.Eu(t+" a custom object"):e.Eu(t+" "+r)}}function Qy(t,e,n){if((e=Le(e))instanceof Ed)return e._internalPath;if(typeof e=="string")return Xy(t,e);throw si("Field path arguments must be of type string or ",t,!1,void 0,n)}const Zy=new RegExp("[~\\*/\\[\\]]");function Xy(t,e,n){if(e.search(Zy)>=0)throw si(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ed(...e.split("."))._internalPath}catch{throw si(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function si(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new D(w.INVALID_ARGUMENT,a+t+l)}function Jy(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function $o(t,e,n){t=No(t,gt);const r=No(t.firestore,vd),s=Yy(t.converter,e,n);return ev(r,[Ky(Gy(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pt.none())])}function ev(t,e){return function(r,s){const i=new Ht;return r.asyncQueue.enqueueAndForget(async()=>Py(await Ly(r),s,i)),i.promise}(jy(t),e)}(function(e,n=!0){(function(s){Rn=s})(Yt),zt(new bt("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new vd(new D0(r.getProvider("auth-internal")),new x0(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new D(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ys(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nt(Yl,"4.1.0",e),nt(Yl,"4.1.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="firebasestorage.googleapis.com",kd="storageBucket",tv=2*60*1e3,nv=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le extends at{constructor(e,n,r=0){super(to(e),`Firebase Storage: ${n} (${to(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,le.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return to(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ae;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ae||(ae={}));function to(t){return"storage/"+t}function Ma(){const t="An unknown error occurred, please check the error payload for server response.";return new le(ae.UNKNOWN,t)}function rv(t){return new le(ae.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sv(t){return new le(ae.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function iv(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new le(ae.UNAUTHENTICATED,t)}function ov(){return new le(ae.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function av(t){return new le(ae.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function lv(){return new le(ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cv(){return new le(ae.CANCELED,"User canceled the upload/download.")}function uv(t){return new le(ae.INVALID_URL,"Invalid URL '"+t+"'.")}function hv(t){return new le(ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dv(){return new le(ae.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kd+"' property when initializing the app?")}function fv(){return new le(ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pv(){return new le(ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gv(t){return new le(ae.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lo(t){return new le(ae.INVALID_ARGUMENT,t)}function Dd(){return new le(ae.APP_DELETED,"The Firebase app was deleted.")}function mv(t){return new le(ae.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pr(t,e){return new le(ae.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mr(t){throw new le(ae.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ue.makeFromUrl(e,n)}catch{return new Ue(e,"")}if(r.path==="")return r;throw hv(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),p={bucket:1,path:3},v=n===bd?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",C=new RegExp(`^https?://${v}/${s}/${y}`,"i"),x=[{regex:a,indices:l,postModify:i},{regex:m,indices:p,postModify:c},{regex:C,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<x.length;R++){const Z=x[R],U=Z.regex.exec(e);if(U){const ce=U[Z.indices.bucket];let H=U[Z.indices.path];H||(H=""),r=new Ue(ce,H),Z.postModify(r);break}}if(r==null)throw uv(e);return r}}class _v{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function h(y){s=setTimeout(()=>{s=null,t(m,l())},y)}function f(){i&&clearTimeout(i)}function m(y,...C){if(c){f();return}if(y){f(),u.call(null,y,...C);return}if(l()||o){f(),u.call(null,y,...C);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,h(x)}let p=!1;function v(y){p||(p=!0,f(),!c&&(s!==null?(y||(a=2),clearTimeout(s),h(0)):y||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function vv(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){return t!==void 0}function Ev(t){return typeof t=="object"&&!Array.isArray(t)}function Ua(t){return typeof t=="string"||t instanceof String}function Ic(t){return Fa()&&t instanceof Blob}function Fa(){return typeof Blob<"u"&&!sg()}function Cc(t,e,n,r){if(r<e)throw Lo(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Lo(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Vd(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(jt||(jt={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,r,s,i,o,a,l,c,u,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,p)=>{this.resolve_=m,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Is(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===jt.NO_ERROR,l=i.getStatus();if(!a||Tv(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===jt.ABORT;r(!1,new Is(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Is(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());wv(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Ma();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Dd():cv();o(l)}else{const l=lv();o(l)}};this.canceled_?n(!1,new Is(!1,null,!0)):this.backoffId_=yv(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vv(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Is{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Cv(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Av(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Rv(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Pv(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Sv(t,e,n,r,s,i,o=!0){const a=Vd(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Rv(c,e),Cv(c,n),Av(c,i),Pv(c,r),new Iv(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kv(...t){const e=bv();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Fa())return new Blob(t);throw new le(ae.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Dv(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t){if(typeof atob>"u")throw gv("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class no{constructor(e,n){this.data=e,this.contentType=n||null}}function Ov(t,e){switch(t){case tt.RAW:return new no(Od(e));case tt.BASE64:case tt.BASE64URL:return new no(Nd(t,e));case tt.DATA_URL:return new no(xv(e),$v(e))}throw Ma()}function Od(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Nv(t){let e;try{e=decodeURIComponent(t)}catch{throw Pr(tt.DATA_URL,"Malformed data URL.")}return Od(e)}function Nd(t,e){switch(t){case tt.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Pr(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case tt.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Pr(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Vv(e)}catch(s){throw s.message.includes("polyfill")?s:Pr(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class xd{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Pr(tt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Lv(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function xv(t){const e=new xd(t);return e.base64?Nd(tt.BASE64,e.rest):Nv(e.rest)}function $v(t){return new xd(t).contentType}function Lv(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){let r=0,s="";Ic(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ic(this.data_)){const r=this.data_,s=Dv(r,e,n);return s===null?null:new Rt(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Rt(r,!0)}}static getBlob(...e){if(Fa()){const n=e.map(r=>r instanceof Rt?r.data_:r);return new Rt(kv.apply(null,n))}else{const n=e.map(o=>Ua(o)?Ov(tt.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Rt(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){let e;try{e=JSON.parse(t)}catch{return null}return Ev(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Uv(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Ld(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t,e){return e}class Oe{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Fv}}let Cs=null;function Bv(t){return!Ua(t)||t.length<2?t:Ld(t)}function Md(){if(Cs)return Cs;const t=[];t.push(new Oe("bucket")),t.push(new Oe("generation")),t.push(new Oe("metageneration")),t.push(new Oe("name","fullPath",!0));function e(i,o){return Bv(o)}const n=new Oe("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Oe("size");return s.xform=r,t.push(s),t.push(new Oe("timeCreated")),t.push(new Oe("updated")),t.push(new Oe("md5Hash",null,!0)),t.push(new Oe("cacheControl",null,!0)),t.push(new Oe("contentDisposition",null,!0)),t.push(new Oe("contentEncoding",null,!0)),t.push(new Oe("contentLanguage",null,!0)),t.push(new Oe("contentType",null,!0)),t.push(new Oe("metadata","customMetadata",!0)),Cs=t,Cs}function Hv(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ue(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function jv(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return Hv(r,t),r}function Ud(t,e,n){const r=$d(e);return r===null?null:jv(t,r,n)}function qv(t,e,n,r){const s=$d(e);if(s===null||!Ua(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,h=t.fullPath,f="/b/"+o(u)+"/o/"+o(h),m=Ba(f,n,r),p=Vd({alt:"media",token:c});return m+p})[0]}function zv(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Fd{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){if(!t)throw Ma()}function Wv(t,e){function n(r,s){const i=Ud(t,s,e);return Bd(i!==null),i}return n}function Gv(t,e){function n(r,s){const i=Ud(t,s,e);return Bd(i!==null),qv(i,s,t.host,t._protocol)}return n}function Hd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=ov():s=iv():n.getStatus()===402?s=sv(t.bucket):n.getStatus()===403?s=av(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Kv(t){const e=Hd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=rv(t.path)),i.serverResponse=s.serverResponse,i}return n}function Qv(t,e,n){const r=e.fullServerUrl(),s=Ba(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Fd(s,i,Gv(t,n),o);return a.errorHandler=Kv(e),a}function Zv(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Xv(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Zv(null,e)),r}function Jv(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let R=0;R<2;R++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Xv(e,r,s),u=zv(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Rt.getBlob(h,r,f);if(m===null)throw fv();const p={name:c.fullPath},v=Ba(i,t.host,t._protocol),y="POST",C=t.maxUploadRetryTime,N=new Fd(v,y,Wv(t,n),C);return N.urlParams=p,N.headers=o,N.body=m.uploadData(),N.errorHandler=Hd(e),N}class Yv{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jt.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jt.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jt.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw mr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e5 extends Yv{initXhr(){this.xhr_.responseType="text"}}function jd(){return new e5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this._service=e,n instanceof Ue?this._location=n:this._location=Ue.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xt(e,n)}get root(){const e=new Ue(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ld(this._location.path)}get storage(){return this._service}get parent(){const e=Mv(this._location.path);if(e===null)return null;const n=new Ue(this._location.bucket,e);return new Xt(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw mv(e)}}function t5(t,e,n){t._throwIfRoot("uploadBytes");const r=Jv(t.storage,t._location,Md(),new Rt(e,!0),n);return t.storage.makeRequestWithTokens(r,jd).then(s=>({metadata:s,ref:t}))}function n5(t){t._throwIfRoot("getDownloadURL");const e=Qv(t.storage,t._location,Md());return t.storage.makeRequestWithTokens(e,jd).then(n=>{if(n===null)throw pv();return n})}function r5(t,e){const n=Uv(t._location.path,e),r=new Ue(t._location.bucket,n);return new Xt(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t){return/^[A-Za-z]+:\/\//.test(t)}function i5(t,e){return new Xt(t,e)}function qd(t,e){if(t instanceof Ha){const n=t;if(n._bucket==null)throw dv();const r=new Xt(n,n._bucket);return e!=null?qd(r,e):r}else return e!==void 0?r5(t,e):t}function o5(t,e){if(e&&s5(e)){if(t instanceof Ha)return i5(t,e);throw Lo("To use ref(service, url), the first argument must be a Storage instance.")}else return qd(t,e)}function Ac(t,e){const n=e==null?void 0:e[kd];return n==null?null:Ue.makeFromBucketSpec(n,t)}function a5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Wc(s,t.app.options.projectId))}class Ha{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=bd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tv,this._maxUploadRetryTime=nv,this._requests=new Set,s!=null?this._bucket=Ue.makeFromBucketSpec(s,this._host):this._bucket=Ac(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ue.makeFromBucketSpec(this._url,e):this._bucket=Ac(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cc("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cc("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xt(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new _v(Dd());{const o=Sv(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Rc="@firebase/storage",Pc="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="storage";function l5(t,e,n){return t=Le(t),t5(t,e,n)}function c5(t){return t=Le(t),n5(t)}function u5(t,e){return t=Le(t),o5(t,e)}function h5(t=zo(),e){t=Le(t);const r=li(t,zd).getImmediate({identifier:e}),s=jc("storage");return s&&d5(r,...s),r}function d5(t,e,n,r={}){a5(t,e,n,r)}function f5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ha(n,r,s,e,Yt)}function p5(){zt(new bt(zd,f5,"PUBLIC").setMultipleInstances(!0)),nt(Rc,Pc,""),nt(Rc,Pc,"esm2017")}p5();const Wd={apiKey:"AIzaSyCWhEXY5FDiP4bKxX-lM7owpKHfYM24VPw",authDomain:"best-at-cb209.firebaseapp.com",projectId:"best-at-cb209",storageBucket:"best-at-cb209.appspot.com",messagingSenderId:"617863519140",appId:"1:617863519140:web:5d764714a953ef93913f31",measurementId:"G-SMN2E1B9HF"},ja=qo(Wd);qo(Wd,"Secondary");const Gd=E1(ja),Mo=Hy(ja),g5=h5(ja);const m5={class:"student-form"},_5={class:"student-form__input"},y5=d("p",{class:"student-form__input-text"},"Ваш логин",-1),v5={key:0},w5={class:"student-form__input",style:{"margin-top":"15px"}},E5=d("p",{class:"student-form__input-text"},"Ваш пароль",-1),T5=["type"],I5={key:2},C5={class:"student-form__input",style:{"margin-top":"16px"}},A5=d("p",{class:"student-form__input-text"},"Подтвердите пароль",-1),R5=["type"],P5={key:2},S5={class:"student-form__input",style:{"margin-top":"16px"}},b5=d("p",{class:"student-form__input-text"},"Ваш e-mail",-1),k5={key:0},D5={class:"student-form__accept-icon"},V5=d("p",null,[ft("Я принимаю условия пользовательского соглашения и "),d("span",null," правила обработки персональных данных")],-1),O5={class:"student-form__btn"},N5={class:"student-form__last"},x5=d("p",null,"Или войти через социальные сети",-1),$5={class:"student-form__last-icons"},L5={__name:"RegistrationStudent",setup(t){const e=F(!0),n=F(!0),r=F(!1),s=F({login:"",email:"",password:"",RePassword:""}),i=z(()=>({login:{required:he},email:{required:he,email:Fo},password:{required:He.withMessage("Введите пароль",he),minLength:He.withMessage("Минимальная длина пароля 6 символов",Ns(6))},RePassword:{required:He.withMessage("Подтвердите пароль",he),sameAs:He.withMessage("Пароли не совпадают",Bo(s.value.password))}})),o=wr(i,s);async function a(){if(await o.value.$validate()){const c={login:s.value.login,email:s.value.email,password:s.value.password,RePassword:s.value.RePassword},u={name:"",surname:"",phone:"",country:[{name:"Украина"},{name:"Казахстан"},{name:"Польща"}],timed:[{name:"+3 GMT"},{name:"+1 GMT"}],about:"",lessons:[],selectedTeacher:[],payment:[],statistic:[]},h=new Date().toLocaleString();await Eu(Gd,s.value.email,s.value.password),await $o(xo(Mo,"privateStudentData",h),c),await $o(xo(Mo,"publicStudentData",h),u)}}return(l,c)=>{var u,h,f,m,p,v,y,C,N,x,R,Z,U,ce,H,I,X,re,J,Ve,Ge,je,Ke,Qe,Ze,Xe,j,Ce;return _(),P("div",m5,[d("div",_5,[y5,K(d("input",{class:q({error:(h=(u=g(o))==null?void 0:u.login)==null?void 0:h.$error}),type:"text","onUpdate:modelValue":c[0]||(c[0]=Q=>s.value.login=Q)},null,2),[[ie,s.value.login]]),(m=(f=g(o))==null?void 0:f.login)!=null&&m.$error?(_(),P("span",v5,"Заполните поле")):A("",!0),(v=(p=g(o))==null?void 0:p.login)!=null&&v.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",w5,[E5,K(d("input",{class:q({error:(C=(y=g(o))==null?void 0:y.password)==null?void 0:C.$error}),"onUpdate:modelValue":c[1]||(c[1]=Q=>s.value.password=Q),type:e.value?"password":"text"},null,10,T5),[[pn,s.value.password]]),e.value?(_(),b(gn,{key:0,onClick:c[2]||(c[2]=Q=>e.value=!e.value),class:"showpass"})):(_(),b(mn,{key:1,onClick:c[3]||(c[3]=Q=>e.value=!e.value),class:"showpass"})),(x=(N=g(o))==null?void 0:N.password)!=null&&x.$error?(_(),P("span",I5,ht((Z=(R=g(o))==null?void 0:R.password)==null?void 0:Z.$errors[0].$message),1)):A("",!0),(ce=(U=g(o))==null?void 0:U.password)!=null&&ce.$error?(_(),b(Y,{key:3,class:"error-icons"})):A("",!0)]),d("div",C5,[A5,K(d("input",{class:q({error:(I=(H=g(o))==null?void 0:H.RePassword)==null?void 0:I.$error}),"onUpdate:modelValue":c[4]||(c[4]=Q=>s.value.RePassword=Q),type:n.value?"password":"text"},null,10,R5),[[pn,s.value.RePassword]]),n.value?(_(),b(gn,{key:0,onClick:c[5]||(c[5]=Q=>n.value=!n.value),class:"showpass"})):(_(),b(mn,{key:1,onClick:c[6]||(c[6]=Q=>n.value=!n.value),class:"showpass"})),(re=(X=g(o))==null?void 0:X.RePassword)!=null&&re.$error?(_(),P("span",P5,ht((Ve=(J=g(o))==null?void 0:J.RePassword)==null?void 0:Ve.$errors[0].$message),1)):A("",!0),(je=(Ge=g(o))==null?void 0:Ge.RePassword)!=null&&je.$error?(_(),b(Y,{key:3,class:"error-icons"})):A("",!0)]),d("div",S5,[b5,K(d("input",{class:q({error:(Qe=(Ke=g(o))==null?void 0:Ke.email)==null?void 0:Qe.$error}),"onUpdate:modelValue":c[7]||(c[7]=Q=>s.value.email=Q),type:"email"},null,2),[[ie,s.value.email]]),(Xe=(Ze=g(o))==null?void 0:Ze.email)!=null&&Xe.$error?(_(),P("span",k5,"Заполните поле")):A("",!0),(Ce=(j=g(o))==null?void 0:j.email)!=null&&Ce.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",{class:"student-form__accept",onClick:c[8]||(c[8]=Q=>r.value=!r.value)},[d("div",D5,[r.value?(_(),b(Dc,{key:1})):(_(),b(kc,{key:0}))]),V5]),d("div",O5,[pe(an,{onClick:a,isDisabled:!r.value},{default:dt(()=>[ft("Зарегистрироваться")]),_:1},8,["isDisabled"])]),d("div",N5,[x5,d("div",$5,[pe(fp),pe(vp),pe(Ap)])])])}}},M5={},U5={width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F5=d("path",{d:"M13.5838 11.54H10.6718V14.404H9.32775V11.54H6.41575V10.276H9.32775V7.396H10.6718V10.276H13.5838V11.54Z",fill:"#F04973"},null,-1),B5=d("circle",{opacity:"0.5",cx:"10",cy:"11",r:"9.5",stroke:"#F04973"},null,-1),H5=[F5,B5];function j5(t,e){return _(),P("svg",U5,H5)}const Sc=$e(M5,[["render",j5]]),q5={},z5={width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W5=Jt('<path d="M17.7999 1.19985C16.1973 -0.400266 13.5895 -0.399634 11.9865 1.19985L9.07982 4.10203C8.83285 4.34862 8.83285 4.74833 9.07982 4.99492C9.32679 5.2415 9.72712 5.2415 9.97409 4.99492L12.8808 2.09273C13.4155 1.55915 14.1302 1.26489 14.8929 1.26489C15.656 1.26489 16.3706 1.55915 16.9054 2.09305C17.4401 2.62695 17.7348 3.34049 17.7348 4.10235C17.7348 4.86389 17.4401 5.57744 16.9054 6.11133L13.1047 9.90703C11.9947 11.0146 10.1894 11.0146 9.0795 9.90703C8.83253 9.66045 8.4322 9.66045 8.18523 9.90703C7.93826 10.1536 7.93826 10.5536 8.18523 10.7999C8.98653 11.6 10.0392 12 11.0919 12C12.1446 12 13.1973 11.6 13.9986 10.7999L17.7999 7.00453C18.5737 6.23226 19 5.2014 19 4.10235C19 3.00298 18.5737 1.97244 17.7999 1.19985Z" fill="url(#paint0_linear_132_994)"></path><path d="M8.757 13.3662L6.24633 15.8689C5.70049 16.413 4.97099 16.7129 4.19209 16.7129C3.41352 16.7129 2.68369 16.413 2.13785 15.8689C1.00517 14.7398 1.00517 12.9025 2.13785 11.7734L5.78991 8.1329C6.33575 7.58911 7.06526 7.28921 7.84415 7.28921C8.62272 7.28921 9.35223 7.58911 9.89807 8.1329C10.1502 8.3842 10.5588 8.3842 10.8109 8.1329C11.063 7.88159 11.063 7.47423 10.8109 7.22293C9.17534 5.59252 6.51328 5.5922 4.87673 7.22293L1.22467 10.8638C0.435123 11.6508 0 12.7014 0 13.8215C0 14.9412 0.435123 15.9918 1.22499 16.7789C2.01454 17.5663 3.06845 18 4.19177 18C5.3154 18 6.36932 17.5663 7.15886 16.7789L9.66954 14.2761C9.92164 14.0248 9.92164 13.6175 9.66954 13.3662C9.41744 13.1149 9.0091 13.1149 8.757 13.3662Z" fill="url(#paint1_linear_132_994)"></path><defs><linearGradient id="paint0_linear_132_994" x1="8" y1="6" x2="19" y2="6" gradientUnits="userSpaceOnUse"><stop stop-color="#F04973"></stop><stop offset="1" stop-color="#FA6655"></stop></linearGradient><linearGradient id="paint1_linear_132_994" x1="-8.19564e-08" y1="12" x2="11" y2="12" gradientUnits="userSpaceOnUse"><stop stop-color="#F04973"></stop><stop offset="1" stop-color="#FA6655"></stop></linearGradient></defs>',3),G5=[W5];function K5(t,e){return _(),P("svg",z5,G5)}const bc=$e(q5,[["render",K5]]),_r={async sendDocumentStorage(t,e){try{const n=t.map(async r=>{const s=u5(g5,`${e}/${r.name}`);await l5(s,r.obj);const i=await c5(s);r.url=i,r.obj=null});await Promise.all(n)}catch(n){throw console.error("Error while uploading photos:",n),n}},async sendDocumentDataBase(t,e,n){await $o(xo(Mo,t,`${e}`),n)},async registerUser(t,e){await Eu(Gd,t,e)}};const Q5={class:"teacher-forms"},Z5={class:"teacher-forms__input",style:{"margin-top":"5px"}},X5=d("p",{class:"teacher-forms__input-text"},"Ваш логин",-1),J5={key:0},Y5={class:"student-form__input",style:{"margin-top":"15px"}},e4=d("p",{class:"student-form__input-text"},"Ваш пароль",-1),t4=["type"],n4={key:2},r4={class:"student-form__input",style:{"margin-top":"15px"}},s4=d("p",{class:"student-form__input-text"},"Подтвердите пароль",-1),i4=["type"],o4={key:2},a4={class:"teacher-forms__input",style:{"margin-top":"18px"}},l4=d("p",{class:"teacher-forms__input-text"},"Ваш e-mail",-1),c4={key:0},u4={class:"teacher-forms__input",style:{"margin-top":"15px"}},h4=d("p",{class:"teacher-forms__input-text"},"Ваш телефон",-1),d4={key:0},f4={class:"teacher-forms__btn"},p4={class:"teacher-forms__photo"},g4={class:"teacher-forms__photo-img"},m4=["src"],_4={class:"teacher-forms__photo-text"},y4=d("label",{for:"img"},"Загрузить фотографию",-1),v4={class:"teacher-forms__input",style:{"margin-top":"20px"}},w4=d("p",{class:"teacher-forms__input-text"},"Паспорт",-1),E4={key:0},T4={class:"teacher-forms__input",style:{"margin-top":"15px"}},I4=d("p",{class:"teacher-forms__input-text"},"Страна",-1),C4={key:0},A4={class:"teacher-forms__input",style:{"margin-top":"18px"}},R4=d("p",{class:"teacher-forms__input-text"},"Город",-1),P4={key:0},S4={class:"teacher-forms__input",style:{"margin-top":"15px"}},b4=d("p",{class:"teacher-forms__input-text"},"Адрес",-1),k4={key:0},D4={class:"teacher-forms__btn"},V4={key:2,class:"teacher-forms__three-step"},O4={class:"teacher-forms__input",style:{"margin-top":"5px"}},N4=d("p",{class:"teacher-forms__input-text"},"Образование",-1),x4={class:"teacher-forms__input",style:{"margin-top":"5px"}},$4=d("p",null,"Добавить поле",-1),L4={class:"teacher-forms__input",style:{"margin-top":"15px"}},M4=d("p",{class:"teacher-forms__input-text"},"Опыт работы",-1),U4={class:"teacher-forms__input",style:{"margin-top":"5px"}},F4=d("p",null,"Добавить поле",-1),B4={class:"document"},H4=d("label",{for:"document"},"Загрузить диплом",-1),j4={class:"item",style:{height:"39px","margin-top":"10px"}},q4={class:"document__element"},z4={class:"student-form__accept-icon"},W4=d("p",null,[ft("Я принимаю условия пользовательского соглашения и "),d("span",null," правила обработки персональных данных")],-1),G4={class:"teacher-forms__btn"},K4={__name:"RegistrationTeacher",setup(t){const e=F(!0),n=F(!0),r=F({one:!0,two:!1,three:!1}),s=H=>{const I=["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter"],X=/\d/.test(H.key),re=I.includes(H.key),J=i.value.phone.length>=13;(!X&&!re||J)&&H.preventDefault()},i=F({login:"",email:"",password:"",RePassword:"",phone:""}),o=z(()=>({login:{required:he},email:{required:he,email:Fo},phone:{required:he,minLength:Ns(12)},password:{required:He.withMessage("Введите пароль",he),minLength:He.withMessage("Минимальная длина пароля 6 символов",Ns(6))},RePassword:{required:He.withMessage("Подтвердите пароль",he),sameAs:He.withMessage("Пароли не совпадают",Bo(i.value.password))}})),a=wr(o,i);async function l(){await a.value.$validate()&&(r.value.two=!0)}const c=F([{obj:null,name:"ava-"+Date.now(),url:new URL("/best-at/assets/Avatar-d9e79dc9.svg",self.location)}]),u=F({pass:"",country:"",city:"",adress:""}),h=z(()=>({pass:{required:he},country:{required:he},city:{required:he},adress:{required:he}})),f=wr(h,u);async function m(H){const I=H.target.files;c.value=[];for(let X=0;X<I.length;X++){const re=I[X],J=new Image;await new Promise(Ve=>{J.onload=Ve,J.onerror=Ve,J.src=URL.createObjectURL(re)}),c.value.push({id:0,obj:re,name:"ava-"+Date.now(),url:URL.createObjectURL(re)})}}async function p(){await f.value.$validate()&&(r.value.three=!0)}const v=F(!1),y=F(!1),C=F([]);async function N(H){C.value=[];const I=H.target.files,X=[];for(let re=0;re<I.length;re++){const J=I[re];J.type==="application/pdf"?X.push({id:0,obj:J,name:J.name,url:URL.createObjectURL(J)}):console.warn(`Unsupported file type: ${J.type}`)}C.value.push(...X)}const x=F(!1),R=F({educationOne:"",educationTwo:"",experience:"",experienceTwo:""}),Z=z(()=>({educationOne:{required:he},experience:{required:he}})),U=wr(Z,R);async function ce(){const H=await U.value.$validate();if(console.log(H),H){const I="user-"+Date.now(),X=`users/teachers/${I}/ava/`,re=`users/teachers/${I}/doc/`;await _r.sendDocumentStorage(c.value,X),await _r.sendDocumentStorage(C.value,re);const J={login:i.value.login,password:i.value.password,email:i.value.email,phone:i.value.phone,pass:u.value.pass,ava:c.value};await _r.sendDocumentDataBase("privateTeachers",I,J);const Ve={country:[{country:u.value.country}],city:u.value.city,adress:u.value.adress,education:{educationOne:R.value.educationOne,educationTwo:R.value.educationTwo},experience:{experienceOne:R.value.experience,experienceTwo:R.value.experienceTwo},document:C.value};await _r.sendDocumentDataBase("publicTeachers",I,Ve),await _r.registerUser(i.value.email,i.value.password)}}return(H,I)=>{var X,re,J,Ve,Ge,je,Ke,Qe,Ze,Xe,j,Ce,Q,Sn,bn,kn,Dn,Vn,On,Nn,xn,$n,Ln,Mn,Un,Fn,Bn,Hn,jn,qn,zn,Wn,Gn,Kn,Qn,Zn,Xn,Jn,Yn,er,tr,nr,rr,sr,ir,or,ar,lr,cr,ur,hr,dr,fr,G,qa,za,Wa,Ga,Ka,Qa,Za,Xa,Ja,Ya,el,tl;return _(),P("div",Q5,[r.value.one?(_(),P("div",{key:0,class:q(["teacher-forms__one-step",{"teacher-forms_disabled":r.value.two}])},[d("div",Z5,[X5,K(d("input",{class:q({error:(re=(X=g(a))==null?void 0:X.login)==null?void 0:re.$error}),type:"text","onUpdate:modelValue":I[0]||(I[0]=$=>i.value.login=$)},null,2),[[ie,i.value.login]]),(Ve=(J=g(a))==null?void 0:J.login)!=null&&Ve.$error?(_(),P("span",J5,"Заполните поле")):A("",!0),(je=(Ge=g(a))==null?void 0:Ge.login)!=null&&je.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",Y5,[e4,K(d("input",{class:q({error:(Qe=(Ke=g(a))==null?void 0:Ke.password)==null?void 0:Qe.$error}),"onUpdate:modelValue":I[1]||(I[1]=$=>i.value.password=$),type:e.value?"password":"text"},null,10,t4),[[pn,i.value.password]]),e.value?(_(),b(gn,{key:0,onClick:I[2]||(I[2]=$=>e.value=!e.value),class:"showpass"})):(_(),b(mn,{key:1,onClick:I[3]||(I[3]=$=>e.value=!e.value),class:"showpass"})),(Xe=(Ze=g(a))==null?void 0:Ze.password)!=null&&Xe.$error?(_(),P("span",n4,ht((Ce=(j=g(a))==null?void 0:j.password)==null?void 0:Ce.$errors[0].$message),1)):A("",!0),(Sn=(Q=g(a))==null?void 0:Q.password)!=null&&Sn.$error?(_(),b(Y,{key:3,class:"error-icons"})):A("",!0)]),d("div",r4,[s4,K(d("input",{class:q({error:(kn=(bn=g(a))==null?void 0:bn.RePassword)==null?void 0:kn.$error}),"onUpdate:modelValue":I[4]||(I[4]=$=>i.value.RePassword=$),type:n.value?"password":"text"},null,10,i4),[[pn,i.value.RePassword]]),n.value?(_(),b(gn,{key:0,onClick:I[5]||(I[5]=$=>n.value=!n.value),class:"showpass"})):(_(),b(mn,{key:1,onClick:I[6]||(I[6]=$=>n.value=!n.value),class:"showpass"})),(Vn=(Dn=g(a))==null?void 0:Dn.RePassword)!=null&&Vn.$error?(_(),P("span",o4,ht((Nn=(On=g(a))==null?void 0:On.RePassword)==null?void 0:Nn.$errors[0].$message),1)):A("",!0),($n=(xn=g(a))==null?void 0:xn.RePassword)!=null&&$n.$error?(_(),b(Y,{key:3,class:"error-icons"})):A("",!0)]),d("div",a4,[l4,K(d("input",{class:q({error:(Mn=(Ln=g(a))==null?void 0:Ln.email)==null?void 0:Mn.$error}),"onUpdate:modelValue":I[7]||(I[7]=$=>i.value.email=$),type:"email"},null,2),[[ie,i.value.email]]),(Fn=(Un=g(a))==null?void 0:Un.email)!=null&&Fn.$error?(_(),P("span",c4,"Заполните поле")):A("",!0),(Hn=(Bn=g(a))==null?void 0:Bn.email)!=null&&Hn.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",u4,[h4,K(d("input",{class:q({error:(qn=(jn=g(a))==null?void 0:jn.phone)==null?void 0:qn.$error}),"onUpdate:modelValue":I[8]||(I[8]=$=>i.value.phone=$),onKeydown:s,type:"text"},null,34),[[ie,i.value.phone]]),(Wn=(zn=g(a))==null?void 0:zn.phone)!=null&&Wn.$error?(_(),P("span",d4,"Заполните поле")):A("",!0),(Kn=(Gn=g(a))==null?void 0:Gn.phone)!=null&&Kn.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",f4,[pe(an,{width:130,padding:9,lineHeight:21,style:{"margin-top":"29px"},onClick:l},{default:dt(()=>[ft("Далее")]),_:1})])],2)):A("",!0),r.value.two?(_(),P("div",{key:1,class:q(["teacher-forms__two-step",{"teacher-forms_disabled":r.value.three}])},[d("div",p4,[(_(!0),P(so,null,io(c.value,$=>(_(),P("div",g4,[d("img",{src:$.url,alt:"",height:"54",width:"54"},null,8,m4)]))),256)),d("div",_4,[d("input",{id:"img",onChange:I[9]||(I[9]=$=>m($)),ref:"fileInput",type:"file",accept:"image/* "},null,544),y4])]),d("div",v4,[w4,K(d("input",{class:q({error:(Zn=(Qn=g(f))==null?void 0:Qn.pass)==null?void 0:Zn.$error}),type:"text","onUpdate:modelValue":I[10]||(I[10]=$=>u.value.pass=$)},null,2),[[ie,u.value.pass]]),(Jn=(Xn=g(f))==null?void 0:Xn.pass)!=null&&Jn.$error?(_(),P("span",E4,"Заполните поле")):A("",!0),(er=(Yn=g(f))==null?void 0:Yn.pass)!=null&&er.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",T4,[I4,K(d("input",{class:q({error:(nr=(tr=g(f))==null?void 0:tr.country)==null?void 0:nr.$error}),type:"text","onUpdate:modelValue":I[11]||(I[11]=$=>u.value.country=$)},null,2),[[ie,u.value.country]]),(sr=(rr=g(f))==null?void 0:rr.country)!=null&&sr.$error?(_(),P("span",C4,"Заполните поле")):A("",!0),(or=(ir=g(f))==null?void 0:ir.country)!=null&&or.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",A4,[R4,K(d("input",{class:q({error:(lr=(ar=g(f))==null?void 0:ar.city)==null?void 0:lr.$error}),type:"text","onUpdate:modelValue":I[12]||(I[12]=$=>u.value.city=$)},null,2),[[ie,u.value.city]]),(ur=(cr=g(f))==null?void 0:cr.city)!=null&&ur.$error?(_(),P("span",P4,"Заполните поле")):A("",!0),(dr=(hr=g(f))==null?void 0:hr.city)!=null&&dr.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",S4,[b4,K(d("input",{class:q({error:(G=(fr=g(f))==null?void 0:fr.adress)==null?void 0:G.$error}),type:"text","onUpdate:modelValue":I[13]||(I[13]=$=>u.value.adress=$)},null,2),[[ie,u.value.adress]]),(za=(qa=g(f))==null?void 0:qa.adress)!=null&&za.$error?(_(),P("span",k4,"Заполните поле")):A("",!0),(Ga=(Wa=g(a))==null?void 0:Wa.adress)!=null&&Ga.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",D4,[pe(an,{width:130,padding:9,lineHeight:21,style:{"margin-top":"29px"},onClick:p},{default:dt(()=>[ft("Далее")]),_:1})])],2)):A("",!0),r.value.three?(_(),P("div",V4,[d("div",{class:q(["block",{block_open:v.value}])},[d("div",O4,[N4,K(d("input",{class:q({error:(Qa=(Ka=g(U))==null?void 0:Ka.educationOne)==null?void 0:Qa.$error}),type:"text","onUpdate:modelValue":I[14]||(I[14]=$=>R.value.educationOne=$)},null,2),[[ie,R.value.educationOne]]),(Xa=(Za=g(U))==null?void 0:Za.educationOne)!=null&&Xa.$error?(_(),b(Y,{key:0,class:"error-icons"})):A("",!0)]),d("div",x4,[K(d("input",{type:"text","onUpdate:modelValue":I[15]||(I[15]=$=>R.value.educationTwo=$)},null,512),[[ie,R.value.educationTwo]])])],2),v.value?A("",!0):(_(),P("div",{key:0,class:"create",onClick:I[16]||(I[16]=$=>v.value=!0)},[pe(Sc),$4])),d("div",{class:q(["block-two",{"block-two_open":y.value}])},[d("div",L4,[M4,K(d("input",{class:q({error:(Ya=(Ja=g(U))==null?void 0:Ja.experience)==null?void 0:Ya.$error}),type:"text","onUpdate:modelValue":I[17]||(I[17]=$=>R.value.experience=$)},null,2),[[ie,R.value.experience]]),(tl=(el=g(U))==null?void 0:el.experience)!=null&&tl.$error?(_(),b(Y,{key:0,class:"error-icons"})):A("",!0)]),d("div",U4,[K(d("input",{type:"text","onUpdate:modelValue":I[18]||(I[18]=$=>R.value.experienceTwo=$)},null,512),[[ie,R.value.experienceTwo]])])],2),y.value?A("",!0):(_(),P("div",{key:1,class:"create",onClick:I[19]||(I[19]=$=>y.value=!0)},[pe(Sc),F4])),d("div",B4,[pe(bc),d("input",{type:"file",ref:"fileInput",name:"",id:"document",onChange:N},null,544),H4]),d("div",j4,[(_(!0),P(so,null,io(C.value,$=>(_(),P("div",q4,[pe(bc),d("p",null,ht($.name),1)]))),256))]),d("div",{class:"teacher-forms__accept",onClick:I[20]||(I[20]=$=>x.value=!x.value)},[d("div",z4,[x.value?(_(),b(Dc,{key:1})):(_(),b(kc,{key:0}))]),W4]),d("div",G4,[pe(an,{padding:9,lineHeight:21,style:{"margin-top":"29px",width:"100%"},onClick:ce,isDisabled:!x.value},{default:dt(()=>[ft("Создать аккаунт")]),_:1},8,["isDisabled"])])])):A("",!0)])}}};const Q4={class:"company-form"},Z4={class:"company-form__one-step"},X4={class:"company-form__input"},J4=d("p",{class:"company-form__input-text"},"Ваш логин",-1),Y4={key:0},e6={class:"company-form__input",style:{"margin-top":"16px"}},t6=d("p",{class:"student-form__input-text"},"Ваш пароль",-1),n6=["type"],r6={key:2},s6={class:"company-form__input",style:{"margin-top":"16px"}},i6=d("p",{class:"student-form__input-text"},"Подтвердите пароль",-1),o6=["type"],a6={key:2},l6={class:"company-form__input",style:{"margin-top":"16px"}},c6=d("p",{class:"student-form__input-text"},"Ваш e-mail",-1),u6={key:0},h6={class:"company-form__input",style:{"margin-top":"16px"}},d6=d("p",{class:"student-form__input-text"},"Ваш телефон",-1),f6={key:0},p6={class:"company-form__btn"},g6={class:"company-form__one-step"},m6={class:"company-form__input"},_6=d("p",{class:"company-form__input-text"},"Наименование компании",-1),y6={key:0},v6={class:"company-form__input",style:{"margin-top":"16px"}},w6=d("p",{class:"company-form__input-text"},"ИНН",-1),E6={key:0},T6={class:"company-form__input",style:{"margin-top":"16px"}},I6=d("p",{class:"company-form__input-text"},"Страна",-1),C6={key:0},A6={class:"company-form__input",style:{"margin-top":"16px"}},R6=d("p",{class:"company-form__input-text"},"Город",-1),P6={key:0},S6={class:"company-form__input",style:{"margin-top":"16px"}},b6=d("p",{class:"company-form__input-text"},"Юридический адрес",-1),k6={key:0},D6={class:"company-form__input",style:{"margin-top":"16px"}},V6=d("p",{class:"company-form__input-text"},"Почтовый адрес",-1),O6={key:0},N6={class:"company-form__btn"},x6={__name:"RegistrationCompany",setup(t){const e=F({login:"",email:"",password:"",RePassword:"",phone:""}),n=z(()=>({login:{required:he},phone:{required:he},email:{required:he,email:Fo},password:{required:He.withMessage("Введите пароль",he),minLength:He.withMessage("Минимальная длина пароля 6 символов",Ns(6))},RePassword:{required:He.withMessage("Подтвердите пароль",he),sameAs:He.withMessage("Пароли не совпадают",Bo(e.value.password))}})),r=wr(n,e),s=F(!0),i=F(!0);async function o(){await r.value.$validate()}return(a,l)=>{var c,u,h,f,m,p,v,y,C,N,x,R,Z,U,ce,H,I,X,re,J,Ve,Ge,je,Ke,Qe,Ze,Xe,j,Ce,Q,Sn,bn,kn,Dn,Vn,On,Nn,xn,$n,Ln,Mn,Un,Fn,Bn,Hn,jn,qn,zn,Wn,Gn,Kn,Qn,Zn,Xn,Jn,Yn,er,tr,nr,rr,sr,ir,or,ar,lr,cr,ur,hr,dr,fr;return _(),P("div",Q4,[d("div",Z4,[d("div",X4,[J4,K(d("input",{class:q({error:(u=(c=g(r))==null?void 0:c.login)==null?void 0:u.$error}),type:"text","onUpdate:modelValue":l[0]||(l[0]=G=>e.value.login=G)},null,2),[[ie,e.value.login]]),(f=(h=g(r))==null?void 0:h.login)!=null&&f.$error?(_(),P("span",Y4,"Заполните поле")):A("",!0),(p=(m=g(r))==null?void 0:m.login)!=null&&p.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",e6,[t6,K(d("input",{class:q({error:(y=(v=g(r))==null?void 0:v.password)==null?void 0:y.$error}),"onUpdate:modelValue":l[1]||(l[1]=G=>e.value.password=G),type:s.value?"password":"text"},null,10,n6),[[pn,e.value.password]]),s.value?(_(),b(gn,{key:0,onClick:l[2]||(l[2]=G=>s.value=!s.value),class:"showpass"})):(_(),b(mn,{key:1,onClick:l[3]||(l[3]=G=>s.value=!s.value),class:"showpass"})),(N=(C=g(r))==null?void 0:C.password)!=null&&N.$error?(_(),P("span",r6,ht((R=(x=g(r))==null?void 0:x.password)==null?void 0:R.$errors[0].$message),1)):A("",!0),(U=(Z=g(r))==null?void 0:Z.password)!=null&&U.$error?(_(),b(Y,{key:3,class:"error-icons"})):A("",!0)]),d("div",s6,[i6,K(d("input",{class:q({error:(H=(ce=g(r))==null?void 0:ce.RePassword)==null?void 0:H.$error}),"onUpdate:modelValue":l[4]||(l[4]=G=>e.value.RePassword=G),type:i.value?"password":"text"},null,10,o6),[[pn,e.value.RePassword]]),i.value?(_(),b(gn,{key:0,onClick:l[5]||(l[5]=G=>i.value=!i.value),class:"showpass"})):(_(),b(mn,{key:1,onClick:l[6]||(l[6]=G=>i.value=!i.value),class:"showpass"})),(X=(I=g(r))==null?void 0:I.RePassword)!=null&&X.$error?(_(),P("span",a6,ht((J=(re=g(r))==null?void 0:re.RePassword)==null?void 0:J.$errors[0].$message),1)):A("",!0),(Ge=(Ve=g(r))==null?void 0:Ve.RePassword)!=null&&Ge.$error?(_(),b(Y,{key:3,class:"error-icons"})):A("",!0)]),d("div",l6,[c6,K(d("input",{class:q({error:(Ke=(je=g(r))==null?void 0:je.email)==null?void 0:Ke.$error}),"onUpdate:modelValue":l[7]||(l[7]=G=>e.value.email=G),type:"email"},null,2),[[ie,e.value.email]]),(Ze=(Qe=g(r))==null?void 0:Qe.email)!=null&&Ze.$error?(_(),P("span",u6,"Заполните поле")):A("",!0),(j=(Xe=g(r))==null?void 0:Xe.email)!=null&&j.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",h6,[d6,K(d("input",{class:q({error:(Q=(Ce=g(r))==null?void 0:Ce.phone)==null?void 0:Q.$error}),"onUpdate:modelValue":l[8]||(l[8]=G=>e.value.phone=G),type:"text"},null,2),[[ie,e.value.phone]]),(bn=(Sn=g(r))==null?void 0:Sn.phone)!=null&&bn.$error?(_(),P("span",f6,"Заполните поле")):A("",!0),(Dn=(kn=g(r))==null?void 0:kn.phone)!=null&&Dn.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",p6,[pe(an,{width:130,padding:9,lineHeight:21,style:{"margin-top":"20px"},onClick:o},{default:dt(()=>[ft("Далее")]),_:1})])]),d("div",g6,[d("div",m6,[_6,K(d("input",{class:q({error:(On=(Vn=g(r))==null?void 0:Vn.login)==null?void 0:On.$error}),type:"text","onUpdate:modelValue":l[9]||(l[9]=G=>e.value.login=G)},null,2),[[ie,e.value.login]]),(xn=(Nn=g(r))==null?void 0:Nn.login)!=null&&xn.$error?(_(),P("span",y6,"Заполните поле")):A("",!0),(Ln=($n=g(r))==null?void 0:$n.login)!=null&&Ln.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",v6,[w6,K(d("input",{class:q({error:(Un=(Mn=g(r))==null?void 0:Mn.login)==null?void 0:Un.$error}),type:"text","onUpdate:modelValue":l[10]||(l[10]=G=>e.value.login=G)},null,2),[[ie,e.value.login]]),(Bn=(Fn=g(r))==null?void 0:Fn.login)!=null&&Bn.$error?(_(),P("span",E6,"Заполните поле")):A("",!0),(jn=(Hn=g(r))==null?void 0:Hn.login)!=null&&jn.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",T6,[I6,K(d("input",{class:q({error:(zn=(qn=g(r))==null?void 0:qn.login)==null?void 0:zn.$error}),type:"text","onUpdate:modelValue":l[11]||(l[11]=G=>e.value.login=G)},null,2),[[ie,e.value.login]]),(Gn=(Wn=g(r))==null?void 0:Wn.login)!=null&&Gn.$error?(_(),P("span",C6,"Заполните поле")):A("",!0),(Qn=(Kn=g(r))==null?void 0:Kn.login)!=null&&Qn.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",A6,[R6,K(d("input",{class:q({error:(Xn=(Zn=g(r))==null?void 0:Zn.login)==null?void 0:Xn.$error}),type:"text","onUpdate:modelValue":l[12]||(l[12]=G=>e.value.login=G)},null,2),[[ie,e.value.login]]),(Yn=(Jn=g(r))==null?void 0:Jn.login)!=null&&Yn.$error?(_(),P("span",P6,"Заполните поле")):A("",!0),(tr=(er=g(r))==null?void 0:er.login)!=null&&tr.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",S6,[b6,K(d("input",{class:q({error:(rr=(nr=g(r))==null?void 0:nr.login)==null?void 0:rr.$error}),type:"text","onUpdate:modelValue":l[13]||(l[13]=G=>e.value.login=G)},null,2),[[ie,e.value.login]]),(ir=(sr=g(r))==null?void 0:sr.login)!=null&&ir.$error?(_(),P("span",k6,"Заполните поле")):A("",!0),(ar=(or=g(r))==null?void 0:or.login)!=null&&ar.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",D6,[V6,K(d("input",{class:q({error:(cr=(lr=g(r))==null?void 0:lr.login)==null?void 0:cr.$error}),type:"text","onUpdate:modelValue":l[14]||(l[14]=G=>e.value.login=G)},null,2),[[ie,e.value.login]]),(hr=(ur=g(r))==null?void 0:ur.login)!=null&&hr.$error?(_(),P("span",O6,"Заполните поле")):A("",!0),(fr=(dr=g(r))==null?void 0:dr.login)!=null&&fr.$error?(_(),b(Y,{key:1,class:"error-icons"})):A("",!0)]),d("div",N6,[pe(an,{width:130,padding:9,lineHeight:21,style:{"margin-top":"20px"},onClick:o},{default:dt(()=>[ft("Далее")]),_:1})])])])}}};const $6={class:"registration"},L6={class:"container"},M6={class:"registration__link"},U6=d("p",{style:{color:"#454B58"}},"Главная",-1),F6=d("p",{style:{"margin-left":"10px"}},"/",-1),B6={style:{"margin-left":"8px"}},H6={class:"registration__title"},j6={key:0,class:"registration__type"},q6=["onClick"],z6=d("div",{class:"select"},null,-1),X6={__name:"RegistrationView",setup(t){const e=Yd(),n=F(!0),r=F(""),s=[{name:"Ученик",icons:cf,type:"student"},{name:"Преподаватель",icons:gf,type:"teachers"},{name:"Компания",icons:Ef,type:"company"}],i=F(null);function o(l){i.value=l;const c={...e.currentRoute.value.query};c.param=l,e.push({query:c}),n.value=!1}function a(l,c){const u=l.query.param;if(u){i.value=u;const h=s.find(f=>f.type===u);h?r.value=h.name:r.value="",n.value=!1}else i.value="",n.value=!0,r.value=""}return ef(()=>{a(e.currentRoute.value,e.currentRoute.value)}),fn(()=>e.currentRoute.value.query,(l,c)=>{l.param||(i.value="",n.value=!0,r.value="")}),(l,c)=>{const u=tf("router-link");return _(),P("div",$6,[d("div",L6,[d("div",M6,[U6,F6,d("p",B6,[pe(u,{to:{path:"/registration"}},{default:dt(()=>[ft(" Регистрация ")]),_:1})])]),d("div",H6,[d("h2",null,"Регистрация "+ht(r.value),1)]),pe(il,{name:"fade"},{default:dt(()=>[i.value==""?(_(),P("div",j6,[(_(),P(so,null,io(s,(h,f)=>d("div",{class:"registration__type-item",onClick:m=>{o(h.type),r.value=h.name}},[(_(),b(nf(h.icons))),d("p",null,ht(h.name),1),z6,pe(Pf,{class:"one-state"}),pe(Nf,{class:"two-state"})],8,q6)),64))])):A("",!0)]),_:1}),pe(il,{name:"fade"},{default:dt(()=>[i.value=="student"?(_(),b(L5,{key:0})):A("",!0)]),_:1}),i.value=="teachers"?(_(),b(K4,{key:0})):A("",!0),i.value=="company"?(_(),b(x6,{key:1})):A("",!0)])])}}};export{X6 as default};
